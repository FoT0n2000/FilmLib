{"ast":null,"code":"var n,\n    u,\n    i,\n    t,\n    o,\n    r,\n    f = {},\n    e = [],\n    c = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n\nfunction s(n, l) {\n  for (var u in l) n[u] = l[u];\n\n  return n;\n}\n\nfunction a(n) {\n  var l = n.parentNode;\n  l && l.removeChild(n);\n}\n\nfunction v(n, l, u) {\n  var i,\n      t,\n      o,\n      r = arguments,\n      f = {};\n\n  for (o in l) \"key\" == o ? i = l[o] : \"ref\" == o ? t = l[o] : f[o] = l[o];\n\n  if (arguments.length > 3) for (u = [u], o = 3; o < arguments.length; o++) u.push(r[o]);\n  if (null != u && (f.children = u), \"function\" == typeof n && null != n.defaultProps) for (o in n.defaultProps) void 0 === f[o] && (f[o] = n.defaultProps[o]);\n  return h(n, f, i, t, null);\n}\n\nfunction h(l, u, i, t, o) {\n  var r = {\n    type: l,\n    props: u,\n    key: i,\n    ref: t,\n    __k: null,\n    __: null,\n    __b: 0,\n    __e: null,\n    __d: void 0,\n    __c: null,\n    constructor: void 0,\n    __v: o\n  };\n  return null == o && (r.__v = r), null != n.vnode && n.vnode(r), r;\n}\n\nfunction p(n) {\n  return n.children;\n}\n\nfunction d(n, l) {\n  this.props = n, this.context = l;\n}\n\nfunction _(n, l) {\n  if (null == l) return n.__ ? _(n.__, n.__.__k.indexOf(n) + 1) : null;\n\n  for (var u; l < n.__k.length; l++) if (null != (u = n.__k[l]) && null != u.__e) return u.__e;\n\n  return \"function\" == typeof n.type ? _(n) : null;\n}\n\nfunction w(n) {\n  var l, u;\n\n  if (null != (n = n.__) && null != n.__c) {\n    for (n.__e = n.__c.base = null, l = 0; l < n.__k.length; l++) if (null != (u = n.__k[l]) && null != u.__e) {\n      n.__e = n.__c.base = u.__e;\n      break;\n    }\n\n    return w(n);\n  }\n}\n\nfunction k(l) {\n  (!l.__d && (l.__d = !0) && u.push(l) && !m.__r++ || t !== n.debounceRendering) && ((t = n.debounceRendering) || i)(m);\n}\n\nfunction m() {\n  for (var n; m.__r = u.length;) n = u.sort(function (n, l) {\n    return n.__v.__b - l.__v.__b;\n  }), u = [], n.some(function (n) {\n    var l, u, i, t, o, r, f;\n    n.__d && (r = (o = (l = n).__v).__e, (f = l.__P) && (u = [], (i = s({}, o)).__v = i, t = T(f, o, i, l.__n, void 0 !== f.ownerSVGElement, null, u, null == r ? _(o) : r), $(u, o), t != r && w(o)));\n  });\n}\n\nfunction g(n, l, u, i, t, o, r, c, s, v) {\n  var y,\n      d,\n      w,\n      k,\n      m,\n      g,\n      b,\n      A = i && i.__k || e,\n      P = A.length;\n\n  for (s == f && (s = null != r ? r[0] : P ? _(i, 0) : null), u.__k = [], y = 0; y < l.length; y++) if (null != (k = u.__k[y] = null == (k = l[y]) || \"boolean\" == typeof k ? null : \"string\" == typeof k || \"number\" == typeof k ? h(null, k, null, null, k) : Array.isArray(k) ? h(p, {\n    children: k\n  }, null, null, null) : null != k.__e || null != k.__c ? h(k.type, k.props, k.key, null, k.__v) : k)) {\n    if (k.__ = u, k.__b = u.__b + 1, null === (w = A[y]) || w && k.key == w.key && k.type === w.type) A[y] = void 0;else for (d = 0; d < P; d++) {\n      if ((w = A[d]) && k.key == w.key && k.type === w.type) {\n        A[d] = void 0;\n        break;\n      }\n\n      w = null;\n    }\n    m = T(n, k, w = w || f, t, o, r, c, s, v), (d = k.ref) && w.ref != d && (b || (b = []), w.ref && b.push(w.ref, null, k), b.push(d, k.__c || m, k)), null != m ? (null == g && (g = m), s = x(n, k, w, A, r, m, s), v || \"option\" != u.type ? \"function\" == typeof u.type && (u.__d = s) : n.value = \"\") : s && w.__e == s && s.parentNode != n && (s = _(w));\n  }\n\n  if (u.__e = g, null != r && \"function\" != typeof u.type) for (y = r.length; y--;) null != r[y] && a(r[y]);\n\n  for (y = P; y--;) null != A[y] && I(A[y], A[y]);\n\n  if (b) for (y = 0; y < b.length; y++) H(b[y], b[++y], b[++y]);\n}\n\nfunction x(n, l, u, i, t, o, r) {\n  var f, e, c;\n  if (void 0 !== l.__d) f = l.__d, l.__d = void 0;else if (t == u || o != r || null == o.parentNode) n: if (null == r || r.parentNode !== n) n.appendChild(o), f = null;else {\n    for (e = r, c = 0; (e = e.nextSibling) && c < i.length; c += 2) if (e == o) break n;\n\n    n.insertBefore(o, r), f = r;\n  }\n  return void 0 !== f ? f : o.nextSibling;\n}\n\nfunction A(n, l, u, i, t) {\n  var o;\n\n  for (o in u) \"children\" === o || \"key\" === o || o in l || C(n, o, null, u[o], i);\n\n  for (o in l) t && \"function\" != typeof l[o] || \"children\" === o || \"key\" === o || \"value\" === o || \"checked\" === o || u[o] === l[o] || C(n, o, l[o], u[o], i);\n}\n\nfunction P(n, l, u) {\n  \"-\" === l[0] ? n.setProperty(l, u) : n[l] = null == u ? \"\" : \"number\" != typeof u || c.test(l) ? u : u + \"px\";\n}\n\nfunction C(n, l, u, i, t) {\n  var o, r;\n  if (t && \"className\" == l && (l = \"class\"), \"style\" === l) {\n    if (\"string\" == typeof u) n.style = u;else {\n      if (\"string\" == typeof i && (n.style = i = \"\"), i) for (l in i) u && l in u || P(n.style, l, \"\");\n      if (u) for (l in u) i && u[l] === i[l] || P(n.style, l, u[l]);\n    }\n  } else \"o\" === l[0] && \"n\" === l[1] ? (o = l !== (l = l.replace(/Capture$/, \"\")), (r = l.toLowerCase()) in n && (l = r), l = l.slice(2), n.l || (n.l = {}), n.l[l] = u, u ? i || n.addEventListener(l, z, o) : n.removeEventListener(l, z, o)) : \"list\" !== l && \"tagName\" !== l && \"form\" !== l && \"type\" !== l && \"size\" !== l && \"download\" !== l && \"href\" !== l && !t && l in n ? n[l] = null == u ? \"\" : u : \"function\" != typeof u && \"dangerouslySetInnerHTML\" !== l && (l !== (l = l.replace(/xlink:?/, \"\")) ? null == u || !1 === u ? n.removeAttributeNS(\"http://www.w3.org/1999/xlink\", l.toLowerCase()) : n.setAttributeNS(\"http://www.w3.org/1999/xlink\", l.toLowerCase(), u) : null == u || !1 === u && !/^ar/.test(l) ? n.removeAttribute(l) : n.setAttribute(l, u));\n}\n\nfunction z(l) {\n  this.l[l.type](n.event ? n.event(l) : l);\n}\n\nfunction N(n, l, u) {\n  var i, t;\n\n  for (i = 0; i < n.__k.length; i++) (t = n.__k[i]) && (t.__ = n, t.__e && (\"function\" == typeof t.type && t.__k.length > 1 && N(t, l, u), l = x(u, t, t, n.__k, null, t.__e, l), \"function\" == typeof n.type && (n.__d = l)));\n}\n\nfunction T(l, u, i, t, o, r, f, e, c) {\n  var a,\n      v,\n      h,\n      y,\n      _,\n      w,\n      k,\n      m,\n      b,\n      x,\n      A,\n      P = u.type;\n\n  if (void 0 !== u.constructor) return null;\n  (a = n.__b) && a(u);\n\n  try {\n    n: if (\"function\" == typeof P) {\n      if (m = u.props, b = (a = P.contextType) && t[a.__c], x = a ? b ? b.props.value : a.__ : t, i.__c ? k = (v = u.__c = i.__c).__ = v.__E : (\"prototype\" in P && P.prototype.render ? u.__c = v = new P(m, x) : (u.__c = v = new d(m, x), v.constructor = P, v.render = L), b && b.sub(v), v.props = m, v.state || (v.state = {}), v.context = x, v.__n = t, h = v.__d = !0, v.__h = []), null == v.__s && (v.__s = v.state), null != P.getDerivedStateFromProps && (v.__s == v.state && (v.__s = s({}, v.__s)), s(v.__s, P.getDerivedStateFromProps(m, v.__s))), y = v.props, _ = v.state, h) null == P.getDerivedStateFromProps && null != v.componentWillMount && v.componentWillMount(), null != v.componentDidMount && v.__h.push(v.componentDidMount);else {\n        if (null == P.getDerivedStateFromProps && m !== y && null != v.componentWillReceiveProps && v.componentWillReceiveProps(m, x), !v.__e && null != v.shouldComponentUpdate && !1 === v.shouldComponentUpdate(m, v.__s, x) || u.__v === i.__v) {\n          v.props = m, v.state = v.__s, u.__v !== i.__v && (v.__d = !1), v.__v = u, u.__e = i.__e, u.__k = i.__k, v.__h.length && f.push(v), N(u, e, l);\n          break n;\n        }\n\n        null != v.componentWillUpdate && v.componentWillUpdate(m, v.__s, x), null != v.componentDidUpdate && v.__h.push(function () {\n          v.componentDidUpdate(y, _, w);\n        });\n      }\n      v.context = x, v.props = m, v.state = v.__s, (a = n.__r) && a(u), v.__d = !1, v.__v = u, v.__P = l, a = v.render(v.props, v.state, v.context), v.state = v.__s, null != v.getChildContext && (t = s(s({}, t), v.getChildContext())), h || null == v.getSnapshotBeforeUpdate || (w = v.getSnapshotBeforeUpdate(y, _)), A = null != a && a.type == p && null == a.key ? a.props.children : a, g(l, Array.isArray(A) ? A : [A], u, i, t, o, r, f, e, c), v.base = u.__e, v.__h.length && f.push(v), k && (v.__E = v.__ = null), v.__e = !1;\n    } else null == r && u.__v === i.__v ? (u.__k = i.__k, u.__e = i.__e) : u.__e = j(i.__e, u, i, t, o, r, f, c);\n\n    (a = n.diffed) && a(u);\n  } catch (l) {\n    u.__v = null, n.__e(l, u, i);\n  }\n\n  return u.__e;\n}\n\nfunction $(l, u) {\n  n.__c && n.__c(u, l), l.some(function (u) {\n    try {\n      l = u.__h, u.__h = [], l.some(function (n) {\n        n.call(u);\n      });\n    } catch (l) {\n      n.__e(l, u.__v);\n    }\n  });\n}\n\nfunction j(n, l, u, i, t, o, r, c) {\n  var s,\n      a,\n      v,\n      h,\n      y,\n      p = u.props,\n      d = l.props;\n  if (t = \"svg\" === l.type || t, null != o) for (s = 0; s < o.length; s++) if (null != (a = o[s]) && ((null === l.type ? 3 === a.nodeType : a.localName === l.type) || n == a)) {\n    n = a, o[s] = null;\n    break;\n  }\n\n  if (null == n) {\n    if (null === l.type) return document.createTextNode(d);\n    n = t ? document.createElementNS(\"http://www.w3.org/2000/svg\", l.type) : document.createElement(l.type, d.is && {\n      is: d.is\n    }), o = null, c = !1;\n  }\n\n  if (null === l.type) p !== d && n.data !== d && (n.data = d);else {\n    if (null != o && (o = e.slice.call(n.childNodes)), v = (p = u.props || f).dangerouslySetInnerHTML, h = d.dangerouslySetInnerHTML, !c) {\n      if (null != o) for (p = {}, y = 0; y < n.attributes.length; y++) p[n.attributes[y].name] = n.attributes[y].value;\n      (h || v) && (h && v && h.__html == v.__html || (n.innerHTML = h && h.__html || \"\"));\n    }\n\n    A(n, d, p, t, c), h ? l.__k = [] : (s = l.props.children, g(n, Array.isArray(s) ? s : [s], l, u, i, \"foreignObject\" !== l.type && t, o, r, f, c)), c || (\"value\" in d && void 0 !== (s = d.value) && s !== n.value && C(n, \"value\", s, p.value, !1), \"checked\" in d && void 0 !== (s = d.checked) && s !== n.checked && C(n, \"checked\", s, p.checked, !1));\n  }\n  return n;\n}\n\nfunction H(l, u, i) {\n  try {\n    \"function\" == typeof l ? l(u) : l.current = u;\n  } catch (l) {\n    n.__e(l, i);\n  }\n}\n\nfunction I(l, u, i) {\n  var t, o, r;\n\n  if (n.unmount && n.unmount(l), (t = l.ref) && (t.current && t.current !== l.__e || H(t, null, u)), i || \"function\" == typeof l.type || (i = null != (o = l.__e)), l.__e = l.__d = void 0, null != (t = l.__c)) {\n    if (t.componentWillUnmount) try {\n      t.componentWillUnmount();\n    } catch (l) {\n      n.__e(l, u);\n    }\n    t.base = t.__P = null;\n  }\n\n  if (t = l.__k) for (r = 0; r < t.length; r++) t[r] && I(t[r], u, i);\n  null != o && a(o);\n}\n\nfunction L(n, l, u) {\n  return this.constructor(n, u);\n}\n\nfunction M(l, u, i) {\n  var t, r, c;\n  n.__ && n.__(l, u), r = (t = i === o) ? null : i && i.__k || u.__k, l = v(p, null, [l]), c = [], T(u, (t ? u : i || u).__k = l, r || f, f, void 0 !== u.ownerSVGElement, i && !t ? [i] : r ? null : u.childNodes.length ? e.slice.call(u.childNodes) : null, c, i || f, t), $(c, l);\n}\n\nn = {\n  __e: function (n, l) {\n    for (var u, i; l = l.__;) if ((u = l.__c) && !u.__) try {\n      if (u.constructor && null != u.constructor.getDerivedStateFromError && (i = !0, u.setState(u.constructor.getDerivedStateFromError(n))), null != u.componentDidCatch && (i = !0, u.componentDidCatch(n)), i) return k(u.__E = u);\n    } catch (l) {\n      n = l;\n    }\n\n    throw n;\n  }\n}, d.prototype.setState = function (n, l) {\n  var u;\n  u = null != this.__s && this.__s !== this.state ? this.__s : this.__s = s({}, this.state), \"function\" == typeof n && (n = n(s({}, u), this.props)), n && s(u, n), null != n && this.__v && (l && this.__h.push(l), k(this));\n}, d.prototype.forceUpdate = function (n) {\n  this.__v && (this.__e = !0, n && this.__h.push(n), k(this));\n}, d.prototype.render = p, u = [], i = \"function\" == typeof Promise ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout, m.__r = 0, o = f, r = 0;\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar StateSelector =\n/** @class */\nfunction (_super) {\n  __extends(StateSelector, _super);\n\n  function StateSelector() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      current: null,\n      states: [],\n      deregisterFn: null\n    };\n\n    _this.selectState = function (event) {\n      var $state = _this.props.router.stateService;\n      var to = event.target.value;\n      if (to) $state.go(to);\n    };\n\n    return _this;\n  }\n\n  StateSelector.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var router = this.props.router;\n\n    var updateStates = function () {\n      return _this.setState({\n        states: router.stateRegistry.get().map(function (state) {\n          return state.name;\n        })\n      });\n    };\n\n    var updateCurrent = function (trans) {\n      return _this.setState({\n        current: trans.to().name\n      });\n    };\n\n    if (router.stateRegistry.onStatesChanged) {\n      this.deregisterStateListenerFn = router.stateRegistry.onStatesChanged(updateStates);\n    }\n\n    var deregisterFn = router.transitionService.onSuccess({}, updateCurrent);\n    this.setState({\n      current: router.globals.current.name,\n      states: [],\n      deregisterFn: deregisterFn\n    });\n    updateStates();\n  };\n\n  StateSelector.prototype.componentWillUnmount = function () {\n    if (this.state.deregisterFn) {\n      this.state.deregisterFn();\n    }\n\n    if (this.deregisterStateListenerFn) {\n      this.deregisterStateListenerFn();\n    }\n  };\n\n  StateSelector.prototype.render = function () {\n    return v(\"select\", {\n      value: this.state.current || '',\n      onChange: this.selectState,\n      style: {\n        maxWidth: 120\n      }\n    }, v(\"option\", {\n      value: \"\"\n    }, \"Choose a state\"), this.state.states.map(function (state) {\n      return v(\"option\", {\n        key: state,\n        value: state\n      }, state);\n    }));\n  };\n\n  return StateSelector;\n}(d);\n\nvar hasClass = function (classname) {\n  return function (el) {\n    return !!new RegExp(\"\\\\b\" + classname + \"\\\\b\").exec(el.className);\n  };\n};\n\nvar addClass = function (classname) {\n  return function (el) {\n    return el.className = el.className + ' ' + classname;\n  };\n};\n\nvar removeClass = function (classname) {\n  return function (el) {\n    return el.className = el.className.replace(new RegExp(\"\\\\b\" + classname + \"\\\\b\", 'g'), '');\n  };\n};\n\nvar toggleClass = function (classname) {\n  return function (el) {\n    if (hasClass(classname)(el)) removeClass(classname)(el);else addClass(classname)(el);\n  };\n};\n\nvar moveElement = function (elementToMove) {\n  return function _moveElement(elementBeingDragged, event, details) {\n    var initialClientX = details.initialClientX,\n        initialClientY = details.initialClientY,\n        lastClientX = details.lastClientX,\n        lastClientY = details.lastClientY,\n        newClientX = details.newClientX,\n        newClientY = details.newClientY;\n    var el = elementToMove;\n    var bounds = el.getBoundingClientRect();\n    var left = bounds.left,\n        top = bounds.top;\n    var dx = newClientX - lastClientX;\n    var dy = newClientY - lastClientY;\n    el.style.right = 'auto';\n    el.style.bottom = 'auto';\n    el.style.left = left + dx + 'px';\n    el.style.top = top + dy + 'px';\n  };\n};\n\nvar dragActions = {\n  move: moveElement\n};\n\nfunction draggable(el, callback) {\n  var isDragging = false;\n  var initialClientX = 0,\n      initialClientY = 0;\n  var lastClientX = 0,\n      lastClientY = 0;\n\n  var mouseDownListener = function (e) {\n    isDragging = true;\n    lastClientX = initialClientX = e.clientX;\n    lastClientY = initialClientY = e.clientY;\n\n    var dragListener = function (e) {\n      if (!isDragging) return;\n      e.preventDefault();\n      var newClientX = e.clientX,\n          newClientY = e.clientY;\n      callback(el, e, {\n        initialClientX: initialClientX,\n        initialClientY: initialClientY,\n        lastClientX: lastClientX,\n        lastClientY: lastClientY,\n        newClientX: newClientX,\n        newClientY: newClientY\n      });\n      lastClientX = newClientX;\n      lastClientY = newClientY;\n    };\n\n    var doneDragging = function (e) {\n      isDragging = false;\n      document.removeEventListener('mousemove', dragListener);\n      document.removeEventListener('mouseup', doneDragging);\n    };\n\n    document.addEventListener('mousemove', dragListener);\n    document.addEventListener('mouseup', doneDragging);\n  };\n\n  addClass('draggable')(el);\n  el.addEventListener('mousedown', mouseDownListener);\n  return function () {\n    return el.removeEventListener('mousedown', mouseDownListener);\n  };\n}\n\nvar StateNode =\n/** @class */\nfunction (_super) {\n  __extends(StateNode, _super);\n\n  function StateNode() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.goTimeout = null;\n\n    _this.handleCollapseClicked = function () {\n      clearTimeout(_this.goTimeout);\n      _this.props.node._collapsed = !_this.props.node._collapsed;\n\n      _this.props.doLayout();\n    };\n\n    _this.handleGoClicked = function () {\n      clearTimeout(_this.goTimeout);\n      var stateName = _this.props.node.name;\n      stateName = stateName.replace(/\\.\\*\\*$/, '');\n      _this.goTimeout = setTimeout(function () {\n        return _this.props.router.stateService.go(stateName);\n      }, 200);\n    };\n\n    return _this;\n  }\n\n  StateNode.prototype.render = function () {\n    var renderer = this.props.renderer;\n    var _a = this.props,\n        node = _a.node,\n        x = _a.x,\n        y = _a.y,\n        nodeOptions = _a.nodeOptions;\n    var baseRadius = renderer.baseRadius,\n        baseFontSize = renderer.baseFontSize,\n        baseNodeStrokeWidth = renderer.baseNodeStrokeWidth,\n        zoom = renderer.zoom;\n    var r = baseRadius * zoom;\n    var fontSize = baseFontSize * zoom;\n    var nodeStrokeWidth = baseNodeStrokeWidth * (node.entered ? 1.5 : 1) * zoom;\n    var defaultClasses = ['entered', 'retained', 'exited', 'active', 'inactive', 'future', 'highlight', 'collapsed'].filter(function (clazz) {\n      return node[clazz];\n    }).join(' ');\n    var nodeClasses = nodeOptions && nodeOptions.classes ? nodeOptions.classes(node) : '';\n    var circleClasses = defaultClasses + ' ' + nodeClasses;\n    var descendents = node.collapsed ? node.totalDescendents : 0;\n    return v(\"g\", {\n      transform: \"translate(\" + x + \", \" + y + \")\",\n      onClick: this.handleGoClicked,\n      onDblClick: this.handleCollapseClicked\n    }, v(\"circle\", {\n      className: circleClasses,\n      \"stroke-width\": nodeStrokeWidth,\n      r: r\n    }), !node.collapsed ? '' : v(\"text\", {\n      className: \"label\",\n      \"text-anchor\": \"middle\",\n      \"font-size\": fontSize * (descendents < 10 ? 1.0 : 0.8)\n    }, \"(\", descendents, \")\"), renderer.labelRenderFn(x, y, node, nodeOptions, renderer), v(\"text\", {\n      className: \"label\",\n      \"text-anchor\": \"middle\",\n      \"font-size\": fontSize,\n      transform: \"translate(0, \" + r * 2 + \")\"\n    }, node.label));\n  };\n\n  return StateNode;\n}(d);\n/* ============================================================\n * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/\n *\n * Open source under the BSD License.\n *\n * Copyright © 2008 George McGinley Smith\n * All rights reserved.\n * https://raw.github.com/danro/jquery-easing/master/LICENSE\n * ======================================================== */\n// prettier-ignore\n\n\nvar easing = {\n  // time, begin, change, duration\n  easeInOutQuad: function (t, b, c, d) {\n    if ((t /= d / 2) < 1) return c / 2 * t * t + b;\n    return -c / 2 * (--t * (t - 2) - 1) + b;\n  },\n  easeInOutCubic: function (t, b, c, d) {\n    if ((t /= d / 2) < 1) return c / 2 * t * t * t + b;\n    return c / 2 * ((t -= 2) * t * t + 2) + b;\n  },\n  easeInOutQuart: function (t, b, c, d) {\n    if ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;\n    return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\n  },\n  easeInOutQuint: function (t, b, c, d) {\n    if ((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b;\n    return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n  },\n  easeInOutSine: function (t, b, c, d) {\n    return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n  },\n  easeInOutExpo: function (t, b, c, d) {\n    if (t == 0) return b;\n    if (t == d) return b + c;\n    if ((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n    return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n  },\n  easeInOutCirc: function (t, b, c, d) {\n    if ((t /= d / 2) < 1) return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n    return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n  },\n  easeInElastic: function (t, b, c, d) {\n    var s = 1.70158;\n    var p = 0;\n    var a = c;\n    if (t == 0) return b;\n    if ((t /= d) == 1) return b + c;\n    if (!p) p = d * .3;\n\n    if (a < Math.abs(c)) {\n      a = c;\n      var s = p / 4;\n    } else var s = p / (2 * Math.PI) * Math.asin(c / a);\n\n    return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n  },\n  easeOutElastic: function (t, b, c, d) {\n    var s = 1.70158;\n    var p = 0;\n    var a = c;\n    if (t == 0) return b;\n    if ((t /= d) == 1) return b + c;\n    if (!p) p = d * .3;\n\n    if (a < Math.abs(c)) {\n      a = c;\n      var s = p / 4;\n    } else var s = p / (2 * Math.PI) * Math.asin(c / a);\n\n    return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n  },\n  easeInOutElastic: function (t, b, c, d) {\n    var s = 1.70158;\n    var p = 0;\n    var a = c;\n    if (t == 0) return b;\n    if ((t /= d / 2) == 2) return b + c;\n    if (!p) p = d * (.3 * 1.5);\n\n    if (a < Math.abs(c)) {\n      a = c;\n      var s = p / 4;\n    } else var s = p / (2 * Math.PI) * Math.asin(c / a);\n\n    if (t < 1) return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n    return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;\n  },\n  easeInOutBack: function (t, b, c, d, s) {\n    if (s == undefined) s = 1.70158;\n    if ((t /= d / 2) < 1) return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n    return c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n  }\n};\n\nfunction define(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nfunction extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n\n  for (var key in definition) prototype[key] = definition[key];\n\n  return prototype;\n}\n\nfunction Color() {}\n\nvar darker = 0.7;\nvar brighter = 1 / darker;\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\ndefine(Color, color, {\n  copy: function (channels) {\n    return Object.assign(new this.constructor(), this, channels);\n  },\n  displayable: function () {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex,\n  // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nfunction color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n  : l === 3 ? new Rgb(m >> 8 & 0xf | m >> 4 & 0xf0, m >> 4 & 0xf | m & 0xf0, (m & 0xf) << 4 | m & 0xf, 1) // #f00\n  : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n  : l === 4 ? rgba(m >> 12 & 0xf | m >> 8 & 0xf0, m >> 8 & 0xf | m >> 4 & 0xf0, m >> 4 & 0xf | m & 0xf0, ((m & 0xf) << 4 | m & 0xf) / 0xff) // #f000\n  : null // invalid hex\n  ) : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n  : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n  : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n  : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n  : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n  : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n  : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n  : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0) : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nfunction rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb();\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nfunction rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nfunction Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function (k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function (k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function () {\n    return this;\n  },\n  displayable: function () {\n    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;\n  },\n  hex: rgb_formatHex,\n  // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity;\n  a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\") + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \" + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \" + Math.max(0, Math.min(255, Math.round(this.b) || 0)) + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;else if (l <= 0 || l >= 1) h = s = NaN;else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nfunction hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl();\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;else if (g === max) h = (b - r) / s + 2;else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n\n  return new Hsl(h, s, l, o.opacity);\n}\n\nfunction hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function (k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function (k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function () {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2), hsl2rgb(h, m1, m2), hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2), this.opacity);\n  },\n  displayable: function () {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;\n  },\n  formatHsl: function () {\n    var a = this.opacity;\n    a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\") + (this.h || 0) + \", \" + (this.s || 0) * 100 + \"%, \" + (this.l || 0) * 100 + \"%\" + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n/* From FvD 13.37, CSS Color Module Level 3 */\n\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60 : h < 180 ? m2 : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60 : m1) * 255;\n}\n\nfunction constant(x) {\n  return function () {\n    return x;\n  };\n}\n\nfunction linear(a, d) {\n  return function (t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function (t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nfunction gamma(y) {\n  return (y = +y) === 1 ? nogamma : function (a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nfunction nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n\nvar rgb$1 = function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb$1(start, end) {\n    var r = color((start = rgb(start)).r, (end = rgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function (t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb$1.gamma = rgbGamma;\n  return rgb$1;\n}(1);\n\nfunction numberArray(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function (t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n\n    return c;\n  };\n}\n\nfunction isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n\nfunction interpolateArray(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nfunction genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function (t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n\n    return c;\n  };\n}\n\nfunction date(a, b) {\n  var d = new Date();\n  return a = +a, b = +b, function (t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n\nfunction number(a, b) {\n  return a = +a, b = +b, function (t) {\n    return a * (1 - t) + b * t;\n  };\n}\n\nfunction object(a, b) {\n  var i = {},\n      c = {},\n      k;\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function (t) {\n    for (k in i) c[k] = i[k](t);\n\n    return c;\n  };\n}\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function () {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function (t) {\n    return b(t) + \"\";\n  };\n}\n\nfunction string(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0,\n      // scan index for next number in b\n  am,\n      // current match in a\n  bm,\n      // current match in b\n  bs,\n      // string preceding current number in b, if any\n  i = -1,\n      // index in s\n  s = [],\n      // string constants and placeholders\n  q = []; // number interpolators\n  // Coerce inputs to strings.\n\n  a = a + \"\", b = b + \"\"; // Interpolate pairs of numbers in a & b.\n\n  while ((am = reA.exec(a)) && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) {\n      // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n\n    if ((am = am[0]) === (bm = bm[0])) {\n      // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else {\n      // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({\n        i: i,\n        x: number(am, bm)\n      });\n    }\n\n    bi = reB.lastIndex;\n  } // Add remains of b.\n\n\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  } // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n\n\n  return s.length < 2 ? q[0] ? one(q[0].x) : zero(b) : (b = q.length, function (t) {\n    for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n\n    return s.join(\"\");\n  });\n}\n\nfunction value(a, b) {\n  var t = typeof b,\n      c;\n  return b == null || t === \"boolean\" ? constant(b) : (t === \"number\" ? number : t === \"string\" ? (c = color(b)) ? (b = c, rgb$1) : string : b instanceof color ? rgb$1 : b instanceof Date ? date : isNumberArray(b) ? numberArray : Array.isArray(b) ? genericArray : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object : number)(a, b);\n} // https://github.com/resin-io/triangular.js\n\n/** This animation code was taken from trangular.js, and is used to interpolate 2 arrays of values using an easing fn */\n\n\nfunction animatePath(newValue, oldValue, duration, updateFrame, finishFn, easeFn) {\n  if (finishFn === void 0) {\n    finishFn = function () {};\n  }\n\n  if (easeFn === void 0) {\n    easeFn = easing.easeOutElastic;\n  }\n\n  var start = null,\n      interpolate = interpolateArray(oldValue, newValue);\n\n  var step = function (now) {\n    if (duration === -1) return finishFn();\n    if (start == null) start = now;\n    var progress = now - start,\n        percent = 1;\n\n    if (progress < duration) {\n      requestAnimationFrame(step);\n      percent = easeFn(progress, 0, 1, duration);\n    }\n\n    updateFrame(interpolate(percent));\n  };\n\n  requestAnimationFrame(step);\n  return function cancel() {\n    duration = -1;\n  };\n}\n\nfunction defaultSeparation(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n}\n\nfunction meanX(children) {\n  return children.reduce(meanXReduce, 0) / children.length;\n}\n\nfunction meanXReduce(x, c) {\n  return x + c.x;\n}\n\nfunction maxY(children) {\n  return 1 + children.reduce(maxYReduce, 0);\n}\n\nfunction maxYReduce(y, c) {\n  return Math.max(y, c.y);\n}\n\nfunction leafLeft(node) {\n  var children;\n\n  while (children = node.children) node = children[0];\n\n  return node;\n}\n\nfunction leafRight(node) {\n  var children;\n\n  while (children = node.children) node = children[children.length - 1];\n\n  return node;\n}\n\nfunction d3cluster() {\n  var separation = defaultSeparation,\n      dx = 1,\n      dy = 1,\n      nodeSize = false;\n\n  function cluster(root) {\n    var previousNode,\n        x = 0; // First walk, computing the initial x & y values.\n\n    root.eachAfter(function (node) {\n      var children = node.children;\n\n      if (children) {\n        node.x = meanX(children);\n        node.y = maxY(children);\n      } else {\n        node.x = previousNode ? x += separation(node, previousNode) : 0;\n        node.y = 0;\n        previousNode = node;\n      }\n    });\n    var left = leafLeft(root),\n        right = leafRight(root),\n        x0 = left.x - separation(left, right) / 2,\n        x1 = right.x + separation(right, left) / 2; // Second walk, normalizing x & y to the desired size.\n\n    return root.eachAfter(nodeSize ? function (node) {\n      node.x = (node.x - root.x) * dx;\n      node.y = (root.y - node.y) * dy;\n    } : function (node) {\n      node.x = (node.x - x0) / (x1 - x0) * dx;\n      node.y = (1 - (root.y ? node.y / root.y : 1)) * dy;\n    });\n  }\n\n  cluster.separation = function (x) {\n    return arguments.length ? (separation = x, cluster) : separation;\n  };\n\n  cluster.size = function (x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], cluster) : nodeSize ? null : [dx, dy];\n  };\n\n  cluster.nodeSize = function (x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], cluster) : nodeSize ? [dx, dy] : null;\n  };\n\n  return cluster;\n}\n\nfunction count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nfunction node_count() {\n  return this.eachAfter(count);\n}\n\nfunction node_each(callback, that) {\n  let index = -1;\n\n  for (const node of this) {\n    callback.call(that, node, ++index, this);\n  }\n\n  return this;\n}\n\nfunction node_eachBefore(callback, that) {\n  var node = this,\n      nodes = [node],\n      children,\n      i,\n      index = -1;\n\n  while (node = nodes.pop()) {\n    callback.call(that, node, ++index, this);\n\n    if (children = node.children) {\n      for (i = children.length - 1; i >= 0; --i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n\n  return this;\n}\n\nfunction node_eachAfter(callback, that) {\n  var node = this,\n      nodes = [node],\n      next = [],\n      children,\n      i,\n      n,\n      index = -1;\n\n  while (node = nodes.pop()) {\n    next.push(node);\n\n    if (children = node.children) {\n      for (i = 0, n = children.length; i < n; ++i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n\n  while (node = next.pop()) {\n    callback.call(that, node, ++index, this);\n  }\n\n  return this;\n}\n\nfunction node_find(callback, that) {\n  let index = -1;\n\n  for (const node of this) {\n    if (callback.call(that, node, ++index, this)) {\n      return node;\n    }\n  }\n}\n\nfunction node_sum(value) {\n  return this.eachAfter(function (node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n\n    while (--i >= 0) sum += children[i].value;\n\n    node.value = sum;\n  });\n}\n\nfunction node_sort(compare) {\n  return this.eachBefore(function (node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n\nfunction node_path(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n\n  var k = nodes.length;\n\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n\n  return c;\n}\n\nfunction node_ancestors() {\n  var node = this,\n      nodes = [node];\n\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n\n  return nodes;\n}\n\nfunction node_descendants() {\n  return Array.from(this);\n}\n\nfunction node_leaves() {\n  var leaves = [];\n  this.eachBefore(function (node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n\nfunction node_links() {\n  var root = this,\n      links = [];\n  root.each(function (node) {\n    if (node !== root) {\n      // Don’t include the root’s parent, if any.\n      links.push({\n        source: node.parent,\n        target: node\n      });\n    }\n  });\n  return links;\n}\n\nfunction* node_iterator() {\n  var node = this,\n      current,\n      next = [node],\n      children,\n      i,\n      n;\n\n  do {\n    current = next.reverse(), next = [];\n\n    while (node = current.pop()) {\n      yield node;\n\n      if (children = node.children) {\n        for (i = 0, n = children.length; i < n; ++i) {\n          next.push(children[i]);\n        }\n      }\n    }\n  } while (next.length);\n}\n\nfunction hierarchy(data, children) {\n  if (data instanceof Map) {\n    data = [undefined, data];\n    if (children === undefined) children = mapChildren;\n  } else if (children === undefined) {\n    children = objectChildren;\n  }\n\n  var root = new Node(data),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if ((childs = children(node.data)) && (n = (childs = Array.from(childs)).length)) {\n      node.children = childs;\n\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = childs[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction objectChildren(d) {\n  return d.children;\n}\n\nfunction mapChildren(d) {\n  return Array.isArray(d) ? d[1] : null;\n}\n\nfunction copyData(node) {\n  if (node.data.value !== undefined) node.value = node.data.value;\n  node.data = node.data.data;\n}\n\nfunction computeHeight(node) {\n  var height = 0;\n\n  do node.height = height; while ((node = node.parent) && node.height < ++height);\n}\n\nfunction Node(data) {\n  this.data = data;\n  this.depth = this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  find: node_find,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy,\n  [Symbol.iterator]: node_iterator\n};\n\nfunction defaultSeparation$1(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n} // function radialSeparation(a, b) {\n//   return (a.parent === b.parent ? 1 : 2) / a.depth;\n// }\n// This function is used to traverse the left contour of a subtree (or\n// subforest). It returns the successor of v on this contour. This successor is\n// either given by the leftmost child of v or by the thread of v. The function\n// returns null if and only if v is on the highest level of its subtree.\n\n\nfunction nextLeft(v) {\n  var children = v.children;\n  return children ? children[0] : v.t;\n} // This function works analogously to nextLeft.\n\n\nfunction nextRight(v) {\n  var children = v.children;\n  return children ? children[children.length - 1] : v.t;\n} // Shifts the current subtree rooted at w+. This is done by increasing\n// prelim(w+) and mod(w+) by shift.\n\n\nfunction moveSubtree(wm, wp, shift) {\n  var change = shift / (wp.i - wm.i);\n  wp.c -= change;\n  wp.s += shift;\n  wm.c += change;\n  wp.z += shift;\n  wp.m += shift;\n} // All other shifts, applied to the smaller subtrees between w- and w+, are\n// performed by this function. To prepare the shifts, we have to adjust\n// change(w+), shift(w+), and change(w-).\n\n\nfunction executeShifts(v) {\n  var shift = 0,\n      change = 0,\n      children = v.children,\n      i = children.length,\n      w;\n\n  while (--i >= 0) {\n    w = children[i];\n    w.z += shift;\n    w.m += shift;\n    shift += w.s + (change += w.c);\n  }\n} // If vi-’s ancestor is a sibling of v, returns vi-’s ancestor. Otherwise,\n// returns the specified (default) ancestor.\n\n\nfunction nextAncestor(vim, v, ancestor) {\n  return vim.a.parent === v.parent ? vim.a : ancestor;\n}\n\nfunction TreeNode(node, i) {\n  this._ = node;\n  this.parent = null;\n  this.children = null;\n  this.A = null; // default ancestor\n\n  this.a = this; // ancestor\n\n  this.z = 0; // prelim\n\n  this.m = 0; // mod\n\n  this.c = 0; // change\n\n  this.s = 0; // shift\n\n  this.t = null; // thread\n\n  this.i = i; // number\n}\n\nTreeNode.prototype = Object.create(Node.prototype);\n\nfunction treeRoot(root) {\n  var tree = new TreeNode(root, 0),\n      node,\n      nodes = [tree],\n      child,\n      children,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if (children = node._.children) {\n      node.children = new Array(n = children.length);\n\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new TreeNode(children[i], i));\n        child.parent = node;\n      }\n    }\n  }\n\n  (tree.parent = new TreeNode(null, 0)).children = [tree];\n  return tree;\n} // Node-link tree diagram using the Reingold-Tilford \"tidy\" algorithm\n\n\nfunction d3tree() {\n  var separation = defaultSeparation$1,\n      dx = 1,\n      dy = 1,\n      nodeSize = null;\n\n  function tree(root) {\n    var t = treeRoot(root); // Compute the layout using Buchheim et al.’s algorithm.\n\n    t.eachAfter(firstWalk), t.parent.m = -t.z;\n    t.eachBefore(secondWalk); // If a fixed node size is specified, scale x and y.\n\n    if (nodeSize) root.eachBefore(sizeNode); // If a fixed tree size is specified, scale x and y based on the extent.\n    // Compute the left-most, right-most, and depth-most nodes for extents.\n    else {\n        var left = root,\n            right = root,\n            bottom = root;\n        root.eachBefore(function (node) {\n          if (node.x < left.x) left = node;\n          if (node.x > right.x) right = node;\n          if (node.depth > bottom.depth) bottom = node;\n        });\n        var s = left === right ? 1 : separation(left, right) / 2,\n            tx = s - left.x,\n            kx = dx / (right.x + s + tx),\n            ky = dy / (bottom.depth || 1);\n        root.eachBefore(function (node) {\n          node.x = (node.x + tx) * kx;\n          node.y = node.depth * ky;\n        });\n      }\n    return root;\n  } // Computes a preliminary x-coordinate for v. Before that, FIRST WALK is\n  // applied recursively to the children of v, as well as the function\n  // APPORTION. After spacing out the children by calling EXECUTE SHIFTS, the\n  // node v is placed to the midpoint of its outermost children.\n\n\n  function firstWalk(v) {\n    var children = v.children,\n        siblings = v.parent.children,\n        w = v.i ? siblings[v.i - 1] : null;\n\n    if (children) {\n      executeShifts(v);\n      var midpoint = (children[0].z + children[children.length - 1].z) / 2;\n\n      if (w) {\n        v.z = w.z + separation(v._, w._);\n        v.m = v.z - midpoint;\n      } else {\n        v.z = midpoint;\n      }\n    } else if (w) {\n      v.z = w.z + separation(v._, w._);\n    }\n\n    v.parent.A = apportion(v, w, v.parent.A || siblings[0]);\n  } // Computes all real x-coordinates by summing up the modifiers recursively.\n\n\n  function secondWalk(v) {\n    v._.x = v.z + v.parent.m;\n    v.m += v.parent.m;\n  } // The core of the algorithm. Here, a new subtree is combined with the\n  // previous subtrees. Threads are used to traverse the inside and outside\n  // contours of the left and right subtree up to the highest common level. The\n  // vertices used for the traversals are vi+, vi-, vo-, and vo+, where the\n  // superscript o means outside and i means inside, the subscript - means left\n  // subtree and + means right subtree. For summing up the modifiers along the\n  // contour, we use respective variables si+, si-, so-, and so+. Whenever two\n  // nodes of the inside contours conflict, we compute the left one of the\n  // greatest uncommon ancestors using the function ANCESTOR and call MOVE\n  // SUBTREE to shift the subtree and prepare the shifts of smaller subtrees.\n  // Finally, we add a new thread (if necessary).\n\n\n  function apportion(v, w, ancestor) {\n    if (w) {\n      var vip = v,\n          vop = v,\n          vim = w,\n          vom = vip.parent.children[0],\n          sip = vip.m,\n          sop = vop.m,\n          sim = vim.m,\n          som = vom.m,\n          shift;\n\n      while (vim = nextRight(vim), vip = nextLeft(vip), vim && vip) {\n        vom = nextLeft(vom);\n        vop = nextRight(vop);\n        vop.a = v;\n        shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);\n\n        if (shift > 0) {\n          moveSubtree(nextAncestor(vim, v, ancestor), v, shift);\n          sip += shift;\n          sop += shift;\n        }\n\n        sim += vim.m;\n        sip += vip.m;\n        som += vom.m;\n        sop += vop.m;\n      }\n\n      if (vim && !nextRight(vop)) {\n        vop.t = vim;\n        vop.m += sim - sop;\n      }\n\n      if (vip && !nextLeft(vom)) {\n        vom.t = vip;\n        vom.m += sip - som;\n        ancestor = v;\n      }\n    }\n\n    return ancestor;\n  }\n\n  function sizeNode(node) {\n    node.x *= dx;\n    node.y = node.depth * dy;\n  }\n\n  tree.separation = function (x) {\n    return arguments.length ? (separation = x, tree) : separation;\n  };\n\n  tree.size = function (x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], tree) : nodeSize ? null : [dx, dy];\n  };\n\n  tree.nodeSize = function (x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], tree) : nodeSize ? [dx, dy] : null;\n  };\n\n  return tree;\n}\n\nvar RENDERER_PRESETS = {\n  Tree: {\n    layoutFn: TREE_LAYOUT,\n    sortNodesFn: TOP_TO_BOTTOM_SORT,\n    labelRenderFn: SLANTED_TEXT,\n    edgeRenderFn: TREE_EDGE\n  },\n  Cluster: {\n    layoutFn: CLUSTER_LAYOUT,\n    sortNodesFn: TOP_TO_BOTTOM_SORT,\n    labelRenderFn: SLANTED_TEXT,\n    edgeRenderFn: TREE_EDGE\n  },\n  Radial: {\n    layoutFn: RADIAL_LAYOUT,\n    sortNodesFn: BOTTOM_TO_TOP_SORT,\n    labelRenderFn: RADIAL_TEXT,\n    edgeRenderFn: RADIAL_EDGE\n  }\n};\nvar tree = RENDERER_PRESETS.Tree;\nvar DEFAULT_RENDERER = {\n  baseRadius: 10,\n  baseFontSize: 12,\n  baseStrokeWidth: 2,\n  baseNodeStrokeWidth: 2,\n  zoom: 1.0,\n  layoutFn: tree.layoutFn,\n  sortNodesFn: tree.sortNodesFn,\n  labelRenderFn: tree.labelRenderFn,\n  edgeRenderFn: tree.edgeRenderFn\n}; ///////////////////////////////////////////\n// NODE RENDER ORDER\n///////////////////////////////////////////\n\nfunction BOTTOM_TO_TOP_SORT(a, b) {\n  var b2t = b.layoutY - a.layoutY; // bottom to top\n\n  if (b2t !== 0) return b2t;\n  var l2r = a.layoutX - b.layoutX; // left to right\n\n  return l2r;\n}\n\nfunction TOP_TO_BOTTOM_SORT(a, b) {\n  var t2b = a.layoutY - b.layoutY; // top to bottom\n\n  if (t2b !== 0) return t2b;\n  var l2r = a.layoutX - b.layoutX; // left to right\n\n  return l2r;\n} ///////////////////////////////////////////\n// LAYOUTS\n///////////////////////////////////////////\n\n\nfunction TREE_LAYOUT(rootNode) {\n  var root = hierarchy(rootNode);\n  var tree = d3tree();\n  return updateNodes(tree(root));\n}\n\nfunction CLUSTER_LAYOUT(rootNode) {\n  var root = hierarchy(rootNode);\n  var tree = d3cluster();\n  return updateNodes(tree(root));\n}\n/** For RADIAL_LAYOUT: projects x/y coords from a cluster layout to circular layout */\n\n\nfunction project(x, y) {\n  var angle = (x - 90) / 180 * Math.PI,\n      radius = y;\n  var CENTER = 0.5;\n  return {\n    x: CENTER + radius * Math.cos(angle),\n    y: CENTER + radius * Math.sin(angle)\n  };\n}\n\nfunction RADIAL_LAYOUT(rootNode) {\n  var root = hierarchy(rootNode);\n  var layout = d3cluster().size([360, 0.4]).separation(function (a, b) {\n    return (a.parent == b.parent ? 1 : 2) / a.depth;\n  });\n  var nodes = layout(root);\n  nodes.each(function (node) {\n    var projected = project(node.x, node.y);\n    var visNode = node.data;\n    visNode.layoutX = node.x;\n    visNode.layoutY = node.y;\n    visNode.x = projected.x;\n    visNode.y = projected.y;\n  });\n}\n/** Mutates each StateVisNode by copying the new x/y values from the d3 HierarchyPointNode structure */\n\n\nfunction updateNodes(nodes) {\n  nodes.each(function (node) {\n    node.data.layoutX = node.data.x = node.x;\n    node.data.layoutY = node.data.y = node.y;\n  });\n  return nodes;\n} ///////////////////////////////////////////\n// STATE NAME LABEL\n///////////////////////////////////////////\n\n\nfunction RADIAL_TEXT(x, y, node, nodeOptions, renderer) {\n  var baseFontSize = renderer.baseFontSize,\n      zoom = renderer.zoom;\n  var fontSize = baseFontSize * zoom;\n  var label = (nodeOptions === null || nodeOptions === void 0 ? void 0 : nodeOptions.label) ? nodeOptions.label(node, defaultLabel(node)) : defaultLabel(node);\n  var angle = node.layoutX || 0;\n  var textAnchor = angle < 180 === !!node.children ? 'start' : 'end';\n  var rotation = angle < 180 ? angle - 90 : angle + 90;\n  var translation = (textAnchor === 'start' ? 15 : -15) * zoom;\n  var transform = \"rotate(\" + rotation + \"),translate(\" + translation + \", 0)\";\n  return v(\"text\", {\n    className: \"name\",\n    \"text-anchor\": textAnchor,\n    transform: transform,\n    \"font-size\": fontSize\n  }, ' ', label, ' ');\n}\n\nfunction defaultLabel(node) {\n  var segments = node.name.split('.');\n  var name = segments.pop();\n  if (name == '**') name = segments.pop() + '.**';\n  return name;\n}\n\nfunction SLANTED_TEXT(x, y, node, nodeOptions, renderer) {\n  var baseFontSize = renderer.baseFontSize,\n      zoom = renderer.zoom;\n  var fontSize = baseFontSize * zoom;\n  var label = (nodeOptions === null || nodeOptions === void 0 ? void 0 : nodeOptions.label) ? nodeOptions.label(node, defaultLabel(node)) : defaultLabel(node);\n  var transform = \"rotate(-15),translate(0, \" + -15 * zoom + \")\";\n  return v(\"text\", {\n    className: \"name\",\n    \"text-anchor\": \"middle\",\n    transform: transform,\n    \"font-size\": fontSize\n  }, ' ', label, ' ');\n} ///////////////////////////////////////////\n// GRAPH EDGES\n///////////////////////////////////////////\n\n/** Straight line */\n\n\nfunction RADIAL_EDGE(node, renderer) {\n  var strokeWidth = renderer.baseStrokeWidth * renderer.zoom;\n\n  var makeLinkPath = function (node) {\n    var s = {\n      x: node.animX,\n      y: node.animY\n    }; // statevisnode\n\n    var p = {\n      x: node._parent.animX,\n      y: node._parent.animY\n    }; // parent\n\n    return 'M' + [s.x, s.y] + // + \"C\"  + [s.x, (s.y + p.y) / 2.5]\n    // + \" \"  + [p.x, (s.y + p.y) / 2.5]\n    ' ' + [p.x, p.y];\n  };\n\n  return v(\"path\", {\n    d: makeLinkPath(node),\n    \"stroke-width\": strokeWidth,\n    className: \"link\"\n  });\n}\n/** Bezier curve */\n\n\nfunction TREE_EDGE(node, renderer) {\n  var strokeWidth = renderer.baseStrokeWidth * renderer.zoom;\n\n  var makeLinkPath = function (node) {\n    var s = {\n      x: node.animX,\n      y: node.animY\n    }; // statevisnode\n\n    var p = {\n      x: node._parent.animX,\n      y: node._parent.animY\n    }; // parent\n\n    var yAvg = (s.y + p.y) / 2;\n    return \"M \" + s.x + \" \" + s.y + \" C \" + s.x + \" \" + yAvg + \", \" + p.x + \" \" + yAvg + \", \" + p.x + \" \" + p.y;\n  };\n\n  return v(\"path\", {\n    d: makeLinkPath(node),\n    \"stroke-width\": strokeWidth,\n    className: \"link\"\n  });\n}\n\nfunction createStateVisNode(state) {\n  var node = Object.create(state);\n  Object.defineProperty(node, 'visible', {\n    get: function () {\n      if (this.entered) return true;\n      var ancestorCollapsed = this._parent && (this._parent.collapsed || !this._parent.visible);\n      return !ancestorCollapsed;\n    }\n  });\n  Object.defineProperty(node, 'children', {\n    get: function () {\n      return this._children.filter(function (child) {\n        return child.visible;\n      });\n    }\n  });\n  Object.defineProperty(node, 'totalDescendents', {\n    get: function () {\n      return this._children.reduce(function (acc, child) {\n        return acc + child.totalDescendents;\n      }, this._children.length);\n    }\n  });\n  Object.defineProperty(node, 'collapsed', {\n    get: function () {\n      return !this.entered && this._collapsed && this._children.length;\n    }\n  });\n  return node;\n}\n\nvar resetMetadata = {\n  label: '',\n  highlight: false,\n  active: false,\n  future: false,\n  retained: false,\n  entered: false,\n  exited: false,\n  inactive: true\n};\n\nvar StateTree =\n/** @class */\nfunction (_super) {\n  __extends(StateTree, _super);\n\n  function StateTree() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      nodes: [],\n      layout: {}\n    };\n    _this.nodes = [];\n    _this.unmounted = false;\n\n    _this.cancelCurrentAnimation = function () {\n      return null;\n    };\n\n    _this.doLayoutAnimation = function () {\n      _this.cancelCurrentAnimation();\n\n      var nodes = _this.getNodes();\n\n      if (!nodes.length) return;\n      var rootNode = nodes.filter(function (state) {\n        return state.name === '';\n      })[0];\n\n      _this.props.renderer.layoutFn(rootNode); // Move all non-visible nodes to same x/y coords as the nearest visible parent\n\n\n      nodes.filter(function (node) {\n        return !node.visible;\n      }).forEach(function (node) {\n        var visibleAncestor = node._parent;\n\n        while (visibleAncestor && !visibleAncestor.visible) visibleAncestor = visibleAncestor._parent;\n\n        if (visibleAncestor) {\n          node.x = visibleAncestor.x;\n          node.y = visibleAncestor.y;\n        }\n      });\n\n      var dimensions = _this.dimensions(); // Transforms x coord from the tree layout to fit the viewport using scale/offset values\n\n\n      var transformX = function (xval) {\n        return xval * dimensions.scaleX + dimensions.offsetX;\n      }; // Transforms y coord from the tree layout to fit the viewport using scale/offset values\n\n\n      var transformY = function (yval) {\n        return yval * dimensions.scaleY + dimensions.offsetY;\n      };\n\n      var getCurrentCoords = function (node) {\n        return {\n          x: node.animX || _this.props.width / 2,\n          y: node.animY || _this.props.height / 2\n        };\n      }; // An array containing current x/y coords for all nodes\n      // [ x1, y1, x2, y2, x3, y3, x4, y4 ]\n\n\n      var currentCoords = nodes.map(getCurrentCoords).map(function (obj) {\n        return [obj.x, obj.y];\n      }).reduce(function (acc, arr) {\n        return acc.concat(arr);\n      }, []); // An array containing target x/y coords for all nodes\n      // [ x1', y1', x2', y2', x3', y3', x4', y4' ]\n\n      var targetCoords = nodes.map(function (node) {\n        return [transformX(node.x), transformY(node.y)];\n      }).reduce(function (acc, arr) {\n        return acc.concat(arr);\n      }, []); // xyValArray is an array containing x/y coords for all nodes,\n      // interpolated between currentCoords and targetCoords based on time\n      // [ x1'', y1'', x2'', y2'', x3'', y3'', x4'', y4'' ]\n\n      var animationFrame = function (xyValArray) {\n        var tupleCount = xyValArray.length / 2;\n\n        for (var i = 0; i < tupleCount && i < nodes.length; i++) {\n          var node = nodes[i];\n          node.animX = xyValArray[i * 2];\n          node.animY = xyValArray[i * 2 + 1];\n        }\n\n        _this.setState({\n          nodes: nodes\n        });\n      };\n\n      _this.cancelCurrentAnimation = animatePath(targetCoords, currentCoords, 500, animationFrame, function () {\n        return null;\n      }, easing.easeInOutExpo);\n    };\n\n    _this.nodeForState = function (nodes, state) {\n      return nodes.filter(function (node) {\n        return node.name === state.name;\n      })[0];\n    };\n\n    _this.updateStates = function () {\n      var router = _this.props.router;\n      var states = router.stateService.get().map(function (s) {\n        return s.$$state();\n      });\n\n      var known = _this.nodes.map(Object.getPrototypeOf);\n\n      var toAdd = states.filter(function (s) {\n        return known.indexOf(s) === -1;\n      });\n      var toDel = known.filter(function (s) {\n        return states.indexOf(s) === -1;\n      });\n\n      var nodes = _this.nodes = _this.nodes.slice();\n\n      if (toAdd.length || toDel.length) {\n        toAdd.map(function (s) {\n          return createStateVisNode(s);\n        }).forEach(function (n) {\n          return nodes.push(n);\n        });\n        toDel.map(function (del) {\n          return nodes.filter(function (node) {\n            return del.isPrototypeOf(node);\n          });\n        }).reduce(function (acc, x) {\n          return acc.concat(x);\n        }, []).forEach(function (node) {\n          return nodes.splice(nodes.indexOf(node), 1);\n        }); // Rebuild each node's children array\n\n        nodes.forEach(function (n) {\n          return n._children = [];\n        });\n        nodes.forEach(function (n) {\n          if (!n || !n.parent) return;\n\n          var parentNode = _this.nodeForState(nodes, n.parent);\n\n          if (!parentNode) return;\n\n          parentNode._children.push(n);\n\n          n._parent = parentNode;\n        });\n        nodes.forEach(function (n) {\n          return n.future = !!n.lazyLoad;\n        });\n      }\n\n      if (!_this.unmounted && !_this.deregisterStateListenerFn) {\n        // poll if ui-router version is 1.0.0-beta.1 or earlier\n        setTimeout(_this.updateStates, 1000);\n      }\n\n      _this.setState({\n        nodes: nodes\n      }, _this.doLayoutAnimation);\n    };\n\n    _this.updateNodes = function ($transition$) {\n      var nodes = _this.nodes.map(function (node) {\n        return Object.assign(node, resetMetadata);\n      });\n\n      nodes.forEach(function (n) {\n        return n.future = !!n.lazyLoad;\n      });\n\n      if ($transition$) {\n        var tc = $transition$.treeChanges();\n\n        var getNode = function (node) {\n          return _this.nodeForState(_this.nodes, node.state);\n        };\n\n        tc.retained.concat(tc.entering).map(getNode).filter(function (x) {\n          return x;\n        }).forEach(function (n) {\n          return n.entered = true;\n        });\n        tc.retained.map(getNode).filter(function (x) {\n          return x;\n        }).forEach(function (n) {\n          return n.retained = true;\n        });\n        tc.exiting.map(getNode).filter(function (x) {\n          return x;\n        }).forEach(function (n) {\n          return n.exited = true;\n        });\n        tc.to.slice(-1).map(getNode).filter(function (x) {\n          return x;\n        }).forEach(function (n) {\n          n.active = true;\n          n.label = 'active';\n        });\n      }\n\n      _this.setState({\n        nodes: _this.nodes\n      }, _this.doLayoutAnimation);\n    };\n\n    return _this;\n  }\n\n  StateTree.create = function (router, element, props) {\n    if (props === void 0) {\n      props = {};\n    }\n\n    if (!element) {\n      element = document.createElement('div');\n      element.id = 'uirStateTree';\n    }\n\n    var initialProps = __assign(__assign({}, props), {\n      router: router\n    });\n\n    var _render = function () {\n      document.body.appendChild(element);\n      M(v(StateTree, initialProps), element);\n    };\n\n    if (document.readyState === 'interactive' || document.readyState === 'complete') {\n      _render();\n    } else {\n      document.addEventListener('DOMContentLoaded', _render, false);\n    }\n\n    return element;\n  };\n\n  StateTree.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var registry = this.props.router.stateRegistry;\n    var $transitions = this.props.router.transitionService; // Register states changed listener\n\n    if (registry.onStatesChanged) {\n      this.deregisterStateListenerFn = registry.onStatesChanged(function () {\n        return _this.updateStates();\n      });\n    }\n\n    this.updateStates(); // Register onSuccess transition hook to toggle the SVG classes\n\n    this.deregisterHookFn = $transitions.onSuccess({}, function (trans) {\n      return _this.updateNodes(trans);\n    });\n    this.updateNodes();\n    var lastSuccessful = this.props.router.globals.successfulTransitions.peekTail();\n\n    if (lastSuccessful) {\n      this.updateNodes(lastSuccessful);\n    }\n\n    var pending = this.props.router.globals.transition;\n\n    if (pending) {\n      pending.promise.then(function () {\n        return _this.updateNodes(pending);\n      });\n    }\n  };\n\n  StateTree.prototype.componentWillReceiveProps = function () {\n    var nodes = this.state.nodes;\n    this.setState({\n      nodes: nodes\n    }, this.updateStates);\n  };\n\n  StateTree.prototype.dimensions = function () {\n    var radius = 15;\n    var offsetX = 0;\n    var offsetY = radius * 2;\n    var height = this.props.height || 500;\n    var width = this.props.width || 500;\n    var scaleX = width - offsetX * 2;\n    var scaleY = height - offsetY * 2;\n    return {\n      radius: radius,\n      offsetX: offsetX,\n      offsetY: offsetY,\n      scaleX: scaleX,\n      scaleY: scaleY\n    };\n  };\n\n  StateTree.prototype.componentWillUnmount = function () {\n    this.unmounted = true;\n    this.deregisterHookFn && this.deregisterHookFn();\n  };\n\n  StateTree.prototype.getNodes = function () {\n    return this.nodes.slice().sort(this.props.renderer.sortNodesFn);\n  };\n\n  StateTree.prototype.render = function () {\n    var _this = this;\n\n    var renderer = this.props.renderer;\n    var renderNodes = this.getNodes().filter(function (node) {\n      return node.visible && node.animX && node.animY;\n    });\n    return v(\"div\", {\n      className: \"statevis\"\n    }, v(\"svg\", {\n      width: this.props.width,\n      height: this.props.height\n    }, renderNodes.filter(function (node) {\n      return !!node.parent;\n    }).map(function (node) {\n      return renderer.edgeRenderFn(node, renderer);\n    }), renderNodes.map(function (node) {\n      return v(StateNode, {\n        key: node.name,\n        node: node,\n        router: _this.props.router,\n        nodeOptions: _this.props.nodeOptions,\n        renderer: _this.props.renderer,\n        doLayout: _this.doLayoutAnimation.bind(_this),\n        x: node.animX,\n        y: node.animY\n      });\n    })));\n  };\n\n  StateTree.defaultProps = {\n    height: 350,\n    width: 250,\n    renderer: DEFAULT_RENDERER\n  };\n  return StateTree;\n}(d);\n\nvar LayoutPrefs =\n/** @class */\nfunction (_super) {\n  __extends(LayoutPrefs, _super);\n\n  function LayoutPrefs() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      renderer: DEFAULT_RENDERER,\n      presetName: 'Tree'\n    };\n    return _this;\n  }\n\n  LayoutPrefs.prototype.componentDidMount = function () {\n    this.props.onRendererChange(this.state.renderer);\n  };\n\n  LayoutPrefs.prototype.handleZoom = function (event) {\n    var el = event.target;\n    var value = parseFloat(el['value']);\n\n    var renderer = __assign(__assign({}, this.state.renderer), {\n      zoom: value\n    });\n\n    this.setState({\n      renderer: renderer\n    });\n    this.props.onRendererChange(renderer);\n  };\n\n  LayoutPrefs.prototype.handleLayout = function (event) {\n    var presetName = event.target['value'];\n    var settings = RENDERER_PRESETS[presetName];\n\n    var renderer = __assign(__assign({}, this.state.renderer), settings);\n\n    this.setState({\n      renderer: renderer,\n      presetName: presetName\n    });\n    this.props.onRendererChange(renderer);\n  };\n\n  LayoutPrefs.prototype.render = function () {\n    return v(\"div\", {\n      className: \"uirStateVisLayoutPrefs\",\n      style: {\n        display: 'flex',\n        flexFlow: 'column nowrap'\n      },\n      onMouseDown: function (evt) {\n        return evt.stopPropagation();\n      }\n    }, v(\"div\", {\n      style: {\n        flex: '1 1 auto',\n        display: 'flex',\n        flexFlow: 'row nowrap',\n        alignItems: 'center'\n      }\n    }, v(\"div\", null, \"Layout:\"), v(\"select\", {\n      style: {\n        marginLeft: 'auto',\n        maxWidth: '100px'\n      },\n      onChange: this.handleLayout.bind(this),\n      value: this.state.presetName\n    }, Object.keys(RENDERER_PRESETS).map(function (preset) {\n      return v(\"option\", {\n        value: preset\n      }, preset);\n    }))), v(\"div\", {\n      style: {\n        flex: '1 1 auto',\n        display: 'flex',\n        flexFlow: 'row nowrap',\n        alignItems: 'center'\n      }\n    }, v(\"span\", null, \"Node size:\"), v(\"input\", {\n      style: {\n        marginLeft: 'auto'\n      },\n      value: '' + this.state.renderer.zoom,\n      type: \"range\",\n      min: \"0.3\",\n      max: \"3.0\",\n      step: \"0.1\",\n      onInput: this.handleZoom.bind(this)\n    }), v(\"span\", null, this.state.renderer.zoom, \"x\")));\n  };\n\n  return LayoutPrefs;\n}(d);\n\nvar ChevronDown = function (_a) {\n  var size = _a.size;\n  return v(\"svg\", {\n    width: size,\n    height: size,\n    viewBox: \"0 0 1792 1792\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, v(\"path\", {\n    d: \"M1683 808l-742 741q-19 19-45 19t-45-19l-742-741q-19-19-19-45.5t19-45.5l166-165q19-19 45-19t45 19l531 531 531-531q19-19 45-19t45 19l166 165q19 19 19 45.5t-19 45.5z\"\n  }));\n};\n\nvar Close = function (_a) {\n  var size = _a.size;\n  return v(\"svg\", {\n    width: size,\n    height: size,\n    viewBox: \"0 0 1792 1792\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, v(\"path\", {\n    d: \"M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z\"\n  }));\n};\n\nvar Gear = function (_a) {\n  var size = _a.size;\n  return v(\"svg\", {\n    width: size,\n    height: size,\n    viewBox: \"0 0 1792 1792\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, v(\"path\", {\n    d: \"M1152 896q0-106-75-181t-181-75-181 75-75 181 75 181 181 75 181-75 75-181zm512-109v222q0 12-8 23t-20 13l-185 28q-19 54-39 91 35 50 107 138 10 12 10 25t-9 23q-27 37-99 108t-94 71q-12 0-26-9l-138-108q-44 23-91 38-16 136-29 186-7 28-36 28h-222q-14 0-24.5-8.5t-11.5-21.5l-28-184q-49-16-90-37l-141 107q-10 9-25 9-14 0-25-11-126-114-165-168-7-10-7-23 0-12 8-23 15-21 51-66.5t54-70.5q-27-50-41-99l-183-27q-13-2-21-12.5t-8-23.5v-222q0-12 8-23t19-13l186-28q14-46 39-92-40-57-107-138-10-12-10-24 0-10 9-23 26-36 98.5-107.5t94.5-71.5q13 0 26 10l138 107q44-23 91-38 16-136 29-186 7-28 36-28h222q14 0 24.5 8.5t11.5 21.5l28 184q49 16 90 37l142-107q9-9 24-9 13 0 25 10 129 119 165 170 7 8 7 22 0 12-8 23-15 21-51 66.5t-54 70.5q26 50 41 98l183 28q13 2 21 12.5t8 23.5z\"\n  }));\n};\n\nvar Help = function (_a) {\n  var size = _a.size;\n  return v(\"svg\", {\n    width: size,\n    height: size,\n    viewBox: \"0 0 1792 1792\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, v(\"path\", {\n    d: \"M1008 1200v160q0 14-9 23t-23 9h-160q-14 0-23-9t-9-23v-160q0-14 9-23t23-9h160q14 0 23 9t9 23zm256-496q0 50-15 90t-45.5 69-52 44-59.5 36q-32 18-46.5 28t-26 24-11.5 29v32q0 14-9 23t-23 9h-160q-14 0-23-9t-9-23v-68q0-35 10.5-64.5t24-47.5 39-35.5 41-25.5 44.5-21q53-25 75-43t22-49q0-42-43.5-71.5t-95.5-29.5q-56 0-95 27-29 20-80 83-9 12-25 12-11 0-19-6l-108-82q-10-7-12-20t5-23q122-192 349-192 129 0 238.5 89.5t109.5 214.5zm-368-448q-130 0-248.5 51t-204 136.5-136.5 204-51 248.5 51 248.5 136.5 204 204 136.5 248.5 51 248.5-51 204-136.5 136.5-204 51-248.5-51-248.5-136.5-204-204-136.5-248.5-51zm768 640q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z\"\n  }));\n};\n\nvar Controls =\n/** @class */\nfunction (_super) {\n  __extends(Controls, _super);\n\n  function Controls() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      showRendererPrefs: false\n    };\n    return _this;\n  }\n\n  Controls.prototype.render = function () {\n    return v(\"div\", {\n      style: {\n        width: '100%'\n      }\n    }, v(\"div\", {\n      className: \"uirStateVisControls\"\n    }, v(StateSelector, {\n      router: this.props.router\n    }), v(\"div\", {\n      style: {\n        marginLeft: 'auto',\n        cursor: 'pointer'\n      },\n      className: \"uirStateVisIcons\"\n    }, v(\"span\", {\n      className: \"uirStateVisHover\"\n    }, v(Help, {\n      size: \"16px\"\n    }), v(\"div\", {\n      className: \"hoverBlock\"\n    }, v(\"ul\", null, v(\"li\", null, \"Click a node to activate that state.\"), v(\"li\", null, \"Select a state from the dropdown to activate that state.\"), v(\"li\", null, \"Double click a node to auto-collapse that section of the tree when inactive. Collapsed nodes are displayed with a dotted outline and the count of collapsed children.\"), v(\"li\", null, \"Lazy loaded states (including future states) are displayed with a dashed outline.\")))), v(\"span\", {\n      className: \"uirStateVisHover\"\n    }, v(Gear, {\n      size: \"16px\"\n    }), v(\"div\", {\n      className: \"hoverBlock\"\n    }, v(LayoutPrefs, {\n      onRendererChange: this.props.onRendererChange\n    }))), v(\"span\", {\n      className: \"uirStateVisHover\",\n      onClick: this.props.onMinimize\n    }, v(ChevronDown, {\n      size: \"16px\"\n    }), v(\"div\", null, v(\"span\", {\n      style: {\n        float: 'right'\n      }\n    }, \"Minimize\")), v(\"div\", null, \"Minimize\")), v(\"span\", {\n      className: \"uirStateVisHover\",\n      onClick: this.props.onClose\n    }, v(Close, {\n      size: \"16px\"\n    }), v(\"div\", null, v(\"span\", {\n      style: {\n        float: 'right'\n      }\n    }, \"Close\"))))));\n  };\n\n  return Controls;\n}(d);\n/** A floating window that supports minimization and resizing  */\n\n\nvar StateVisWindow =\n/** @class */\nfunction (_super) {\n  __extends(StateVisWindow, _super);\n\n  function StateVisWindow(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.deregisterFns = [];\n\n    _this.minimize = function () {\n      // evt && evt.preventDefault();\n      // evt && evt.stopPropagation();\n      var el = _this.el;\n      var bounds = el.getBoundingClientRect();\n      _this.top = bounds.top + 'px';\n      _this.left = bounds.left + 'px';\n      _this.right = window.innerWidth - bounds.right + 'px';\n      _this.bottom = window.innerHeight - bounds.bottom + 'px';\n      el.style.top = 'auto';\n      el.style.left = 'auto';\n      el.style.right = _this.right;\n      el.style.bottom = _this.bottom;\n\n      var unminimize = function () {\n        el.style.top = 'auto';\n        el.style.left = 'auto';\n        el.style.right = _this.right;\n        el.style.bottom = _this.bottom;\n        toggleClass('minimized')(el);\n        el.removeEventListener('click', unminimize);\n\n        var animationEndListener = function (evt) {\n          var bounds = el.getBoundingClientRect();\n          el.style.top = bounds.top + 'px';\n          el.style.left = bounds.left + 'px';\n          el.style.right = 'auto';\n          el.style.bottom = 'auto';\n          el.removeEventListener('transitionend', animationEndListener);\n        };\n\n        el.addEventListener('transitionend', animationEndListener);\n      };\n\n      addClass('minimized')(el); // wait 50ms to avoid coordinates jumping directly to 0/0 and avoid animation\n\n      setTimeout(function () {\n        return el.style.right = el.style.bottom = '0';\n      }, 50);\n      return unminimize;\n    };\n\n    _this.state = {\n      unminimize: null\n    };\n    return _this;\n  }\n\n  StateVisWindow.prototype.componentWillReceiveProps = function (nextProps) {\n    if (this.props.minimized !== nextProps.minimized) {\n      var unminimize_1 = this.state.unminimize;\n\n      if (unminimize_1) {\n        this.setState({\n          unminimize: null\n        }, function () {\n          return unminimize_1();\n        });\n      } else {\n        this.setState({\n          unminimize: this.minimize()\n        });\n      }\n    }\n  };\n\n  StateVisWindow.prototype.componentWillUnmount = function () {\n    this.deregisterFns.forEach(function (fn) {\n      return fn();\n    });\n  };\n\n  StateVisWindow.prototype.componentDidMount = function () {\n    if (typeof MutationObserver === 'function') {\n      this.monitorResizeEvents();\n    }\n  };\n  /** The uirStateVisContainer class enables resize: both. This function listens for resize events */\n\n\n  StateVisWindow.prototype.monitorResizeEvents = function () {\n    var _this = this;\n\n    var _width = this.el.style.width;\n    var _height = this.el.style.height;\n    var observer = new MutationObserver(function (mutations) {\n      mutations.forEach(function (mutation) {\n        if (mutation.attributeName == 'style') {\n          var el = mutation.target,\n              newwidth = el['style'].width,\n              newheight = el['style'].height;\n\n          if (newwidth !== _width || newheight !== _height) {\n            _width = newwidth;\n            _height = newheight;\n            var width = parseInt(newwidth.replace(/px$/, ''));\n            var height = parseInt(newheight.replace(/px$/, ''));\n\n            _this.props.onResize({\n              width: width,\n              height: height\n            });\n          }\n        }\n      });\n    });\n    var config = {\n      attributes: true,\n      childList: false,\n      characterData: false,\n      subtree: false,\n      attributeFilter: ['style']\n    };\n    observer.observe(this.el, config);\n    this.deregisterFns.push(function () {\n      return observer.disconnect();\n    });\n  };\n\n  StateVisWindow.prototype.render = function () {\n    var _this = this;\n\n    return v(\"div\", {\n      className: \"uirStateVisContainer\",\n      ref: function (el) {\n        return _this.el = el;\n      }\n    }, this.props.children);\n  };\n\n  return StateVisWindow;\n}(d);\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \"/* http://meyerweb.com/eric/tools/css/reset/\\n   v2.0 | 20110126\\n   License: none (public domain)\\n*/\\n\\n#uirStateVisualizer {\\n  margin: 0;\\n  padding: 0;\\n  border: 0;\\n  font-size: 16px;\\n  font-family: sans-serif;\\n  font-weight: normal;\\n  vertical-align: baseline;\\n  line-height: 1;\\n  display: block;\\n  box-sizing: content-box;\\n}\\n#uirStateVisualizer svg {\\n  box-sizing: content-box;\\n}\\n\\n.uirStateVisContainer {\\n  z-index: 999;\\n  position: fixed;\\n  right: 32px;\\n  bottom: 64px;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  background-color: rgba(255, 255, 255, 0.8);\\n  transform: scale(1);\\n  transform-origin: right bottom;\\n  transition: right 0.5s ease, bottom 0.5s ease, transform 0.5s ease;\\n  overflow: hidden;\\n  resize: both;\\n}\\n\\n.uirStateVisContainer.minimized {\\n  cursor: pointer;\\n  transform: scale(0.25);\\n  z-index: 1000;\\n}\\n\\n.uirStateVisContainer:hover {\\n  outline: 2px solid rgba(0, 0, 0, 0.35);\\n}\\n\\n.uirStateVisContainer:hover .uirStateVisControls {\\n  visibility: visible;\\n}\\n\\n.uirStateVisContainer .uirStateVisControls {\\n  visibility: hidden;\\n  display: flex;\\n  width: 100%;\\n  flex-flow: row nowrap;\\n  justify-content: space-between;\\n  flex: 1 0 auto;\\n  z-index: 1;\\n}\\n\\n.uirStateVisContainer .uirStateVisControls .uirStateVisIcons span svg {\\n  padding: 3px;\\n  fill: #777777;\\n}\\n\\n.uirStateVisContainer .uirStateVisControls .uirStateVisIcons span:hover svg {\\n  fill: black;\\n}\\n\\n.uirStateVisHover > div {\\n  transition: opacity 500ms ease;\\n  opacity: 0;\\n  height: 0;\\n  padding: 0;\\n\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  overflow: hidden;\\n\\n  margin-top: 26px;\\n  font-size: 14px;\\n}\\n\\n.uirStateVisHover > div.hoverBlock {\\n  left: 0;\\n  border-bottom: none;\\n  background: white;\\n}\\n\\n.uirStateVisHover:hover > div.hoverBlock {\\n  border-bottom: 2px solid lightgrey;\\n}\\n\\n.uirStateVisHover:hover > div {\\n  opacity: 1;\\n  height: auto;\\n}\\n\\n.uirStateVisHover .uirStateVisLayoutPrefs {\\n  padding: 12px 24px;\\n}\\n\\n.uirStateVisContainer .statevis {\\n  flex: 1 1 auto;\\n  transition: all 1s ease;\\n}\\n\\n.uirStateVisWindowOverlay {\\n  display: none;\\n}\\n\\n.minimized .uirStateVisWindowOverlay {\\n  display: block;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0;\\n  z-index: 1000;\\n}\\n\\n.statevis circle {\\n  /*r: 10;*/\\n  fill: #fff;\\n  stroke: grey;\\n  /*stroke-width: 3px;*/\\n\\n  transition-property: r, fill, stroke, stroke-width;\\n  transition-duration: 350ms;\\n  transition-timing-function: ease-in-out;\\n\\n  cursor: pointer;\\n}\\n\\n.statevis text {\\n  transition-property: x, y, font-size, stroke, stroke-width;\\n  transition-duration: 350ms;\\n  transition-timing-function: ease-in-out;\\n}\\n\\n.statevis circle.future {\\n  /*r: 10;*/\\n  stroke: grey;\\n  stroke-dasharray: 7, 5;\\n  /*stroke-width: 1px;*/\\n}\\n\\n.statevis circle.entered {\\n  /*r: 10;*/\\n  stroke: black;\\n  fill: lightgreen;\\n}\\n\\n.statevis circle.entered:after {\\n  content: '<text>Entered</text>';\\n}\\n\\n.statevis circle.active {\\n  /*r: 15;*/\\n  fill: green;\\n  stroke: black;\\n}\\n\\n.statevis circle.collapsed {\\n  stroke-dasharray: 2, 2;\\n}\\n\\n.statevis text {\\n  font-family: sans-serif;\\n}\\n\\n.statevis .link {\\n  fill: none;\\n  stroke: #ccc;\\n  /*stroke-width: 2px;*/\\n}\\n\\n.statevis text.label {\\n  fill: grey;\\n  alignment-baseline: middle;\\n}\\n\\n.draggable {\\n  cursor: move;\\n}\\n\\n/*.draggable:hover {*/\\n/*outline: 3px solid rgba(0,0,0,0.15)*/\\n/*}*/\\n\";\nstyleInject(css_248z);\n\nvar StateVisualizer =\n/** @class */\nfunction (_super) {\n  __extends(StateVisualizer, _super);\n\n  function StateVisualizer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      height: null,\n      width: null,\n      renderer: DEFAULT_RENDERER,\n      minimized: false\n    };\n    _this.deregisterFns = [];\n\n    _this.svgWidth = function () {\n      return _this.props.width || _this.state.width || 350;\n    };\n\n    _this.svgHeight = function () {\n      return (_this.props.height || _this.state.height || 250) - 25;\n    };\n\n    return _this;\n  }\n  /**\n   * Creates a new StateVisualizer and adds it to the document.\n   *\n   * @param router the UIRouter object\n   * @param element (optional) the element where the StateVisualizer should be placed.\n   *                If no element is passed, an element will be created in the body.\n   * @param props height/width properties default: { height: 350, width: 250 }\n   * @param options StateVisualizerOptions used to customise the styling of the visualizer\n   *\n   * # Angular 1 + UI-Router (1.0.0-beta.2 and higher):\n   *\n   * Inject the router (`$uiRouter`) in a run block, then call StateVisualizer.create();\n   *\n   * ```\n   * app.run(function($uiRouter) {\n   *   StateVisualizer.create($uiRouter);\n   * });\n   * ```\n   *\n   * # Angular 1 + UI-Router 1.0.0-alpha.1 through 1.0.0-beta.1:\n   *\n   * Inject the router (`ng1UIRouter`) in a run block, then call StateVisualizer.create();\n   *\n   * ```\n   * app.run(function(ng1UIRouter) {\n   *   StateVisualizer.create(ng1UIRouter);\n   * });\n   * ```\n   *\n   * Angular 2:\n   *\n   * Call StateVisualizer.create() from your UIRouterConfig\n   *\n   * ```\n   * export class MyUIRouterConfig extends UIRouterConfig {\n   *   configure(router: UIRouter) {\n   *     StateVisualizer.create(router);\n   *   }\n   * }\n   * ```\n   *\n   * React:\n   *\n   * Call StateVisualizer.create() from your bootstrap\n   *\n   * ```\n   * let router = new UIRouterReact();\n   * StateVisualizer.create(router);\n   * router.start();\n   * ```\n   *\n   * @return the element that was bootstrapped.\n   *         You can destroy the component using:\n   *         [ReactDOM.unmountComponentAtNode](https://facebook.github.io/react/docs/top-level-api.html#reactdom.unmountcomponentatnode)\n   */\n\n\n  StateVisualizer.create = function (router, element, props, options) {\n    if (props === void 0) {\n      props = {};\n    }\n\n    if (!element) {\n      element = document.createElement('div');\n      element.id = 'uirStateVisualizer';\n    }\n\n    var initialProps = Object.assign({}, props, {\n      router: router,\n      minimizeAfter: 2500,\n      visualizationOptions: options\n    });\n\n    var _render = function () {\n      document.body.appendChild(element);\n      M(v(StateVisualizer, initialProps), element);\n    };\n\n    if (document.readyState === 'interactive' || document.readyState === 'complete') {\n      _render();\n    } else {\n      document.addEventListener('DOMContentLoaded', _render, false);\n    }\n\n    return element;\n  };\n\n  StateVisualizer.prototype.dispose = function () {\n    M(null, document.getElementById('uirStateVisualizer'), this.rootEl);\n  };\n\n  StateVisualizer.prototype.handleRendererChange = function (renderer) {\n    this.setState({\n      renderer: renderer\n    });\n  };\n\n  StateVisualizer.prototype.cancelAutoMinimize = function () {\n    if (this.minimizeTimeout) {\n      clearTimeout(this.minimizeTimeout);\n      this.minimizeTimeout = null;\n    }\n  };\n\n  StateVisualizer.prototype.componentWillUnmount = function () {\n    this.deregisterFns.forEach(function (fn) {\n      return fn();\n    });\n  };\n\n  StateVisualizer.prototype.draggable = function () {\n    var controlsEl = this.windowEl.querySelector('.uirStateVisControls');\n    var visEl = this.windowEl.querySelector('.statevis');\n    this.deregisterFns.push(draggable(controlsEl, dragActions.move(this.windowEl)));\n    this.deregisterFns.push(draggable(visEl, dragActions.move(this.windowEl)));\n  };\n\n  StateVisualizer.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this.draggable();\n\n    if (this.props.minimizeAfter) {\n      var doMinimize = function () {\n        return _this.setState({\n          minimized: true\n        });\n      };\n\n      this.minimizeTimeout = setTimeout(doMinimize, this.props.minimizeAfter);\n    }\n  };\n\n  StateVisualizer.prototype.render = function () {\n    var _this = this;\n\n    var minimized = this.state.minimized;\n    return v(\"div\", {\n      ref: function (el) {\n        return _this.rootEl = el;\n      },\n      onMouseDown: this.cancelAutoMinimize.bind(this),\n      onMouseEnter: this.cancelAutoMinimize.bind(this)\n    }, v(StateVisWindow, {\n      minimized: this.state.minimized,\n      ref: function (windowRef) {\n        return _this.windowEl = windowRef && windowRef.el || _this.windowEl;\n      },\n      onResize: function (_a) {\n        var width = _a.width,\n            height = _a.height;\n        return _this.setState({\n          width: width,\n          height: height\n        });\n      }\n    }, v(\"div\", {\n      onClick: function () {\n        return _this.setState({\n          minimized: false\n        });\n      },\n      className: \"uirStateVisWindowOverlay \" + (minimized ? 'minimized' : '')\n    }), v(Controls, {\n      router: this.props.router,\n      onRendererChange: this.handleRendererChange.bind(this),\n      onMinimize: function () {\n        return _this.setState({\n          minimized: true\n        });\n      },\n      onClose: function () {\n        return _this.dispose();\n      }\n    }), v(StateTree, {\n      router: this.props.router,\n      nodeOptions: this.props.visualizationOptions.node,\n      width: this.svgWidth(),\n      height: this.svgHeight(),\n      renderer: this.state.renderer\n    })));\n  };\n\n  return StateVisualizer;\n}(d);\n\nvar PopoverHeading =\n/** @class */\nfunction (_super) {\n  __extends(PopoverHeading, _super);\n\n  function PopoverHeading() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  PopoverHeading.prototype.render = function () {\n    var _this = this;\n\n    var tackClass = function () {\n      return 'uir-icon uir-icon-thumb-tack ' + (_this.props.pinned ? '' : 'uir-rotate-35');\n    };\n\n    var expandClass = function () {\n      return 'uir-icon uirTranVis_tooltipRight ' + (_this.props.expanded ? 'uir-icon-toggle-on' : 'uir-icon-toggle-off');\n    };\n\n    return v(\"div\", {\n      className: \"uirTranVis_panelHeading uirTranVis_heading\"\n    }, v(\"div\", {\n      style: {\n        cursor: 'pointer'\n      },\n      onClick: this.props.togglePinned\n    }, v(\"i\", {\n      className: tackClass()\n    })), v(\"h3\", {\n      className: \"uirTranVis_panelTitle\"\n    }, \"Transition #\", this.props.transition.$id), v(\"div\", {\n      style: {\n        cursor: 'pointer'\n      },\n      onClick: this.props.toggleExpand\n    }, v(\"i\", {\n      className: expandClass()\n    })));\n  };\n\n  return PopoverHeading;\n}(d);\n\nvar Modal =\n/** @class */\nfunction (_super) {\n  __extends(Modal, _super);\n\n  function Modal() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Modal.prototype.componentDidMount = function () {\n    var el = this._ref;\n    setTimeout(function () {\n      var fades = el.getElementsByClassName('uir-fade');\n      [].slice.apply(fades).forEach(function (node) {\n        return node.className += ' in';\n      });\n    }, 35);\n  };\n\n  Modal.prototype.render = function () {\n    var _this = this;\n\n    return v(\"div\", {\n      ref: function (ref) {\n        return _this._ref = ref;\n      }\n    }, v(\"div\", {\n      className: \"uirTranVis_modal-backdrop uir-fade\",\n      style: {\n        zIndex: 1040\n      }\n    }), v(\"div\", {\n      tabIndex: -1,\n      className: \"uirTranVis_modal uir-fade\",\n      style: {\n        zIndex: 1050,\n        display: 'block'\n      }\n    }, v(\"div\", {\n      className: \"uirTranVis_modal-dialog modal-lg\"\n    }, v(\"div\", {\n      className: \"uirTranVis_modal-content\"\n    }, this.props.children))));\n  };\n\n  Modal.show = function (modalTitle, id, value, component) {\n    var modal = document.body.querySelector('#uirTranVis_modal');\n\n    if (!modal) {\n      modal = document.createElement('div');\n      modal.id = 'uirTranVis_modal';\n      document.body.appendChild(modal);\n    }\n\n    var Nothing = function () {\n      return null;\n    };\n\n    var close = function () {\n      return M(v(Nothing, null), document.body, modal);\n    };\n\n    M(v(component, {\n      close: close,\n      modalTitle: modalTitle,\n      id: id,\n      value: value\n    }), modal);\n  };\n\n  return Modal;\n}(d);\n\nvar Pretty =\n/** @class */\nfunction (_super) {\n  __extends(Pretty, _super);\n\n  function Pretty() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.preStyle = {\n      display: 'block',\n      padding: '10px 30px',\n      margin: '0'\n    };\n    _this.state = {\n      show: true\n    };\n    return _this;\n  }\n\n  Pretty.prototype.toggle = function () {\n    this.setState({\n      show: !this.state.show\n    });\n  };\n\n  Pretty.prototype.render = function () {\n    return v(\"div\", null, this.state.show ? v(\"pre\", {\n      style: this.preStyle\n    }, JSON.stringify(this.props.data, null, 2)) : false);\n  };\n\n  return Pretty;\n}(d);\n\nvar ResolveData =\n/** @class */\nfunction (_super) {\n  __extends(ResolveData, _super);\n\n  function ResolveData() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.close = function () {\n      return _this.props.close();\n    };\n\n    return _this;\n  }\n\n  ResolveData.prototype.render = function () {\n    return v(\"div\", null, v(Modal, null, v(\"div\", {\n      className: \"uirTranVis_modal-header uir-resolve-header\"\n    }, v(\"div\", {\n      style: {\n        fontSize: '20px'\n      }\n    }, this.props.modalTitle, \": \", this.props.id), v(\"button\", {\n      className: \"uirTranVis_btn uirTranVis_btnXs uirTranVis_btnPrimary\",\n      onClick: this.close\n    }, v(\"i\", {\n      className: \"uir-icon uir-iconw-close\"\n    }))), v(\"div\", {\n      className: \"uirTranVis_modalBody\"\n    }, v(Pretty, {\n      data: this.props.value\n    })), v(\"div\", {\n      className: \"uirTranVis_modalFooter\"\n    }, v(\"button\", {\n      className: \"uirTranVis_btn uirTranVis_btnPrimary\",\n      onClick: this.close\n    }, \"Close\"))));\n  };\n\n  return ResolveData;\n}(d);\n/**\n * Returns a string shortened to a maximum length\n *\n * If the string is already less than the `max` length, return the string.\n * Else return the string, shortened to `max - 3` and append three dots (\"...\").\n *\n * @param max the maximum length of the string to return\n * @param str the input string\n */\n\n\nfunction maxLength(max, str) {\n  if (str.length <= max) return str;\n  return str.substr(0, max - 3) + '...';\n}\n\nfunction stringifyPattern(value) {\n  if (value === undefined) return 'undefined';\n  if (value === null) return 'null';\n  if (typeof value === 'object' && typeof value.then === 'function') return '[Promise]';\n  return value;\n}\n\nfunction stringify(o) {\n  var seen = [];\n\n  function format(val) {\n    if (typeof val === 'object') {\n      if (seen.indexOf(val) !== -1) return '[circular ref]';\n      seen.push(val);\n    }\n\n    return stringifyPattern(val);\n  }\n\n  return JSON.stringify(o, function (key, val) {\n    return format(val);\n  }).replace(/\\\\\"/g, '\"');\n}\n\nvar KeyValueRow =\n/** @class */\nfunction (_super) {\n  __extends(KeyValueRow, _super);\n\n  function KeyValueRow() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  KeyValueRow.prototype.render = function () {\n    var _a = this.props,\n        _b = _a.tuple,\n        key = _b.key,\n        val = _b.val,\n        classes = _a.classes,\n        modalTitle = _a.modalTitle;\n\n    var showModal = function () {\n      return Modal.show(modalTitle, key, val, ResolveData);\n    }; // prettier-ignore\n\n\n    var renderValue = function () {\n      if (val === undefined) return v(\"span\", {\n        className: \"uirTranVis_code\"\n      }, \"undefined\");\n      if (val === null) return v(\"span\", {\n        className: \"uirTranVis_code\"\n      }, \"null\");\n      if (typeof val === 'string') return v(\"span\", {\n        className: \"uirTranVis_code\"\n      }, \"\\\"\", maxLength(100, val), \"\\\"\");\n      if (typeof val === 'number') return v(\"span\", {\n        className: \"uirTranVis_code\"\n      }, val.toString());\n      if (typeof val === 'boolean') return v(\"span\", {\n        className: \"uirTranVis_code\"\n      }, val.toString());\n      if (Array.isArray(val)) return v(\"span\", {\n        className: \"link\",\n        onClick: showModal\n      }, \"[Array]\");\n      if (typeof val === 'object') return v(\"span\", {\n        className: \"link\",\n        onClick: showModal\n      }, \"[Object]\");\n      if (typeof val.toString === 'function') return v(\"span\", null, maxLength(100, val.toString()));\n    };\n\n    return v(\"div\", {\n      className: classes.div\n    }, v(\"div\", {\n      className: classes.key\n    }, key, \":\"), v(\"div\", {\n      className: classes.val\n    }, renderValue()));\n  };\n\n  return KeyValueRow;\n}(d);\n\nvar KeysAndValues =\n/** @class */\nfunction (_super) {\n  __extends(KeysAndValues, _super);\n\n  function KeysAndValues() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      collapseFalsy: true\n    };\n    return _this;\n  }\n\n  KeysAndValues.prototype.makeBuckets = function (definitions, data) {\n    var makeBucket = function (def) {\n      return {\n        label: def.label,\n        is: function (val) {\n          return val === def.value;\n        },\n        value: def.value,\n        count: 0,\n        data: {}\n      };\n    };\n\n    var defaultBucket = {\n      label: 'default',\n      is: function () {\n        return true;\n      },\n      count: 0,\n      data: {}\n    };\n    var buckets = definitions.map(makeBucket).concat(defaultBucket);\n    Object.keys(data).forEach(function (key) {\n      var bucket = buckets.find(function (bucket) {\n        return bucket.is(data[key]);\n      });\n      bucket.data[key] = data[key];\n      bucket.value = data[key];\n      bucket.count++;\n    });\n    return buckets;\n  };\n\n  KeysAndValues.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        data = _a.data,\n        classes = _a.classes,\n        modalTitle = _a.modalTitle;\n    var groupedValues = this.props.groupedValues || KeysAndValues.falsyGroupDefinitions;\n    var enableGroupToggle = this.props.enableGroupToggle || false;\n    var isCollapsed = this.state.collapseFalsy;\n    var buckets = this.makeBuckets(groupedValues, data);\n    var defaultBucket = buckets.find(function (bucket) {\n      return bucket.label === 'default';\n    });\n    var groupedBuckets = buckets.filter(function (bucket) {\n      return !!bucket.count && bucket !== defaultBucket;\n    });\n    var groupedCount = groupedBuckets.reduce(function (total, bucket) {\n      return total += bucket.count;\n    }, 0);\n    var tuples = Object.keys(defaultBucket.data).map(function (key) {\n      return {\n        key: key,\n        val: defaultBucket.data[key]\n      };\n    });\n    var groupedTuples = groupedBuckets.map(function (bucket) {\n      var key = Object.keys(bucket.data).sort().join(', ');\n      var val = bucket.value;\n      return {\n        key: key,\n        val: val\n      };\n    });\n    var showGroupToggle = enableGroupToggle && groupedCount > 1;\n    return v(\"div\", {\n      className: \"uirTranVis_keysAndValues\"\n    }, tuples.map(function (tuple) {\n      return v(KeyValueRow, {\n        key: tuple.key,\n        tuple: tuple,\n        classes: classes,\n        modalTitle: modalTitle\n      });\n    }), showGroupToggle && !!groupedTuples.length && v(\"a\", {\n      href: \"javascript:void(0)\",\n      onClick: function () {\n        return _this.setState({\n          collapseFalsy: !isCollapsed\n        });\n      },\n      className: \"uirTranVis_keyValue\"\n    }, isCollapsed ? 'show' : 'hide', \" \", groupedCount, \" \", groupedBuckets.map(function (bucket) {\n      return bucket.label;\n    }).join(' or '), ' ', \"parameter values\"), (!showGroupToggle || !this.state.collapseFalsy) && groupedTuples.map(function (tuple) {\n      return v(KeyValueRow, {\n        key: tuple.key,\n        tuple: tuple,\n        classes: classes,\n        modalTitle: modalTitle\n      });\n    }));\n  };\n\n  KeysAndValues.falsyGroupDefinitions = [{\n    value: undefined,\n    label: 'undefined'\n  }, {\n    value: null,\n    label: 'null'\n  }, {\n    value: '',\n    label: 'empty string'\n  }];\n  return KeysAndValues;\n}(d);\n\nvar TransSummary =\n/** @class */\nfunction (_super) {\n  __extends(TransSummary, _super);\n\n  function TransSummary() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TransSummary.prototype.render = function () {\n    return v(\"div\", {\n      className: \"uirTranVis_transSummary\"\n    }, v(\"div\", {\n      className: \"uirTranVis_summaryData\"\n    }, v(\"span\", null, \"From:\"), v(\"strong\", null, this.props.trans.from().name || '(root)')), v(\"div\", {\n      className: \"uirTranVis_summaryData\"\n    }, v(\"span\", null, \"To:\"), v(\"strong\", null, this.props.trans.to().name || '(root)')), v(\"div\", {\n      className: \"uirTranVis_summaryData\"\n    }, v(\"span\", null, \"Result:\"), v(\"div\", null, v(\"strong\", null, this.props.status), this.props.rejection ? v(\"span\", null, \": \", this.props.rejection) : null)), v(\"div\", {\n      className: \"uirTranVis_summaryHeading\"\n    }, \"Parameter Values:\"), v(\"div\", null, v(KeysAndValues, {\n      groupedValues: KeysAndValues.falsyGroupDefinitions,\n      enableGroupToggle: true,\n      data: this.props.trans.params(),\n      modalTitle: \"Parameter value\",\n      classes: {\n        div: 'uirTranVis_keyValue',\n        key: '',\n        val: ''\n      }\n    })));\n  };\n\n  return TransSummary;\n}(d);\n\nvar NodeDetail =\n/** @class */\nfunction (_super) {\n  __extends(NodeDetail, _super);\n\n  function NodeDetail() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  NodeDetail.prototype.stateName = function () {\n    var node = this.props.node;\n    var name = node && node.state && node.state.name;\n    if (name === '') name = '(root)';\n    return name && name.split('.').reverse()[0];\n  };\n\n  NodeDetail.prototype.params = function () {\n    var node = this.props.node;\n    return node && node.paramSchema.reduce(function (params, param) {\n      params[param.id] = node.paramValues[param.id];\n      return params;\n    }, {});\n  };\n\n  NodeDetail.prototype.resolves = function () {\n    var asString = function (val) {\n      return typeof val === 'string' ? val : maxLength(30, stringify(val));\n    };\n\n    var node = this.props.node;\n    var ignoredTokens = ['$stateParams', '$transition$', '$state$', this.props.trans.constructor];\n    return node && node.resolvables.filter(function (r) {\n      return ignoredTokens.indexOf(r.token) === -1;\n    }).reduce(function (acc, r) {\n      acc[asString(r.token)] = r.data;\n      return acc;\n    }, {});\n  };\n\n  NodeDetail.prototype.render = function () {\n    if (!this.props.node) return null;\n    var params = this.params();\n    var resolves = this.resolves();\n    return !this.props.node ? null : v(\"div\", {\n      className: \"uirTranVis_nodeDetail\"\n    }, v(\"div\", {\n      className: \"uirTranVis_heading\"\n    }, v(\"div\", {\n      className: \"uirTranVis_nowrap uirTranVis_deemphasize\"\n    }, \"(\", this.props.type, \" state)\"), v(\"div\", {\n      className: \"uirTranVis_stateName\"\n    }, this.stateName())), !!Object.keys(params).length && v(\"div\", {\n      className: \"params\"\n    }, v(\"div\", {\n      className: \"uirTranVis_paramsLabel uirTranVis_deemphasize\"\n    }, \"Parameter values\"), v(KeysAndValues, {\n      data: this.params(),\n      classes: {\n        div: 'uirTranVis_keyValue'\n      },\n      modalTitle: \"Parameter value\"\n    })), !!Object.keys(resolves).length && v(\"div\", {\n      className: \"params resolve\"\n    }, v(\"div\", {\n      className: \"uirTranVis_resolveLabel uirTranVis_deemphasize\"\n    }, \"Resolved data\"), v(KeysAndValues, {\n      data: this.resolves(),\n      classes: {\n        div: 'uirTranVis_keyValue'\n      },\n      modalTitle: \"Resolved value\"\n    })));\n  };\n\n  return NodeDetail;\n}(d);\n\nvar FlowArrow =\n/** @class */\nfunction (_super) {\n  __extends(FlowArrow, _super);\n\n  function FlowArrow() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.height = 1000;\n\n    _this.renderCurve = function () {\n      return v(\"path\", {\n        stroke: \"white\",\n        \"stroke-width\": \"20\",\n        fill: \"none\",\n        d: \"M50 \" + _this.height + \" V 70 Q50 20, 100 20 Q150 20, 150 70 V \" + _this.height\n      });\n    };\n\n    _this.renderVerticalLine = function () {\n      return v(\"svg\", {\n        viewBox: \"0 70 100 \" + (_this.height - 70),\n        className: \"flowArrowSvg\"\n      }, _this.renderCurve());\n    };\n\n    _this.renderCurveRU = function () {\n      return v(\"svg\", {\n        viewBox: \"0 0 100 \" + _this.height,\n        className: \"flowArrowSvg top\"\n      }, _this.renderCurve());\n    };\n\n    _this.renderCurveRD = function () {\n      return v(\"svg\", {\n        viewBox: \"100 0 100 \" + _this.height,\n        className: \"flowArrowSvg top\"\n      }, _this.renderCurve());\n    };\n\n    _this.renderArrowU = function () {\n      return v(\"svg\", {\n        viewBox: \"0 0 100 \" + _this.height,\n        className: \"flowArrowSvg top\"\n      }, v(\"path\", {\n        stroke: \"white\",\n        \"stroke-width\": \"20\",\n        fill: \"none\",\n        d: \"M50 \" + _this.height + \" V 20 \"\n      }), v(\"polygon\", {\n        fill: \"white\",\n        stroke: \"white\",\n        \"stroke-width\": \"20\",\n        points: \"50,20 35,40 65,40\"\n      }));\n    };\n\n    _this.renderArrowD = function () {\n      return v(\"svg\", {\n        viewBox: \"0 0 100 \" + _this.height,\n        className: \"flowArrowSvg bottom\"\n      }, v(\"path\", {\n        stroke: \"white\",\n        \"stroke-width\": \"20\",\n        fill: \"none\",\n        d: \"M50 0 V \" + (_this.height - 20)\n      }), v(\"polygon\", {\n        fill: \"white\",\n        stroke: \"white\",\n        \"stroke-width\": \"20\",\n        points: \"50,\" + (_this.height - 20) + \" 35,\" + (_this.height - 40) + \" 65,\" + (_this.height - 40)\n      }));\n    };\n\n    return _this;\n  }\n\n  FlowArrow.prototype.render = function () {\n    var _this = this;\n\n    var renderSvg = function (type) {\n      switch (type) {\n        case 'V':\n          return _this.renderVerticalLine();\n\n        case 'RU':\n          return _this.renderCurveRU();\n\n        case 'RD':\n          return _this.renderCurveRD();\n\n        case 'AU':\n          return _this.renderArrowU();\n\n        case 'AD':\n          return _this.renderArrowD();\n\n        default:\n          return null;\n      }\n    };\n\n    return v(\"div\", {\n      className: \"flowArrowCell\"\n    }, v(\"div\", {\n      style: {\n        overflow: 'hidden',\n        position: 'relative',\n        flex: '1'\n      }\n    }, renderSvg(this.props.top)), v(\"div\", {\n      style: {\n        overflow: 'hidden',\n        position: 'relative',\n        flex: '1'\n      }\n    }, renderSvg(this.props.bottom)));\n  };\n\n  return FlowArrow;\n}(d);\n\nvar NodePaths =\n/** @class */\nfunction (_super) {\n  __extends(NodePaths, _super);\n\n  function NodePaths() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      retained: [],\n      enterExit: []\n    };\n    return _this;\n  }\n\n  NodePaths.prototype.componentDidMount = function () {\n    var trans = this.props.transition;\n    var tcPaths = Object.assign({}, trans.treeChanges()); // Ignore the root state when drawing paths.\n\n    ['entering', 'exiting', 'retained'].forEach(function (key) {\n      return tcPaths[key] = tcPaths[key].filter(function (node) {\n        return !!node.state.name;\n      });\n    });\n\n    var partialKey = function (pathname, idx) {\n      var node = tcPaths[pathname][idx];\n      return node ? node.state.name : '';\n    };\n\n    var key = function (pathname1, pathname2, idx) {\n      return trans.$id + \".\" + partialKey(pathname1, idx) + \"-\" + partialKey(pathname2, idx);\n    };\n\n    var retained = tcPaths.retained.map(function (node, idx) {\n      return {\n        key: key('retained', 'retained', idx),\n        to: node,\n        toType: 'retain',\n        from: node,\n        fromType: 'retain'\n      };\n    });\n    var enterExit = [];\n    var maxPathLength = Math.max(tcPaths.exiting.length, tcPaths.entering.length);\n\n    for (var i = 0; i < maxPathLength; i++) {\n      enterExit.push({\n        key: key('exiting', 'entering', i),\n        to: tcPaths.entering[i],\n        toType: tcPaths.entering[i] && 'enter',\n        from: tcPaths.exiting[i],\n        fromType: tcPaths.exiting[i] && 'exit'\n      });\n    }\n\n    this.setState({\n      retained: retained,\n      enterExit: enterExit\n    });\n  };\n\n  NodePaths.prototype.render = function () {\n    var _this = this;\n\n    var retained = this.state.retained || [];\n    var enterExit = this.state.enterExit || [];\n    var lastEnterIdx = enterExit.filter(function (x) {\n      return !!x.toType;\n    }).length - 1;\n    return v(\"table\", {\n      className: \"uirTranVis_paths\"\n    }, v(\"thead\", null, v(\"tr\", null, v(\"th\", null, \"From Path\"), v(\"th\", null, \"To Path\"))), v(\"tbody\", null, retained.map(function (elem) {\n      return v(\"tr\", {\n        key: elem.key\n      }, v(\"td\", {\n        className: elem.fromType,\n        colSpan: 2\n      }, v(NodeDetail, {\n        trans: _this.props.transition,\n        node: elem.from,\n        type: elem.fromType\n      })));\n    }), enterExit.map(function (elem, idx) {\n      return v(\"tr\", {\n        key: elem.key\n      }, v(\"td\", {\n        colSpan: 2\n      }, v(\"div\", {\n        className: \"uirTranVis_Row\"\n      }, v(\"div\", {\n        className: \"\" + elem.fromType\n      }, !elem.fromType ? null : v(\"div\", {\n        className: \"uirTranVis_nodeContent\"\n      }, v(NodeDetail, {\n        trans: _this.props.transition,\n        node: elem.from,\n        type: elem.fromType\n      }), v(FlowArrow, {\n        bottom: \"V\",\n        top: idx ? 'V' : elem.toType ? 'RU' : 'AU'\n      }))), v(\"div\", {\n        className: \"\" + elem.toType\n      }, !elem.toType ? null : v(\"div\", {\n        className: \"uirTranVis_nodeContent\"\n      }, v(FlowArrow, {\n        top: idx ? 'V' : elem.fromType ? 'RD' : 'V',\n        bottom: idx == lastEnterIdx ? 'AD' : 'V'\n      }), v(NodeDetail, {\n        trans: _this.props.transition,\n        node: elem.to,\n        type: elem.toType\n      }))))));\n    })));\n  };\n\n  return NodePaths;\n}(d);\n\nvar TransitionPopover =\n/** @class */\nfunction (_super) {\n  __extends(TransitionPopover, _super);\n\n  function TransitionPopover() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TransitionPopover.prototype.render = function () {\n    var _this = this;\n\n    if (!this.props.open && !this.props.pinned) return null;\n\n    var classes = function () {\n      return 'uirTranVis_transitionDetail uirTranVis_panel panel-default ' + (_this.props.pinned ? 'pin ' : '') + (_this.props.expanded ? 'expand ' : '') + (_this.props.open ? 'showDetail ' : '');\n    };\n\n    return v(\"div\", {\n      className: classes()\n    }, v(PopoverHeading, {\n      transition: this.props.transition,\n      pinned: this.props.pinned,\n      expanded: this.props.expanded,\n      togglePinned: this.props.togglePinned,\n      toggleExpand: this.props.toggleExpand\n    }), v(\"div\", {\n      className: \"uirTranVis_panelBody\"\n    }, v(TransSummary, {\n      trans: this.props.transition,\n      status: this.props.status,\n      rejection: this.props.rejection\n    }), v(\"hr\", null), v(NodePaths, {\n      transition: this.props.transition\n    })), v(\"div\", {\n      className: \"uirTranVis_downArrow\"\n    }));\n  };\n\n  return TransitionPopover;\n}(d);\n\nvar BreadcrumbArrow =\n/** @class */\nfunction (_super) {\n  __extends(BreadcrumbArrow, _super);\n\n  function BreadcrumbArrow() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.handleClick = function () {\n      return _this.props.toggleExpand();\n    };\n\n    return _this;\n  }\n\n  BreadcrumbArrow.prototype.iconClass = function () {\n    var iconClasses = {\n      running: 'uir-icon uir-spin uir-iconw-spinner',\n      success: 'uir-icon uir-iconw-check',\n      redirected: 'uir-icon uir-iconw-share',\n      ignored: 'uir-icon uir-iconw-circle-o',\n      error: 'uir-icon uir-iconw-close'\n    };\n    return iconClasses[this.props.status];\n  };\n\n  BreadcrumbArrow.prototype.render = function () {\n    return !this.props.transition ? null : v(\"div\", {\n      className: this.props.status + ' uirTranVis_historyEntry',\n      onClick: this.handleClick\n    }, v(\"div\", {\n      className: \"uirTranVis_historyEntrySummary\"\n    }, v(\"div\", {\n      className: \"uirTranVis_transId\"\n    }, this.props.transition.$id), v(\"div\", {\n      className: \"uirTranVis_status\"\n    }, this.props.status, !this.props.message ? null : v(\"span\", null, \": \", this.props.message)), v(\"div\", {\n      className: \"uirTranVis_transName\"\n    }, v(\"i\", {\n      className: this.iconClass()\n    }), v(\"span\", null, this.props.transition.to().name))));\n  };\n\n  return BreadcrumbArrow;\n}(d);\n\nvar makeCancelable = function (promise) {\n  var hasCanceled_ = false;\n  var wrappedPromise = new Promise(function (resolve, reject) {\n    promise.then(function (val) {\n      return hasCanceled_ ? reject({\n        isCanceled: true\n      }) : resolve(val);\n    }, function (error) {\n      return hasCanceled_ ? reject({\n        isCanceled: true\n      }) : reject(error);\n    });\n  });\n  var cancelablePromise = {\n    promise: wrappedPromise,\n    isCanceled: false,\n    cancel: function () {\n      cancelablePromise.isCanceled = hasCanceled_ = true;\n    }\n  };\n  return cancelablePromise;\n};\n\nvar TransitionView =\n/** @class */\nfunction (_super) {\n  __extends(TransitionView, _super);\n\n  function TransitionView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.transitionPromise = null;\n    _this.state = {\n      status: 'running',\n      message: null,\n      rejection: null,\n      pinned: false,\n      expanded: false,\n      open: false,\n      deregisterFunctions: []\n    };\n\n    _this.togglePin = function () {\n      return _this.setState({\n        pinned: !_this.state.pinned\n      });\n    };\n\n    _this.toggleExpand = function () {\n      return _this.setState({\n        expanded: !_this.state.expanded\n      });\n    };\n\n    _this.open = function () {\n      return _this.setState({\n        open: true\n      });\n    };\n\n    _this.close = function () {\n      return _this.setState({\n        open: false\n      });\n    };\n\n    return _this;\n  }\n\n  TransitionView.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var trans = this.props.transition;\n\n    var setMessage = function (message) {\n      // Transition hooks are computed when the trans starts; they can't be removed while the trans is running.\n      if (!_this.transitionPromise.isCanceled) {\n        _this.setState({\n          message: message\n        });\n      }\n    };\n\n    var statename = function (state) {\n      return state.name || '(root)';\n    };\n\n    var fns = [];\n    fns.push(trans.onStart({}, function () {\n      return setMessage('Starting...');\n    }, {\n      priority: 10000\n    }));\n    fns.push(trans.onExit({}, function (t, state) {\n      return setMessage(\"Exiting \" + statename(state));\n    }, {\n      priority: 10000\n    }));\n    fns.push(trans.onRetain({}, function (t, state) {\n      return setMessage(\"Retained \" + statename(state));\n    }, {\n      priority: 10000\n    }));\n    fns.push(trans.onEnter({}, function (t, state) {\n      return setMessage(\"Entering \" + statename(state));\n    }, {\n      priority: 10000\n    }));\n    fns.push(trans.onFinish({}, function () {\n      return setMessage(\"Finishing...\");\n    }));\n    this.setState({\n      deregisterFunctions: fns\n    });\n\n    var success = function () {\n      return _this.setState({\n        status: 'success',\n        message: null\n      });\n    };\n\n    var error = function (err) {\n      if (err && err.isCanceled) return;\n      var status = 'error',\n          rejection = null;\n\n      if (err) {\n        rejection = err && err.message;\n        var type = err && err.type;\n\n        if (type == 2 && err.redirected === true) {\n          status = 'redirected';\n          var targetState = err['detail'];\n          var toState = targetState.name();\n          var toParams = JSON.stringify(targetState.params());\n          rejection = maxLength(100, toState + \"(\" + toParams) + ')';\n        }\n\n        if (type == 5) {\n          status = 'ignored';\n          rejection = 'All states and parameters in the To and From paths are identical.';\n        }\n      }\n\n      _this.setState({\n        status: status,\n        rejection: rejection,\n        message: null\n      });\n    };\n\n    this.transitionPromise = makeCancelable(trans.promise);\n    this.transitionPromise.promise.then(success, error);\n  };\n\n  TransitionView.prototype.componentWillUnmount = function () {\n    this.transitionPromise.cancel();\n\n    if (this.state.deregisterFunctions) {\n      this.state.deregisterFunctions.forEach(function (fn) {\n        return fn();\n      });\n    }\n  };\n\n  TransitionView.prototype.render = function () {\n    return v(\"div\", {\n      onMouseEnter: this.open,\n      onMouseLeave: this.close\n    }, v(TransitionPopover, {\n      transition: this.props.transition,\n      status: this.state.status,\n      rejection: this.state.rejection,\n      pinned: this.state.pinned,\n      expanded: this.state.expanded,\n      open: this.state.open,\n      togglePinned: this.togglePin,\n      toggleExpand: this.toggleExpand\n    }), v(BreadcrumbArrow, {\n      transition: this.props.transition,\n      status: this.state.status,\n      message: this.state.message,\n      toggleExpand: this.toggleExpand\n    }));\n  };\n\n  return TransitionView;\n}(d);\n\nvar css_248z$1 = \"/*\\n    .uirTranVis_history is the breadcrumbs and transition details block.\\n    It fills the footer of the screen, and scrolls horizontally.\\n    Mouse clicks should pass through to the elements underneath.\\n*/\\n\\n.uirTranVis_history {\\n    display: flex;\\n    align-items: flex-end;\\n    position: fixed;\\n    left: 0;\\n    bottom: 0;\\n    right: 0;\\n    padding: 0 16px;\\n    overflow-x: scroll;\\n    z-index: 999;\\n    /* disable mouse clicks, hover, etc, for the overall div */\\n    pointer-events: none;\\n}\\n\\n.uirTranVis_history > * {\\n    /* Enable mouse for any sub-elements (the breadcrumb elemetns and detail elements) */\\n    pointer-events: all;\\n    flex: 0 0 auto;\\n}\\n\\n/*  workaround for modal screen, and chrome and safari not allowing it to be\\n    visible outside the .uirTranVis_history overflow while the .uirTranVis_history div is scrolled */\\n.fullScreen .uirTranVis_history {\\n    top: 0;\\n}\\n\\n/* A single history entry (breadcrumb) arrow looking thing */\\n.uirTranVis_history .uirTranVis_historyEntry {\\n    position: relative;\\n    text-align: center;\\n    padding: 12px 30px;\\n    margin-bottom: 6px;\\n    margin-right: 6px;\\n    color: #000;\\n    cursor: pointer;\\n}\\n\\n\\n/* History entry arrow CSS */\\n.uirTranVis_history .uirTranVis_historyEntry:before,.uirTranVis_historyEntry:after {\\n    content: '';\\n    position: absolute;\\n    background: darkgrey;\\n    left: 0;\\n    height: 50.2%; /* +0.2% so firefox doesn't render a white line down the center */\\n    width: 100%;\\n    border: 1px solid black;\\n    box-sizing: border-box;\\n    z-index: -1;\\n}\\n\\n.uirTranVis_history .uirTranVis_historyEntry:before {\\n    top: 0;\\n    border-bottom: 0;\\n    -webkit-transform: skew(40deg, 0deg);\\n    -ms-transform: skew(40deg, 0deg);\\n    transform: skew(40deg, 0deg);\\n}\\n\\n.uirTranVis_history .uirTranVis_historyEntry:after {\\n    bottom: 0;\\n    border-top: 0;\\n    -webkit-transform: skew(-40deg, 0deg);\\n    -ms-transform: skew(-40deg, 0deg);\\n    transform: skew(-40deg, 0deg);\\n}\\n\\n/*.uirTranVis_historyEntry::before height: 51% (|| ::after) */\\n\\n/* Styling for breadcrumb contents */\\n.uirTranVis_historyEntry .uirTranVis_historyEntrySummary {\\n    color: white;\\n    white-space: nowrap;\\n    font-size: small;\\n}\\n.uirTranVis_historyEntry .uirTranVis_historyEntrySummary .uirTranVis_transId {\\n    position: absolute;\\n    top: 3px;\\n    left: 10px;\\n    font-size: smaller;\\n}\\n.uirTranVis_historyEntry .uirTranVis_historyEntrySummary .uirTranVis_status {\\n    position: absolute;\\n    bottom: 3px;\\n    left: 10px;\\n    font-size: smaller;\\n}\\n.uirTranVis_historyEntry .uirTranVis_historyEntrySummary .uirTranVis_transName {\\n    font-weight: bold;\\n    display: flex;\\n    flex-flow: row nowrap;\\n    align-items: center;\\n    justify-content: center\\n}\\n.uirTranVis_historyEntry .uirTranVis_historyEntrySummary .uirTranVis_transName span {\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    direction: rtl;\\n}\\n\\n.uirTranVis_transSummary {\\n    margin: 8px 0;\\n}\\n.uirTranVis_transSummary .uirTranVis_summaryHeading {\\n    background-color: #f5f5f5;\\n    margin: 8px -16px;\\n    padding: 4px 16px;\\n}\\n.uirTranVis_transSummary .uirTranVis_summaryData {\\n    display: flex;\\n    flex-flow: row nowrap;\\n    align-items: baseline;\\n}\\n.uirTranVis_transSummary .uirTranVis_summaryData span {\\n    min-width: 60px;\\n    text-align: right;\\n    padding-right: 6px;\\n}\\n.uirTranVis_transSummary .uirTranVis_summaryData strong {\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    direction: rtl;\\n}\\n\\n.uirTranVis_history .uirTranVis_code {\\n    padding: 0px 2px;\\n    color: black;\\n    background: #e6e6e6;\\n    margin: 0;\\n    font-family: monospace;\\n}\\n\\n/* breadcrumb/history entry color coding */\\n.uirTranVis_history .uirTranVis_historyEntry:before,.uirTranVis_historyEntry:after {\\n    background: #737373;\\n}\\n.uirTranVis_history .uirTranVis_historyEntry:hover:before,.uirTranVis_historyEntry:hover:after {\\n    background: #a6a6a6;\\n}\\n\\n.uirTranVis_history .uirTranVis_historyEntry.success:before,.uirTranVis_historyEntry.success:after {\\n    background: #45803b;\\n}\\n.uirTranVis_history .uirTranVis_historyEntry.success:hover:before,.uirTranVis_historyEntry.success:hover:after {\\n    background: #19a600;\\n}\\n\\n\\n.uirTranVis_history .uirTranVis_historyEntry.error:before,.uirTranVis_historyEntry.error:after {\\n    background: #bf1f1d;\\n}\\n.uirTranVis_history .uirTranVis_historyEntry.error:hover:before,.uirTranVis_historyEntry.error:hover:after {\\n    background: #e62622;\\n}\\n\\n\\n.uirTranVis_history .uirTranVis_historyEntry.ignored:before,.uirTranVis_historyEntry.ignored:after {\\n    background: #e68b05;\\n}\\n.uirTranVis_history .uirTranVis_historyEntry.ignored:hover:before,.uirTranVis_historyEntry.ignored:hover:after {\\n    background: #ff9808;\\n}\\n\\n.uirTranVis_history .uirTranVis_historyEntry.redirected:before,.uirTranVis_historyEntry.redirected:after {\\n    background: #e68b05;\\n}\\n.uirTranVis_history .uirTranVis_historyEntry.redirected:hover:before,.uirTranVis_historyEntry.redirected:hover:after {\\n    background: #ff9808;\\n}\\n\\n.uirTranVis_history .uirTranVis_keyValue {\\n    display: flex;\\n    flex-flow: row nowrap;\\n    justify-content: space-between;\\n    align-items: baseline;\\n}\\n\\n.uirTranVis_history .uirTranVis_keyValue + .uirTranVis_keyValue {\\n    margin-top: 3px;\\n}\\n\\n\\n\\n\\n/* The transition detail popover (when hovering over a breadcrumb) */\\n.uirTranVis_transitionDetail {\\n    border: 1px solid lightgrey;\\n    font-size: small;\\n    transition: box-shadow 0.5s ease,  border 1.0s ease\\n}\\n\\n/* Pointer element points from the uirTranVis_transitionDetail to the breadcrumb */\\n.uirTranVis_transitionDetail .uirTranVis_downArrow {\\n    position: relative;\\n    width: 100%;\\n    bottom: -10px;\\n    margin-bottom: 10px;\\n}\\n\\n.uirTranVis_transitionDetail .uirTranVis_downArrow:before, .uirTranVis_transitionDetail .uirTranVis_downArrow:after {\\n    content: \\\"\\\";\\n    position: absolute;\\n    border-left: 10px solid transparent;\\n    border-right: 10px solid transparent;\\n    top: 100%;\\n    left: 50%;\\n    margin-left: -10px;\\n}\\n\\n.uirTranVis_transitionDetail .uirTranVis_downArrow:before {\\n    border-top: 10px solid lightgray;\\n}\\n\\n.uirTranVis_transitionDetail .uirTranVis_downArrow:after{\\n    border-top: 10px solid white;\\n    margin-top: -1px;\\n    z-index: 1;\\n}\\n\\n\\n/* The layout and styling of the transition detail popover */\\n/*.uirTranVis_transitionDetail .panel-heading {*/\\n    /*text-align: center;*/\\n/*}*/\\n\\n.uirTranVis_transitionDetail table {\\n    border-collapse: collapse;\\n}\\n\\n.uirTranVis_transitionDetail th {\\n    text-align: center;\\n    font-size: small;\\n}\\n\\n.uirTranVis_transitionDetail .uirTranVis_heading {\\n    display: flex;\\n    flex-flow: row-reverse nowrap;\\n    justify-content: space-between;\\n    align-items: baseline;\\n}\\n\\n.uirTranVis_transitionDetail .uirTranVis_heading > *  {\\n    flex: 0 1 auto;\\n}\\n\\n.uirTranVis_transitionDetail .uirTranVis_heading > * i {\\n    transition: all 0.5s ease;\\n}\\n\\n.uirTranVis_transitionDetail table.uirTranVis_paths {\\n    width: 100%;\\n}\\n\\n.uirTranVis_transitionDetail table.uirTranVis_paths td {\\n    color: white;\\n    border: 0;\\n    font-size: small;\\n}\\n\\n.uirTranVis_transitionDetail .uirTranVis_transSummary .uirTranVis_keyValue > div:nth-child(2){\\n    padding-left: 8px;\\n    font-weight: normal;\\n}\\n\\n\\n.uirTranVis_transitionDetail td {\\n    padding: 0;\\n}\\n\\n.uirTranVis_transitionDetail td .flowArrowCell {\\n    display: flex;\\n    flex-flow: column nowrap;\\n    align-items: stretch;\\n    justify-content: space-between;\\n    width: 12px;\\n    transition: width 0.25s ease;\\n    height: auto;\\n    flex: 0 0 auto;\\n}\\n.uirTranVis_transitionDetail.expand td .flowArrowCell { width: 24px; }\\n\\n.uirTranVis_transitionDetail .exit  .flowArrowSvg          { right: 0; }\\n.uirTranVis_transitionDetail .enter .flowArrowSvg          { left: 0; }\\n.uirTranVis_transitionDetail        .flowArrowSvg.bottom   { bottom: 0 }\\n.uirTranVis_transitionDetail        .flowArrowSvg.top      { top: 0 }\\n.uirTranVis_transitionDetail        .flowArrowSvg {\\n    position: absolute;\\n    width: 100%;\\n    height: auto;\\n    transition: width 0.25s ease;\\n}\\n\\n/* color code path elements by retained/exited/entered */\\n.uirTranVis_transitionDetail .retain {\\n    background-color: #737273;\\n}\\n\\n.uirTranVis_transitionDetail .exit {\\n    background-color: #7c1010;\\n}\\n\\n.uirTranVis_transitionDetail .enter {\\n    background-color: #31592a;\\n}\\n\\n.uirTranVis_transitionDetail .uirTranVis_deemphasize {\\n    color: #eaeaea;\\n    font-size: x-small;\\n}\\n\\n/* Styling for parameter values and resolve values */\\n.uirTranVis_transitionDetail .params {\\n    background-color: rgba(255,255,255,0.15);\\n    padding: 0;\\n    opacity: 0;\\n    overflow: hidden;\\n    transition: opacity 1s ease;\\n    max-height: 0;\\n}\\n\\n.uirTranVis_transitionDetail.expand .params {\\n    display: block;\\n    border-radius: 4px;\\n    box-shadow: 1px 1px 2px black;\\n    padding: 8px;\\n    max-height: 250px;\\n    overflow-y: auto;\\n    opacity: 1;\\n    margin: 8px 0;\\n}\\n\\n.uirTranVis_transitionDetail.pin {\\n    box-shadow: 4px 4px 12px rgba(0,0,0,0.3);\\n    border: 1px solid black;\\n}\\n\\n.uirTranVis_transitionDetail.pin .uirTranVis_downArrow:before {\\n    border-top-color: black;\\n}\\n\\n\\n/* When showing expanded details, put space between path elements */\\n.uirTranVis_transitionDetail.expand table.uirTranVis_paths td {\\n    max-height: 100px;\\n    vertical-align: top;\\n}\\n\\n.uirTranVis_transitionDetail .uirTranVis_Row {\\n    display: flex;\\n    flex-flow: row nowrap;\\n    justify-content: space-between;\\n    align-items: stretch;\\n    min-width: 400px;\\n}\\n\\n.uirTranVis_transitionDetail .uirTranVis_Row > div {\\n    flex: 1 0 50%;\\n    min-width: 0;\\n}\\n\\n.uirTranVis_transitionDetail .uirTranVis_nodeContent {\\n    display: flex;\\n    flex-flow: row nowrap;\\n    min-height: 16px;\\n    transition: min-height 0.25s ease;\\n}\\n\\n.uirTranVis_transitionDetail.expand .uirTranVis_nodeContent {\\n    height: 100%;\\n    min-height: 65px;\\n}\\n\\n.uirTranVis_transitionDetail .uirTranVis_nodeDetail {\\n    flex: 1 1 auto;\\n    padding: 3px 7px;\\n    min-width: 0;\\n}\\n\\n.uirTranVis_transitionDetail .uirTranVis_stateName {\\n    font-weight: bolder;\\n    margin-right: 16px;\\n    margin-left: 0;\\n}\\n.uirTranVis_transitionDetail .enter .uirTranVis_stateName {\\n    margin-right: 0;\\n    margin-left: 16px;\\n}\\n\\n.uirTranVis_transitionDetail .uirTranVis_nowrap {\\n    white-space: nowrap;\\n}\\n\\n.uirTranVis_history .uirTranVis_paramsLabel,\\n.uirTranVis_history .uirTranVis_resolveLabel {\\n    color: white;\\n    margin-top: -8px;\\n    text-align: center;\\n    font-weight: bold;\\n}\\n\\n\\nspan.link {\\n    cursor: pointer;\\n    text-decoration: underline;\\n}\\n\\n\\n.uirTranVis_tooltipRight {\\n    display: inline;\\n    position: relative;\\n    transition: all 1.5s ease;\\n}\\n\\n.uirTranVis_tooltipRight:after {\\n    color: rgba(0,0,0,0);\\n    text-decoration: none;\\n    transition: all 1.5s ease;\\n}\\n\\n.uirTranVis_tooltipRight:hover:after {\\n    bottom: 0;\\n    color: rgba(0,0,0,0.5);\\n    content: attr(title);\\n    display: block;\\n    position: absolute;\\n    white-space: nowrap;\\n    font-size: smaller;\\n}\\n\\n\\n\\n/* Bootstrap stuff */\\n\\n.uirTranVis_modal .uirTranVis_btnPrimary {\\n    color: #fff;\\n    background-color: #337ab7;\\n    border-color: #2e6da4;\\n}\\n\\n.uirTranVis_modal .uirTranVis_btn {\\n    display: inline-block;\\n    padding: 6px 12px;\\n    margin-bottom: 0;\\n    font-size: 14px;\\n    font-weight: normal;\\n    line-height: 1.42857143;\\n    text-align: center;\\n    white-space: nowrap;\\n    vertical-align: middle;\\n    -ms-touch-action: manipulation;\\n    touch-action: manipulation;\\n    cursor: pointer;\\n    -webkit-user-select: none;\\n    -moz-user-select: none;\\n    -ms-user-select: none;\\n    user-select: none;\\n    background-image: none;\\n    border: 1px solid transparent;\\n    border-radius: 4px;\\n}\\n\\n.uirTranVis_modal .uirTranVis_btnXs, .uirTranVis_btnGroupXs > .uirTranVis_btn {\\n    padding: 1px 5px;\\n    font-size: 12px;\\n    line-height: 1.5;\\n    border-radius: 3px;\\n}\\n\\n.uirTranVis_transition {\\n    max-width: 550px;\\n}\\n\\n.uirTranVis_transitionDetail span.link {\\n    color: white;\\n}\\n\\n.uirTranVis_history *:not(.fa):not(pre):not(.uirTranVis_code) {\\n    font-family: Arial, Helvetica, sans-serif;\\n}\\n\\n.uirTranVis_transitionDetail .enter .uirTranVis_heading {\\n    flex-flow: row nowrap;\\n}\\n.uirTranVis_transitionDetail .uirTranVis_heading {\\n    display: flex;\\n    flex-flow: row-reverse nowrap;\\n    justify-content: space-between;\\n    align-items: baseline;\\n}\\n\\n.uirTranVis_transitionDetail .retain .uirTranVis_heading {\\n    justify-content: center;\\n}\\n\\n.uirTranVis_panel {\\n    margin-bottom: 20px;\\n    background-color: #fff;\\n    border: 1px solid lightgrey;\\n    border-radius: 4px;\\n    -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, .05);\\n    box-shadow: 0 1px 1px rgba(0, 0, 0, .05);\\n}\\n\\n.uirTranVis_panelHeading {\\n    color: #333;\\n    background-color: #f5f5f5;\\n    border-color: #ddd;\\n\\n    padding: 10px 16px;\\n    border-bottom: 1px solid transparent;\\n    border-top-left-radius: 3px;\\n    border-top-right-radius: 3px;\\n}\\n\\n.uirTranVis_panelTitle {\\n    margin-top: 0;\\n    margin-bottom: 0;\\n    font-size: 16px;\\n    color: inherit;\\n}\\n\\n.uirTranVis_panelBody {\\n    padding: 0 16px;\\n}\\n\\n\\n\\n\\n\\n/* Styles go here */\\n.uir-fade {\\n    opacity: 0;\\n    -webkit-transition: opacity .15s linear;\\n    -o-transition: opacity .15s linear;\\n    transition: opacity .15s linear;\\n}\\n\\n.uir-fade.in {\\n    opacity: 1;\\n}\\n\\n.uirTranVis_modal-backdrop {\\n    position: fixed;\\n    top: 0;\\n    right: 0;\\n    bottom: 0;\\n    left: 0;\\n    z-index: 1040;\\n    background-color: #000;\\n}\\n\\n.uirTranVis_modal-backdrop.in {\\n    filter: alpha(opacity=50);\\n    opacity: .5;\\n}\\n\\n.uirTranVis_modal {\\n    position: fixed;\\n    top: 0;\\n    right: 0;\\n    bottom: 0;\\n    left: 0;\\n    z-index: 1050;\\n    display: block;\\n    overflow-y: auto;\\n    -webkit-overflow-scrolling: touch;\\n    outline: 0;\\n}\\n\\n\\n.uirTranVis_modal-dialog {\\n    position: relative;\\n    width: auto;\\n    margin: 10px;\\n}\\n\\n.uirTranVis_modal-content {\\n    position: relative;\\n    background-color: #fff;\\n    -webkit-background-clip: padding-box;\\n    background-clip: padding-box;\\n    border: 1px solid #999;\\n    border: 1px solid rgba(0, 0, 0, .2);\\n    border-radius: 6px;\\n    outline: 0;\\n    -webkit-box-shadow: 0 3px 9px rgba(0, 0, 0, .5);\\n    box-shadow: 0 3px 9px rgba(0, 0, 0, .5);\\n}\\n\\n.uirTranVis_modal-header {\\n    padding: 16px;\\n    border-bottom: 1px solid #e5e5e5;\\n}\\n\\n.uir-resolve-header {\\n    display: flex;\\n    flex-flow: row nowrap;\\n    justify-content: space-between;\\n    background-color: cornflowerblue;\\n}\\n\\n.uirTranVis_modalBody {\\n    color: black;\\n    position: relative;\\n    padding: 16px;\\n}\\n\\n.uirTranVis_modalFooter {\\n    padding: 16px;\\n    text-align: right;\\n    border-top: 1px solid #e5e5e5;\\n}\\n\\n.uir-icon {\\n    display: inline-block;\\n    height: 16px; width: 16px;\\n    margin: 4px;\\n    background-size: cover;\\n    background-position: 0 0;\\n}\\n\\n.uir-spin {\\n    animation: uirspin 2s infinite;\\n    transform: rotate(0deg);\\n}\\n\\n.uir-rotate-35 {\\n    transform: rotate(35deg);\\n    opacity: 0.5;\\n}\\n\\n@keyframes uirspin {\\n    0% { transform: rotate(0deg); }\\n    100% { transform: rotate(360deg); }\\n}\\n\\n\\n.uir-iconw-spinner       { background-image: url(\\\"../../images/w/16/spinner.png\\\"); }\\n.uir-iconw-check         { background-image: url(\\\"../../images/w/16/check.png\\\"); }\\n.uir-iconw-circle-o      { background-image: url(\\\"../../images/w/16/circle-o.png\\\"); }\\n.uir-iconw-share         { background-image: url(\\\"../../images/w/16/share.png\\\"); }\\n.uir-iconw-close         { background-image: url(\\\"../../images/w/16/close.png\\\"); }\\n\\n.uir-icon-thumb-tack     { background-image: url(\\\"../../images/16/thumb-tack.png\\\"); }\\n.uir-icon-toggle-on      { background-image: url(\\\"../../images/16/toggle-on.png\\\"); }\\n.uir-icon-toggle-off     { background-image: url(\\\"../../images/16/toggle-off.png\\\"); }\\n\";\nstyleInject(css_248z$1);\n/**\n * This outer component manages the list of all transitions (history), and provides a fixed, scrolling viewport.\n * It attaches hooks for lifecycle events and decorates the transition with a descriptive message.\n */\n\nvar TransitionVisualizer =\n/** @class */\nfunction (_super) {\n  __extends(TransitionVisualizer, _super);\n\n  function TransitionVisualizer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.deregisterFns = [];\n    _this.state = {\n      transitions: [],\n      pointerEvents: 'auto'\n    };\n    _this.cancelPreviousAnim = null;\n    /**\n     * Disable pointer events when the mouse is above the timeline\n     *\n     * This allows clicks to pass through the outer div to the user's app components\n     * even when a transitionview details box is open and pinned.\n     *\n     * Enable pointer events when mouse is inside the timeline to allow horizontal scroll & scroll wheel\n     */\n\n    _this.onMouseMove = function (evt) {\n      var windowHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n      var pointerEvents = windowHeight - evt.clientY < 65 ? 'auto' : 'none';\n\n      if (_this.state.pointerEvents != pointerEvents) {\n        _this.setState({\n          pointerEvents: pointerEvents\n        });\n      }\n    };\n\n    return _this;\n  }\n  /**\n   * Creates a new TransitionVisualizer and adds it to the document.\n   *\n   * @param router the UIRouter object\n   * @param element (optional) the element where the TransitionVisualizer should be placed.\n   *                If no element is passed, an element will be created in the body.\n   * @param props maximum transitions default: { maximumTransitions: 15 }\n   *\n   *\n   * # Angular 1 + UI-Router (1.0.0-beta.2 and higher):\n   *\n   * Inject the router (`$uiRouter`) in a run block, then call TransitionVisualizer.create();\n   *\n   * ```\n   * app.run(function($uiRouter) {\n   *   TransitionVisualizer.create($uiRouter);\n   * });\n   * ```\n   *\n   * # Angular 1 + UI-Router 1.0.0-alpha.1 through 1.0.0-beta.1:\n   *\n   * Inject the router (`ng1UIRouter`) in a run block, then call TransitionVisualizer.create();\n   *\n   * ```\n   * app.run(function(ng1UIRouter) {\n   *   TransitionVisualizer.create(ng1UIRouter);\n   * });\n   * ```\n   *\n   * Angular 2:\n   *\n   * Call TransitionVisualizer.create() from your UIRouterConfig\n   *\n   * ```\n   * export class MyUIRouterConfig extends UIRouterConfig {\n   *   configure(router: UIRouter) {\n   *     TransitionVisualizer.create(router);\n   *   }\n   * }\n   * ```\n   *\n   * React:\n   *\n   * Call TransitionVisualizer.create() from your bootstrap\n   *\n   * ```\n   * let router = new UIRouterReact();\n   * TransitionVisualizer.create(router);\n   * router.start();\n   * ```\n   *\n   * @return the element that was bootstrapped.\n   *         You can destroy the component using:\n   *         [ReactDOM.unmountComponentAtNode](https://facebook.github.io/react/docs/top-level-api.html#reactdom.unmountcomponentatnode)\n   */\n\n\n  TransitionVisualizer.create = function (router, element, props) {\n    if (props === void 0) {\n      props = {};\n    }\n\n    if (!element) {\n      element = document.createElement('div');\n      element.id = 'uirTransitionVisualizer';\n    }\n\n    var initialProps = Object.assign({}, props, {\n      router: router\n    });\n\n    var _render = function () {\n      document.body.appendChild(element);\n      M(v(TransitionVisualizer, initialProps), element);\n    };\n\n    if (document.readyState === 'interactive' || document.readyState === 'complete') {\n      _render();\n    } else {\n      document.addEventListener('DOMContentLoaded', _render, false);\n    }\n\n    return element;\n  };\n\n  TransitionVisualizer.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var dereg = this.props.router.transitionService.onBefore({}, function (trans) {\n      _this.setState({\n        transitions: _this.state.transitions.concat(trans)\n      });\n\n      var duration = 750,\n          el = _this._div.children[0];\n\n      var scrollToRight = function () {\n        var targetScrollX = el.scrollWidth - el.clientWidth + 200;\n        _this.cancelPreviousAnim && _this.cancelPreviousAnim();\n        var newVal = [targetScrollX],\n            oldVal = [el.scrollLeft];\n        var max = _this.props.maximumTransitions;\n\n        var enforceMax = function () {\n          var list = _this.state.transitions;\n          if (list.length <= max) return;\n\n          _this.setState({\n            transitions: list.slice(list.length - max)\n          });\n        };\n\n        var callback = function (vals) {\n          return el.scrollLeft = vals[0];\n        };\n\n        _this.cancelPreviousAnim = animatePath(newVal, oldVal, duration, callback, enforceMax, easing.easeInOutCubic);\n      };\n\n      setTimeout(scrollToRight, 25);\n    });\n    this.deregisterFns.push(dereg);\n    document.body.addEventListener('mousemove', this.onMouseMove);\n    this.deregisterFns.push(function () {\n      return document.body.removeEventListener('mousemove', _this.onMouseMove);\n    });\n  };\n\n  TransitionVisualizer.prototype.componentWillUnmount = function () {\n    while (this.deregisterFns.length) this.deregisterFns.pop()();\n  };\n\n  TransitionVisualizer.prototype.render = function () {\n    var _this = this;\n\n    var pointerEvents = this.state.pointerEvents;\n    return v(\"div\", {\n      ref: function (el) {\n        return _this._div = el;\n      }\n    }, v(\"div\", {\n      className: \"uirTranVis_history\",\n      style: {\n        pointerEvents: pointerEvents\n      }\n    }, this.state.transitions.map(function (trans) {\n      return v(\"div\", {\n        key: trans.$id,\n        className: \"uirTranVis_transition\"\n      }, v(TransitionView, {\n        transition: trans\n      }), v(\"div\", {\n        style: {\n          minWidth: '18em',\n          border: '1px solid transparent'\n        }\n      }));\n    }), v(\"div\", {\n      style: {\n        width: '200px',\n        height: '1px'\n      }\n    })));\n  };\n\n  TransitionVisualizer.defaultProps = {\n    router: null,\n    maximumTransitions: 15\n  };\n  return TransitionVisualizer;\n}(d);\n\nvar visualizer = function (router) {\n  return new Visualizer(router, {});\n};\n\nfunction unmountComponent(node) {\n  var Nothing = function () {\n    return null;\n  };\n\n  M(v(Nothing, null), document.body, node);\n}\n\nvar DEFAULTS = {\n  state: true,\n  stateVisualizer: {},\n  transition: true\n};\n\nvar Visualizer =\n/** @class */\nfunction () {\n  function Visualizer(router, options) {\n    this.router = router;\n    this.name = 'visualizer';\n    options = Object.assign({}, DEFAULTS, options);\n\n    if (options.state) {\n      this.stateVisualizerEl = StateVisualizer.create(router, undefined, undefined, options.stateVisualizer);\n    }\n\n    if (options.transition) {\n      this.transitionVisualizerEl = TransitionVisualizer.create(router);\n    }\n  }\n\n  Visualizer.prototype.dispose = function (router) {\n    this.stateVisualizerEl && unmountComponent(this.stateVisualizerEl);\n    this.transitionVisualizerEl && unmountComponent(this.transitionVisualizerEl);\n    this.stateVisualizerEl = null;\n    this.transitionVisualizerEl = null;\n  };\n\n  return Visualizer;\n}();\n\nexport { StateSelector, StateTree, StateVisualizer, TransitionVisualizer, Visualizer, visualizer };","map":{"version":3,"sources":["../node_modules/preact/dist/preact.module.js","../node_modules/tslib/tslib.es6.js","../src/selector/src/src/selector/StateSelector.tsx","../src/util/src/src/util/toggleClass.ts","../src/util/src/src/util/draggable.ts","../src/statevis/tree/src/src/statevis/tree/StateNode.tsx","../src/util/src/src/util/easing.ts","../node_modules/d3-color/src/define.js","../node_modules/d3-color/src/color.js","../node_modules/d3-interpolate/src/constant.js","../node_modules/d3-interpolate/src/color.js","../node_modules/d3-interpolate/src/rgb.js","../node_modules/d3-interpolate/src/numberArray.js","../node_modules/d3-interpolate/src/array.js","../node_modules/d3-interpolate/src/date.js","../node_modules/d3-interpolate/src/number.js","../node_modules/d3-interpolate/src/object.js","../node_modules/d3-interpolate/src/string.js","../node_modules/d3-interpolate/src/value.js","../src/util/src/src/util/animatepath.ts","../node_modules/d3-hierarchy/src/cluster.js","../node_modules/d3-hierarchy/src/hierarchy/count.js","../node_modules/d3-hierarchy/src/hierarchy/each.js","../node_modules/d3-hierarchy/src/hierarchy/eachBefore.js","../node_modules/d3-hierarchy/src/hierarchy/eachAfter.js","../node_modules/d3-hierarchy/src/hierarchy/find.js","../node_modules/d3-hierarchy/src/hierarchy/sum.js","../node_modules/d3-hierarchy/src/hierarchy/sort.js","../node_modules/d3-hierarchy/src/hierarchy/path.js","../node_modules/d3-hierarchy/src/hierarchy/ancestors.js","../node_modules/d3-hierarchy/src/hierarchy/descendants.js","../node_modules/d3-hierarchy/src/hierarchy/leaves.js","../node_modules/d3-hierarchy/src/hierarchy/links.js","../node_modules/d3-hierarchy/src/hierarchy/iterator.js","../node_modules/d3-hierarchy/src/hierarchy/index.js","../node_modules/d3-hierarchy/src/tree.js","../src/statevis/src/src/statevis/renderers.tsx","../src/statevis/tree/src/src/statevis/tree/stateVisNode.tsx","../src/statevis/tree/src/src/statevis/tree/StateTree.tsx","../src/statevis/src/src/statevis/LayoutPrefs.tsx","../src/statevis/icons/src/src/statevis/icons/ChevronDown.tsx","../src/statevis/icons/src/src/statevis/icons/Close.tsx","../src/statevis/icons/src/src/statevis/icons/Gear.tsx","../src/statevis/icons/src/src/statevis/icons/Help.tsx","../src/statevis/src/src/statevis/Controls.tsx","../src/statevis/src/src/statevis/StateVisWindow.tsx","../node_modules/style-inject/dist/style-inject.es.js","../src/statevis/src/src/statevis/StateVisualizer.tsx","../src/transition/src/src/transition/PopoverHeading.tsx","../src/util/src/src/util/modal.tsx","../src/util/src/src/util/pretty.tsx","../src/transition/src/src/transition/ResolveData.tsx","../src/util/src/src/util/strings.ts","../src/transition/src/src/transition/KeysAndValues.tsx","../src/transition/src/src/transition/TransSummary.tsx","../src/transition/src/src/transition/NodeDetail.tsx","../src/transition/src/src/transition/FlowArrow.tsx","../src/transition/src/src/transition/NodePaths.tsx","../src/transition/src/src/transition/TransitionPopover.tsx","../src/transition/src/src/transition/BreadcrumbArrow.tsx","../src/util/src/src/util/cancelablePromise.ts","../src/transition/src/src/transition/TransitionView.tsx","../src/transition/src/src/transition/TransitionVisualizer.tsx","../src/src/src/visualizer.ts"],"names":["Component","h","rgb","colorRgb","defaultSeparation","render"],"mappings":"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","sourcesContent":["var n,l,u,i,t,o,r,f={},e=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function s(n,l){for(var u in l)n[u]=l[u];return n}function a(n){var l=n.parentNode;l&&l.removeChild(n)}function v(n,l,u){var i,t,o,r=arguments,f={};for(o in l)\"key\"==o?i=l[o]:\"ref\"==o?t=l[o]:f[o]=l[o];if(arguments.length>3)for(u=[u],o=3;o<arguments.length;o++)u.push(r[o]);if(null!=u&&(f.children=u),\"function\"==typeof n&&null!=n.defaultProps)for(o in n.defaultProps)void 0===f[o]&&(f[o]=n.defaultProps[o]);return h(n,f,i,t,null)}function h(l,u,i,t,o){var r={type:l,props:u,key:i,ref:t,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o};return null==o&&(r.__v=r),null!=n.vnode&&n.vnode(r),r}function y(){return{current:null}}function p(n){return n.children}function d(n,l){this.props=n,this.context=l}function _(n,l){if(null==l)return n.__?_(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?_(n):null}function w(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return w(n)}}function k(l){(!l.__d&&(l.__d=!0)&&u.push(l)&&!m.__r++||t!==n.debounceRendering)&&((t=n.debounceRendering)||i)(m)}function m(){for(var n;m.__r=u.length;)n=u.sort(function(n,l){return n.__v.__b-l.__v.__b}),u=[],n.some(function(n){var l,u,i,t,o,r,f;n.__d&&(r=(o=(l=n).__v).__e,(f=l.__P)&&(u=[],(i=s({},o)).__v=i,t=T(f,o,i,l.__n,void 0!==f.ownerSVGElement,null,u,null==r?_(o):r),$(u,o),t!=r&&w(o)))})}function g(n,l,u,i,t,o,r,c,s,v){var y,d,w,k,m,g,b,A=i&&i.__k||e,P=A.length;for(s==f&&(s=null!=r?r[0]:P?_(i,0):null),u.__k=[],y=0;y<l.length;y++)if(null!=(k=u.__k[y]=null==(k=l[y])||\"boolean\"==typeof k?null:\"string\"==typeof k||\"number\"==typeof k?h(null,k,null,null,k):Array.isArray(k)?h(p,{children:k},null,null,null):null!=k.__e||null!=k.__c?h(k.type,k.props,k.key,null,k.__v):k)){if(k.__=u,k.__b=u.__b+1,null===(w=A[y])||w&&k.key==w.key&&k.type===w.type)A[y]=void 0;else for(d=0;d<P;d++){if((w=A[d])&&k.key==w.key&&k.type===w.type){A[d]=void 0;break}w=null}m=T(n,k,w=w||f,t,o,r,c,s,v),(d=k.ref)&&w.ref!=d&&(b||(b=[]),w.ref&&b.push(w.ref,null,k),b.push(d,k.__c||m,k)),null!=m?(null==g&&(g=m),s=x(n,k,w,A,r,m,s),v||\"option\"!=u.type?\"function\"==typeof u.type&&(u.__d=s):n.value=\"\"):s&&w.__e==s&&s.parentNode!=n&&(s=_(w))}if(u.__e=g,null!=r&&\"function\"!=typeof u.type)for(y=r.length;y--;)null!=r[y]&&a(r[y]);for(y=P;y--;)null!=A[y]&&I(A[y],A[y]);if(b)for(y=0;y<b.length;y++)H(b[y],b[++y],b[++y])}function b(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(Array.isArray(n)?n.some(function(n){b(n,l)}):l.push(n)),l}function x(n,l,u,i,t,o,r){var f,e,c;if(void 0!==l.__d)f=l.__d,l.__d=void 0;else if(t==u||o!=r||null==o.parentNode)n:if(null==r||r.parentNode!==n)n.appendChild(o),f=null;else{for(e=r,c=0;(e=e.nextSibling)&&c<i.length;c+=2)if(e==o)break n;n.insertBefore(o,r),f=r}return void 0!==f?f:o.nextSibling}function A(n,l,u,i,t){var o;for(o in u)\"children\"===o||\"key\"===o||o in l||C(n,o,null,u[o],i);for(o in l)t&&\"function\"!=typeof l[o]||\"children\"===o||\"key\"===o||\"value\"===o||\"checked\"===o||u[o]===l[o]||C(n,o,l[o],u[o],i)}function P(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=null==u?\"\":\"number\"!=typeof u||c.test(l)?u:u+\"px\"}function C(n,l,u,i,t){var o,r;if(t&&\"className\"==l&&(l=\"class\"),\"style\"===l)if(\"string\"==typeof u)n.style=u;else{if(\"string\"==typeof i&&(n.style=i=\"\"),i)for(l in i)u&&l in u||P(n.style,l,\"\");if(u)for(l in u)i&&u[l]===i[l]||P(n.style,l,u[l])}else\"o\"===l[0]&&\"n\"===l[1]?(o=l!==(l=l.replace(/Capture$/,\"\")),(r=l.toLowerCase())in n&&(l=r),l=l.slice(2),n.l||(n.l={}),n.l[l]=u,u?i||n.addEventListener(l,z,o):n.removeEventListener(l,z,o)):\"list\"!==l&&\"tagName\"!==l&&\"form\"!==l&&\"type\"!==l&&\"size\"!==l&&\"download\"!==l&&\"href\"!==l&&!t&&l in n?n[l]=null==u?\"\":u:\"function\"!=typeof u&&\"dangerouslySetInnerHTML\"!==l&&(l!==(l=l.replace(/xlink:?/,\"\"))?null==u||!1===u?n.removeAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase()):n.setAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase(),u):null==u||!1===u&&!/^ar/.test(l)?n.removeAttribute(l):n.setAttribute(l,u))}function z(l){this.l[l.type](n.event?n.event(l):l)}function N(n,l,u){var i,t;for(i=0;i<n.__k.length;i++)(t=n.__k[i])&&(t.__=n,t.__e&&(\"function\"==typeof t.type&&t.__k.length>1&&N(t,l,u),l=x(u,t,t,n.__k,null,t.__e,l),\"function\"==typeof n.type&&(n.__d=l)))}function T(l,u,i,t,o,r,f,e,c){var a,v,h,y,_,w,k,m,b,x,A,P=u.type;if(void 0!==u.constructor)return null;(a=n.__b)&&a(u);try{n:if(\"function\"==typeof P){if(m=u.props,b=(a=P.contextType)&&t[a.__c],x=a?b?b.props.value:a.__:t,i.__c?k=(v=u.__c=i.__c).__=v.__E:(\"prototype\"in P&&P.prototype.render?u.__c=v=new P(m,x):(u.__c=v=new d(m,x),v.constructor=P,v.render=L),b&&b.sub(v),v.props=m,v.state||(v.state={}),v.context=x,v.__n=t,h=v.__d=!0,v.__h=[]),null==v.__s&&(v.__s=v.state),null!=P.getDerivedStateFromProps&&(v.__s==v.state&&(v.__s=s({},v.__s)),s(v.__s,P.getDerivedStateFromProps(m,v.__s))),y=v.props,_=v.state,h)null==P.getDerivedStateFromProps&&null!=v.componentWillMount&&v.componentWillMount(),null!=v.componentDidMount&&v.__h.push(v.componentDidMount);else{if(null==P.getDerivedStateFromProps&&m!==y&&null!=v.componentWillReceiveProps&&v.componentWillReceiveProps(m,x),!v.__e&&null!=v.shouldComponentUpdate&&!1===v.shouldComponentUpdate(m,v.__s,x)||u.__v===i.__v){v.props=m,v.state=v.__s,u.__v!==i.__v&&(v.__d=!1),v.__v=u,u.__e=i.__e,u.__k=i.__k,v.__h.length&&f.push(v),N(u,e,l);break n}null!=v.componentWillUpdate&&v.componentWillUpdate(m,v.__s,x),null!=v.componentDidUpdate&&v.__h.push(function(){v.componentDidUpdate(y,_,w)})}v.context=x,v.props=m,v.state=v.__s,(a=n.__r)&&a(u),v.__d=!1,v.__v=u,v.__P=l,a=v.render(v.props,v.state,v.context),v.state=v.__s,null!=v.getChildContext&&(t=s(s({},t),v.getChildContext())),h||null==v.getSnapshotBeforeUpdate||(w=v.getSnapshotBeforeUpdate(y,_)),A=null!=a&&a.type==p&&null==a.key?a.props.children:a,g(l,Array.isArray(A)?A:[A],u,i,t,o,r,f,e,c),v.base=u.__e,v.__h.length&&f.push(v),k&&(v.__E=v.__=null),v.__e=!1}else null==r&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=j(i.__e,u,i,t,o,r,f,c);(a=n.diffed)&&a(u)}catch(l){u.__v=null,n.__e(l,u,i)}return u.__e}function $(l,u){n.__c&&n.__c(u,l),l.some(function(u){try{l=u.__h,u.__h=[],l.some(function(n){n.call(u)})}catch(l){n.__e(l,u.__v)}})}function j(n,l,u,i,t,o,r,c){var s,a,v,h,y,p=u.props,d=l.props;if(t=\"svg\"===l.type||t,null!=o)for(s=0;s<o.length;s++)if(null!=(a=o[s])&&((null===l.type?3===a.nodeType:a.localName===l.type)||n==a)){n=a,o[s]=null;break}if(null==n){if(null===l.type)return document.createTextNode(d);n=t?document.createElementNS(\"http://www.w3.org/2000/svg\",l.type):document.createElement(l.type,d.is&&{is:d.is}),o=null,c=!1}if(null===l.type)p!==d&&n.data!==d&&(n.data=d);else{if(null!=o&&(o=e.slice.call(n.childNodes)),v=(p=u.props||f).dangerouslySetInnerHTML,h=d.dangerouslySetInnerHTML,!c){if(null!=o)for(p={},y=0;y<n.attributes.length;y++)p[n.attributes[y].name]=n.attributes[y].value;(h||v)&&(h&&v&&h.__html==v.__html||(n.innerHTML=h&&h.__html||\"\"))}A(n,d,p,t,c),h?l.__k=[]:(s=l.props.children,g(n,Array.isArray(s)?s:[s],l,u,i,\"foreignObject\"!==l.type&&t,o,r,f,c)),c||(\"value\"in d&&void 0!==(s=d.value)&&s!==n.value&&C(n,\"value\",s,p.value,!1),\"checked\"in d&&void 0!==(s=d.checked)&&s!==n.checked&&C(n,\"checked\",s,p.checked,!1))}return n}function H(l,u,i){try{\"function\"==typeof l?l(u):l.current=u}catch(l){n.__e(l,i)}}function I(l,u,i){var t,o,r;if(n.unmount&&n.unmount(l),(t=l.ref)&&(t.current&&t.current!==l.__e||H(t,null,u)),i||\"function\"==typeof l.type||(i=null!=(o=l.__e)),l.__e=l.__d=void 0,null!=(t=l.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(l){n.__e(l,u)}t.base=t.__P=null}if(t=l.__k)for(r=0;r<t.length;r++)t[r]&&I(t[r],u,i);null!=o&&a(o)}function L(n,l,u){return this.constructor(n,u)}function M(l,u,i){var t,r,c;n.__&&n.__(l,u),r=(t=i===o)?null:i&&i.__k||u.__k,l=v(p,null,[l]),c=[],T(u,(t?u:i||u).__k=l,r||f,f,void 0!==u.ownerSVGElement,i&&!t?[i]:r?null:u.childNodes.length?e.slice.call(u.childNodes):null,c,i||f,t),$(c,l)}function O(n,l){M(n,l,o)}function S(n,l,u){var i,t,o,r=arguments,f=s({},n.props);for(o in l)\"key\"==o?i=l[o]:\"ref\"==o?t=l[o]:f[o]=l[o];if(arguments.length>3)for(u=[u],o=3;o<arguments.length;o++)u.push(r[o]);return null!=u&&(f.children=u),h(n.type,f,i||n.key,t||n.ref,null)}function q(n,l){var u={__c:l=\"__cC\"+r++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n,u,i){return this.getChildContext||(u=[],(i={})[l]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(k)},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n={__e:function(n,l){for(var u,i;l=l.__;)if((u=l.__c)&&!u.__)try{if(u.constructor&&null!=u.constructor.getDerivedStateFromError&&(i=!0,u.setState(u.constructor.getDerivedStateFromError(n))),null!=u.componentDidCatch&&(i=!0,u.componentDidCatch(n)),i)return k(u.__E=u)}catch(l){n=l}throw n}},l=function(n){return null!=n&&void 0===n.constructor},d.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=s({},this.state),\"function\"==typeof n&&(n=n(s({},u),this.props)),n&&s(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),k(this))},d.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),k(this))},d.prototype.render=p,u=[],i=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,m.__r=0,o=f,r=0;export{M as render,O as hydrate,v as createElement,v as h,p as Fragment,y as createRef,l as isValidElement,d as Component,S as cloneElement,q as createContext,b as toChildArray,I as __u,n as options};\n//# sourceMappingURL=preact.module.js.map\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { h, render, Component } from 'preact';\n\nexport interface IProps {\n  router;\n}\n\nexport interface IState {\n  current?: string;\n  states?: string[];\n  deregisterFn?: Function;\n}\n\nexport class StateSelector extends Component<IProps, IState> {\n  deregisterStateListenerFn: Function;\n\n  state = {\n    current: null,\n    states: [],\n    deregisterFn: null,\n  };\n\n  componentDidMount() {\n    let router = this.props.router;\n\n    const updateStates = () => this.setState({ states: router.stateRegistry.get().map(state => state.name) });\n    const updateCurrent = trans => this.setState({ current: trans.to().name });\n\n    if (router.stateRegistry.onStatesChanged) {\n      this.deregisterStateListenerFn = router.stateRegistry.onStatesChanged(updateStates);\n    }\n\n    let deregisterFn = router.transitionService.onSuccess({}, updateCurrent);\n\n    this.setState({ current: router.globals.current.name, states: [], deregisterFn });\n    updateStates();\n  }\n\n  componentWillUnmount() {\n    if (this.state.deregisterFn) {\n      this.state.deregisterFn();\n    }\n    if (this.deregisterStateListenerFn) {\n      this.deregisterStateListenerFn();\n    }\n  }\n\n  selectState = event => {\n    let $state = this.props.router.stateService;\n    var to = event.target.value;\n    if (to) $state.go(to);\n  };\n\n  render() {\n    return (\n      <select value={this.state.current || ''} onChange={this.selectState} style={{ maxWidth: 120 }}>\n        <option value=\"\">Choose a state</option>\n        {this.state.states.map(state => (\n          <option key={state} value={state}>\n            {state}\n          </option>\n        ))}\n      </select>\n    );\n  }\n}\n","export const hasClass = classname => el => !!new RegExp(`\\\\b${classname}\\\\b`).exec(el.className);\n\nexport const addClass = classname => el => (el.className = el.className + ' ' + classname);\n\nexport const removeClass = classname => el =>\n  (el.className = el.className.replace(new RegExp(`\\\\b${classname}\\\\b`, 'g'), ''));\n\nexport const toggleClass = classname => el => {\n  if (hasClass(classname)(el)) removeClass(classname)(el);\n  else addClass(classname)(el);\n};\n","import { addClass } from './toggleClass';\n\nexport interface DragDetails {\n  initialClientX: number;\n  initialClientY: number;\n  lastClientX: number;\n  lastClientY: number;\n  newClientX: number;\n  newClientY: number;\n}\n\nexport interface DragCallback {\n  (el: Element, event: Event, details: DragDetails): void;\n}\n\nconst moveElement = (elementToMove: HTMLElement) =>\n  function _moveElement(elementBeingDragged: HTMLElement, event: MouseEvent, details: DragDetails) {\n    let { initialClientX, initialClientY, lastClientX, lastClientY, newClientX, newClientY } = details;\n\n    let el = elementToMove;\n    let bounds = el.getBoundingClientRect();\n    let { left, top } = bounds;\n    let dx = newClientX - lastClientX;\n    let dy = newClientY - lastClientY;\n\n    el.style.right = 'auto';\n    el.style.bottom = 'auto';\n    el.style.left = left + dx + 'px';\n    el.style.top = top + dy + 'px';\n  };\n\nexport const dragActions = {\n  move: moveElement,\n};\n\nexport function draggable(el, callback: DragCallback) {\n  let enabled = true;\n  let isDragging = false;\n  let initialClientX = 0,\n    initialClientY = 0;\n  let lastClientX = 0,\n    lastClientY = 0;\n\n  const mouseDownListener = (e: MouseEvent) => {\n    if (!enabled) return;\n    isDragging = true;\n\n    lastClientX = initialClientX = e.clientX;\n    lastClientY = initialClientY = e.clientY;\n\n    const dragListener = e => {\n      if (!enabled || !isDragging) return;\n      e.preventDefault();\n      let newClientX = e.clientX,\n        newClientY = e.clientY;\n      callback(el, e, { initialClientX, initialClientY, lastClientX, lastClientY, newClientX, newClientY });\n      lastClientX = newClientX;\n      lastClientY = newClientY;\n    };\n\n    const doneDragging = e => {\n      isDragging = false;\n      document.removeEventListener('mousemove', dragListener);\n      document.removeEventListener('mouseup', doneDragging);\n    };\n\n    document.addEventListener('mousemove', dragListener);\n    document.addEventListener('mouseup', doneDragging);\n  };\n\n  addClass('draggable')(el);\n  el.addEventListener('mousedown', mouseDownListener);\n  return () => el.removeEventListener('mousedown', mouseDownListener);\n}\n","import { h, Component } from 'preact';\nimport { Renderer } from '../interface';\nimport { NodeOptions } from './StateTree';\nimport { StateVisNode } from './stateVisNode';\n\nexport interface IProps {\n  router: any;\n  node: StateVisNode;\n  nodeOptions: NodeOptions;\n  renderer: Renderer;\n  doLayout: Function;\n  x: number;\n  y: number;\n}\n\nexport interface IState {}\nexport class StateNode extends Component<IProps, IState> {\n  goTimeout = null;\n\n  handleCollapseClicked = () => {\n    clearTimeout(this.goTimeout);\n    this.props.node._collapsed = !this.props.node._collapsed;\n    this.props.doLayout();\n  };\n\n  handleGoClicked = () => {\n    clearTimeout(this.goTimeout);\n    let stateName = this.props.node.name;\n    stateName = stateName.replace(/\\.\\*\\*$/, '');\n    this.goTimeout = setTimeout(() => this.props.router.stateService.go(stateName), 200);\n  };\n\n  render() {\n    let renderer = this.props.renderer;\n    let { node, x, y, nodeOptions } = this.props;\n\n    let { baseRadius, baseFontSize, baseNodeStrokeWidth, zoom } = renderer;\n    let r = baseRadius * zoom;\n\n    let fontSize = baseFontSize * zoom;\n    let nodeStrokeWidth = baseNodeStrokeWidth * (node.entered ? 1.5 : 1) * zoom;\n\n    let defaultClasses = ['entered', 'retained', 'exited', 'active', 'inactive', 'future', 'highlight', 'collapsed']\n      .filter((clazz) => node[clazz])\n      .join(' ');\n    let nodeClasses = nodeOptions && nodeOptions.classes ? nodeOptions.classes(node) : '';\n    let circleClasses = defaultClasses + ' ' + nodeClasses;\n    let descendents = node.collapsed ? node.totalDescendents : 0;\n\n    return (\n      <g transform={`translate(${x}, ${y})`} onClick={this.handleGoClicked} onDblClick={this.handleCollapseClicked}>\n        <circle className={circleClasses} stroke-width={nodeStrokeWidth} r={r} />\n\n        {!node.collapsed ? (\n          ''\n        ) : (\n          <text className=\"label\" text-anchor=\"middle\" font-size={fontSize * (descendents < 10 ? 1.0 : 0.8)}>\n            ({descendents})\n          </text>\n        )}\n\n        {renderer.labelRenderFn(x, y, node, nodeOptions, renderer)}\n\n        <text className=\"label\" text-anchor=\"middle\" font-size={fontSize} transform={`translate(0, ${r * 2})`}>\n          {node.label}\n        </text>\n      </g>\n    );\n  }\n}\n","/* ============================================================\n * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/\n *\n * Open source under the BSD License.\n *\n * Copyright © 2008 George McGinley Smith\n * All rights reserved.\n * https://raw.github.com/danro/jquery-easing/master/LICENSE\n * ======================================================== */\n// prettier-ignore\nexport const easing = {\n  // time, begin, change, duration\n  easeInOutQuad: function (t, b, c, d) {\n    if ((t /= d / 2) < 1) return c / 2 * t * t + b;\n    return -c / 2 * ((--t) * (t - 2) - 1) + b;\n  },\n  easeInOutCubic: function (t, b, c, d) {\n    if ((t /= d / 2) < 1) return c / 2 * t * t * t + b;\n    return c / 2 * ((t -= 2) * t * t + 2) + b;\n  },\n  easeInOutQuart: function (t, b, c, d) {\n    if ((t/=d/2) < 1) return c/2*t*t*t*t + b;\n    return -c/2 * ((t-=2)*t*t*t - 2) + b;\n  },\n  easeInOutQuint: function (t, b, c, d) {\n    if ((t/=d/2) < 1) return c/2*t*t*t*t*t + b;\n    return c/2*((t-=2)*t*t*t*t + 2) + b;\n  },\n  easeInOutSine: function (t, b, c, d) {\n    return -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;\n  },\n  easeInOutExpo: function (t, b, c, d) {\n    if (t==0) return b;\n    if (t==d) return b+c;\n    if ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;\n    return c/2 * (-Math.pow(2, -10 * --t) + 2) + b;\n  },\n  easeInOutCirc: function (t, b, c, d) {\n    if ((t/=d/2) < 1) return -c/2 * (Math.sqrt(1 - t*t) - 1) + b;\n    return c/2 * (Math.sqrt(1 - (t-=2)*t) + 1) + b;\n  },\n  easeInElastic: function (t, b, c, d) {\n    var s=1.70158;var p=0;var a=c;\n    if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;\n    if (a < Math.abs(c)) { a=c; var s=p/4; }\n    else var s = p/(2*Math.PI) * Math.asin (c/a);\n    return -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;\n  },\n  easeOutElastic: function (t, b, c, d) {\n    var s=1.70158;var p=0;var a=c;\n    if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;\n    if (a < Math.abs(c)) { a=c; var s=p/4; }\n    else var s = p/(2*Math.PI) * Math.asin (c/a);\n    return a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;\n  },\n  easeInOutElastic: function (t, b, c, d) {\n    var s=1.70158;var p=0;var a=c;\n    if (t==0) return b;  if ((t/=d/2)==2) return b+c;  if (!p) p=d*(.3*1.5);\n    if (a < Math.abs(c)) { a=c; var s=p/4; }\n    else var s = p/(2*Math.PI) * Math.asin (c/a);\n    if (t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;\n    return a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*.5 + c + b;\n  },\n  easeInOutBack: function (t, b, c, d, s) {\n    if (s == undefined) s = 1.70158;\n    if ((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;\n    return c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;\n  },\n};\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","// https://github.com/resin-io/triangular.js\n// http://alexandros.resin.io/angular-d3-svg/\n// MIT License https://opensource.org/licenses/MIT\n\nimport { easing } from './easing';\nimport { interpolateArray } from 'd3-interpolate';\n\n/** This animation code was taken from trangular.js, and is used to interpolate 2 arrays of values using an easing fn */\nexport function animatePath(\n  newValue,\n  oldValue,\n  duration,\n  updateFrame,\n  finishFn = function() {},\n  easeFn = easing.easeOutElastic,\n) {\n  let start = null,\n    interpolate = interpolateArray(oldValue, newValue);\n\n  let step = function(now) {\n    if (duration === -1) return finishFn();\n    if (start == null) start = now;\n    let progress = now - start,\n      percent = 1;\n    if (progress < duration) {\n      requestAnimationFrame(step);\n      percent = easeFn(progress, 0, 1, duration);\n    }\n    updateFrame(interpolate(percent));\n  };\n\n  requestAnimationFrame(step);\n\n  return function cancel() {\n    duration = -1;\n  };\n}\n","function defaultSeparation(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n}\n\nfunction meanX(children) {\n  return children.reduce(meanXReduce, 0) / children.length;\n}\n\nfunction meanXReduce(x, c) {\n  return x + c.x;\n}\n\nfunction maxY(children) {\n  return 1 + children.reduce(maxYReduce, 0);\n}\n\nfunction maxYReduce(y, c) {\n  return Math.max(y, c.y);\n}\n\nfunction leafLeft(node) {\n  var children;\n  while (children = node.children) node = children[0];\n  return node;\n}\n\nfunction leafRight(node) {\n  var children;\n  while (children = node.children) node = children[children.length - 1];\n  return node;\n}\n\nexport default function() {\n  var separation = defaultSeparation,\n      dx = 1,\n      dy = 1,\n      nodeSize = false;\n\n  function cluster(root) {\n    var previousNode,\n        x = 0;\n\n    // First walk, computing the initial x & y values.\n    root.eachAfter(function(node) {\n      var children = node.children;\n      if (children) {\n        node.x = meanX(children);\n        node.y = maxY(children);\n      } else {\n        node.x = previousNode ? x += separation(node, previousNode) : 0;\n        node.y = 0;\n        previousNode = node;\n      }\n    });\n\n    var left = leafLeft(root),\n        right = leafRight(root),\n        x0 = left.x - separation(left, right) / 2,\n        x1 = right.x + separation(right, left) / 2;\n\n    // Second walk, normalizing x & y to the desired size.\n    return root.eachAfter(nodeSize ? function(node) {\n      node.x = (node.x - root.x) * dx;\n      node.y = (root.y - node.y) * dy;\n    } : function(node) {\n      node.x = (node.x - x0) / (x1 - x0) * dx;\n      node.y = (1 - (root.y ? node.y / root.y : 1)) * dy;\n    });\n  }\n\n  cluster.separation = function(x) {\n    return arguments.length ? (separation = x, cluster) : separation;\n  };\n\n  cluster.size = function(x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], cluster) : (nodeSize ? null : [dx, dy]);\n  };\n\n  cluster.nodeSize = function(x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], cluster) : (nodeSize ? [dx, dy] : null);\n  };\n\n  return cluster;\n}\n","function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n","export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n","export default function(callback, that) {\n  var node = this, nodes = [node], children, i, index = -1;\n  while (node = nodes.pop()) {\n    callback.call(that, node, ++index, this);\n    if (children = node.children) {\n      for (i = children.length - 1; i >= 0; --i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  return this;\n}\n","export default function(callback, that) {\n  var node = this, nodes = [node], next = [], children, i, n, index = -1;\n  while (node = nodes.pop()) {\n    next.push(node);\n    if (children = node.children) {\n      for (i = 0, n = children.length; i < n; ++i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  while (node = next.pop()) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n","export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    if (callback.call(that, node, ++index, this)) {\n      return node;\n    }\n  }\n}\n","export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n","export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n","export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n","export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n","export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Don’t include the root’s parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n","export default function*() {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      yield node;\n      if (children = node.children) {\n        for (i = 0, n = children.length; i < n; ++i) {\n          next.push(children[i]);\n        }\n      }\n    }\n  } while (next.length);\n}\n","import node_count from \"./count.js\";\nimport node_each from \"./each.js\";\nimport node_eachBefore from \"./eachBefore.js\";\nimport node_eachAfter from \"./eachAfter.js\";\nimport node_find from \"./find.js\";\nimport node_sum from \"./sum.js\";\nimport node_sort from \"./sort.js\";\nimport node_path from \"./path.js\";\nimport node_ancestors from \"./ancestors.js\";\nimport node_descendants from \"./descendants.js\";\nimport node_leaves from \"./leaves.js\";\nimport node_links from \"./links.js\";\nimport node_iterator from \"./iterator.js\";\n\nexport default function hierarchy(data, children) {\n  if (data instanceof Map) {\n    data = [undefined, data];\n    if (children === undefined) children = mapChildren;\n  } else if (children === undefined) {\n    children = objectChildren;\n  }\n\n  var root = new Node(data),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if ((childs = children(node.data)) && (n = (childs = Array.from(childs)).length)) {\n      node.children = childs;\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = childs[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction objectChildren(d) {\n  return d.children;\n}\n\nfunction mapChildren(d) {\n  return Array.isArray(d) ? d[1] : null;\n}\n\nfunction copyData(node) {\n  if (node.data.value !== undefined) node.value = node.data.value;\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  find: node_find,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy,\n  [Symbol.iterator]: node_iterator\n};\n","import {Node} from \"./hierarchy/index.js\";\n\nfunction defaultSeparation(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n}\n\n// function radialSeparation(a, b) {\n//   return (a.parent === b.parent ? 1 : 2) / a.depth;\n// }\n\n// This function is used to traverse the left contour of a subtree (or\n// subforest). It returns the successor of v on this contour. This successor is\n// either given by the leftmost child of v or by the thread of v. The function\n// returns null if and only if v is on the highest level of its subtree.\nfunction nextLeft(v) {\n  var children = v.children;\n  return children ? children[0] : v.t;\n}\n\n// This function works analogously to nextLeft.\nfunction nextRight(v) {\n  var children = v.children;\n  return children ? children[children.length - 1] : v.t;\n}\n\n// Shifts the current subtree rooted at w+. This is done by increasing\n// prelim(w+) and mod(w+) by shift.\nfunction moveSubtree(wm, wp, shift) {\n  var change = shift / (wp.i - wm.i);\n  wp.c -= change;\n  wp.s += shift;\n  wm.c += change;\n  wp.z += shift;\n  wp.m += shift;\n}\n\n// All other shifts, applied to the smaller subtrees between w- and w+, are\n// performed by this function. To prepare the shifts, we have to adjust\n// change(w+), shift(w+), and change(w-).\nfunction executeShifts(v) {\n  var shift = 0,\n      change = 0,\n      children = v.children,\n      i = children.length,\n      w;\n  while (--i >= 0) {\n    w = children[i];\n    w.z += shift;\n    w.m += shift;\n    shift += w.s + (change += w.c);\n  }\n}\n\n// If vi-’s ancestor is a sibling of v, returns vi-’s ancestor. Otherwise,\n// returns the specified (default) ancestor.\nfunction nextAncestor(vim, v, ancestor) {\n  return vim.a.parent === v.parent ? vim.a : ancestor;\n}\n\nfunction TreeNode(node, i) {\n  this._ = node;\n  this.parent = null;\n  this.children = null;\n  this.A = null; // default ancestor\n  this.a = this; // ancestor\n  this.z = 0; // prelim\n  this.m = 0; // mod\n  this.c = 0; // change\n  this.s = 0; // shift\n  this.t = null; // thread\n  this.i = i; // number\n}\n\nTreeNode.prototype = Object.create(Node.prototype);\n\nfunction treeRoot(root) {\n  var tree = new TreeNode(root, 0),\n      node,\n      nodes = [tree],\n      child,\n      children,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if (children = node._.children) {\n      node.children = new Array(n = children.length);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new TreeNode(children[i], i));\n        child.parent = node;\n      }\n    }\n  }\n\n  (tree.parent = new TreeNode(null, 0)).children = [tree];\n  return tree;\n}\n\n// Node-link tree diagram using the Reingold-Tilford \"tidy\" algorithm\nexport default function() {\n  var separation = defaultSeparation,\n      dx = 1,\n      dy = 1,\n      nodeSize = null;\n\n  function tree(root) {\n    var t = treeRoot(root);\n\n    // Compute the layout using Buchheim et al.’s algorithm.\n    t.eachAfter(firstWalk), t.parent.m = -t.z;\n    t.eachBefore(secondWalk);\n\n    // If a fixed node size is specified, scale x and y.\n    if (nodeSize) root.eachBefore(sizeNode);\n\n    // If a fixed tree size is specified, scale x and y based on the extent.\n    // Compute the left-most, right-most, and depth-most nodes for extents.\n    else {\n      var left = root,\n          right = root,\n          bottom = root;\n      root.eachBefore(function(node) {\n        if (node.x < left.x) left = node;\n        if (node.x > right.x) right = node;\n        if (node.depth > bottom.depth) bottom = node;\n      });\n      var s = left === right ? 1 : separation(left, right) / 2,\n          tx = s - left.x,\n          kx = dx / (right.x + s + tx),\n          ky = dy / (bottom.depth || 1);\n      root.eachBefore(function(node) {\n        node.x = (node.x + tx) * kx;\n        node.y = node.depth * ky;\n      });\n    }\n\n    return root;\n  }\n\n  // Computes a preliminary x-coordinate for v. Before that, FIRST WALK is\n  // applied recursively to the children of v, as well as the function\n  // APPORTION. After spacing out the children by calling EXECUTE SHIFTS, the\n  // node v is placed to the midpoint of its outermost children.\n  function firstWalk(v) {\n    var children = v.children,\n        siblings = v.parent.children,\n        w = v.i ? siblings[v.i - 1] : null;\n    if (children) {\n      executeShifts(v);\n      var midpoint = (children[0].z + children[children.length - 1].z) / 2;\n      if (w) {\n        v.z = w.z + separation(v._, w._);\n        v.m = v.z - midpoint;\n      } else {\n        v.z = midpoint;\n      }\n    } else if (w) {\n      v.z = w.z + separation(v._, w._);\n    }\n    v.parent.A = apportion(v, w, v.parent.A || siblings[0]);\n  }\n\n  // Computes all real x-coordinates by summing up the modifiers recursively.\n  function secondWalk(v) {\n    v._.x = v.z + v.parent.m;\n    v.m += v.parent.m;\n  }\n\n  // The core of the algorithm. Here, a new subtree is combined with the\n  // previous subtrees. Threads are used to traverse the inside and outside\n  // contours of the left and right subtree up to the highest common level. The\n  // vertices used for the traversals are vi+, vi-, vo-, and vo+, where the\n  // superscript o means outside and i means inside, the subscript - means left\n  // subtree and + means right subtree. For summing up the modifiers along the\n  // contour, we use respective variables si+, si-, so-, and so+. Whenever two\n  // nodes of the inside contours conflict, we compute the left one of the\n  // greatest uncommon ancestors using the function ANCESTOR and call MOVE\n  // SUBTREE to shift the subtree and prepare the shifts of smaller subtrees.\n  // Finally, we add a new thread (if necessary).\n  function apportion(v, w, ancestor) {\n    if (w) {\n      var vip = v,\n          vop = v,\n          vim = w,\n          vom = vip.parent.children[0],\n          sip = vip.m,\n          sop = vop.m,\n          sim = vim.m,\n          som = vom.m,\n          shift;\n      while (vim = nextRight(vim), vip = nextLeft(vip), vim && vip) {\n        vom = nextLeft(vom);\n        vop = nextRight(vop);\n        vop.a = v;\n        shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);\n        if (shift > 0) {\n          moveSubtree(nextAncestor(vim, v, ancestor), v, shift);\n          sip += shift;\n          sop += shift;\n        }\n        sim += vim.m;\n        sip += vip.m;\n        som += vom.m;\n        sop += vop.m;\n      }\n      if (vim && !nextRight(vop)) {\n        vop.t = vim;\n        vop.m += sim - sop;\n      }\n      if (vip && !nextLeft(vom)) {\n        vom.t = vip;\n        vom.m += sip - som;\n        ancestor = v;\n      }\n    }\n    return ancestor;\n  }\n\n  function sizeNode(node) {\n    node.x *= dx;\n    node.y = node.depth * dy;\n  }\n\n  tree.separation = function(x) {\n    return arguments.length ? (separation = x, tree) : separation;\n  };\n\n  tree.size = function(x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], tree) : (nodeSize ? null : [dx, dy]);\n  };\n\n  tree.nodeSize = function(x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], tree) : (nodeSize ? [dx, dy] : null);\n  };\n\n  return tree;\n}\n","import { h } from 'preact';\nimport { Renderer } from './interface';\nimport { hierarchy, cluster as d3cluster, tree as d3tree, HierarchyPointNode } from 'd3-hierarchy';\nimport { NodeOptions } from './tree/StateTree';\nimport { StateVisNode } from './tree/stateVisNode'; // has or is using\n\nexport const RENDERER_PRESETS: { [name: string]: Partial<Renderer> } = {\n  Tree: {\n    layoutFn: TREE_LAYOUT,\n    sortNodesFn: TOP_TO_BOTTOM_SORT,\n    labelRenderFn: SLANTED_TEXT,\n    edgeRenderFn: TREE_EDGE,\n  },\n  Cluster: {\n    layoutFn: CLUSTER_LAYOUT,\n    sortNodesFn: TOP_TO_BOTTOM_SORT,\n    labelRenderFn: SLANTED_TEXT,\n    edgeRenderFn: TREE_EDGE,\n  },\n  Radial: {\n    layoutFn: RADIAL_LAYOUT,\n    sortNodesFn: BOTTOM_TO_TOP_SORT,\n    labelRenderFn: RADIAL_TEXT,\n    edgeRenderFn: RADIAL_EDGE,\n  },\n};\n\nconst tree = RENDERER_PRESETS.Tree;\n\nexport const DEFAULT_RENDERER: Renderer = {\n  baseRadius: 10,\n  baseFontSize: 12,\n  baseStrokeWidth: 2,\n  baseNodeStrokeWidth: 2,\n  zoom: 1.0,\n\n  layoutFn: tree.layoutFn,\n  sortNodesFn: tree.sortNodesFn,\n  labelRenderFn: tree.labelRenderFn,\n  edgeRenderFn: tree.edgeRenderFn,\n};\n\n///////////////////////////////////////////\n// NODE RENDER ORDER\n///////////////////////////////////////////\n\nexport function BOTTOM_TO_TOP_SORT(a: StateVisNode, b: StateVisNode) {\n  let b2t = b.layoutY - a.layoutY; // bottom to top\n  if (b2t !== 0) return b2t;\n  let l2r = a.layoutX - b.layoutX; // left to right\n  return l2r;\n}\n\nexport function TOP_TO_BOTTOM_SORT(a: StateVisNode, b: StateVisNode) {\n  let t2b = a.layoutY - b.layoutY; // top to bottom\n  if (t2b !== 0) return t2b;\n  let l2r = a.layoutX - b.layoutX; // left to right\n  return l2r;\n}\n\n///////////////////////////////////////////\n// LAYOUTS\n///////////////////////////////////////////\n\nexport function TREE_LAYOUT(rootNode: StateVisNode) {\n  let root = hierarchy(rootNode);\n  let tree = d3tree<StateVisNode>();\n  return updateNodes(tree(root));\n}\n\nexport function CLUSTER_LAYOUT(rootNode: StateVisNode) {\n  let root = hierarchy(rootNode);\n  let tree = d3cluster<StateVisNode>();\n  return updateNodes(tree(root));\n}\n\n/** For RADIAL_LAYOUT: projects x/y coords from a cluster layout to circular layout */\nfunction project(x, y) {\n  let angle = ((x - 90) / 180) * Math.PI,\n    radius = y;\n  const CENTER = 0.5;\n  return { x: CENTER + radius * Math.cos(angle), y: CENTER + radius * Math.sin(angle) };\n}\n\nexport function RADIAL_LAYOUT(rootNode: StateVisNode) {\n  let root = hierarchy(rootNode);\n\n  let layout = d3cluster<StateVisNode>()\n    .size([360, 0.4])\n    .separation(function (a, b) {\n      return (a.parent == b.parent ? 1 : 2) / a.depth;\n    });\n\n  let nodes = layout(root);\n\n  nodes.each(function (node) {\n    let projected = project(node.x, node.y);\n    let visNode: StateVisNode = node.data;\n    visNode.layoutX = node.x;\n    visNode.layoutY = node.y;\n    visNode.x = projected.x;\n    visNode.y = projected.y;\n  });\n}\n\n/** Mutates each StateVisNode by copying the new x/y values from the d3 HierarchyPointNode structure */\nfunction updateNodes(nodes: HierarchyPointNode<StateVisNode>) {\n  nodes.each((node) => {\n    node.data.layoutX = node.data.x = node.x;\n    node.data.layoutY = node.data.y = node.y;\n  });\n  return nodes;\n}\n\n///////////////////////////////////////////\n// STATE NAME LABEL\n///////////////////////////////////////////\n\nexport function RADIAL_TEXT(x, y, node: StateVisNode, nodeOptions: NodeOptions, renderer: Renderer) {\n  let { baseFontSize, zoom } = renderer;\n  let fontSize = baseFontSize * zoom;\n\n  const label = nodeOptions?.label ? nodeOptions.label(node, defaultLabel(node)) : defaultLabel(node);\n\n  let angle = node.layoutX || 0;\n\n  let textAnchor: string = angle < 180 === !!node.children ? 'start' : 'end';\n  let rotation = angle < 180 ? angle - 90 : angle + 90;\n  let translation = (textAnchor === 'start' ? 15 : -15) * zoom;\n\n  let transform = `rotate(${rotation}),translate(${translation}, 0)`;\n\n  return (\n    <text className=\"name\" text-anchor={textAnchor} transform={transform} font-size={fontSize}>\n      {' '}\n      {label}{' '}\n    </text>\n  );\n}\n\nexport function defaultLabel(node: StateVisNode) {\n  let segments = node.name.split('.');\n  let name = segments.pop();\n  if (name == '**') name = segments.pop() + '.**';\n  return name;\n}\n\nexport function SLANTED_TEXT(x, y, node: StateVisNode, nodeOptions: NodeOptions, renderer: Renderer) {\n  let { baseFontSize, zoom } = renderer;\n  let fontSize = baseFontSize * zoom;\n\n  const label = nodeOptions?.label ? nodeOptions.label(node, defaultLabel(node)) : defaultLabel(node);\n\n  let transform = `rotate(-15),translate(0, ${-15 * zoom})`;\n\n  return (\n    <text className=\"name\" text-anchor=\"middle\" transform={transform} font-size={fontSize}>\n      {' '}\n      {label}{' '}\n    </text>\n  );\n}\n\n///////////////////////////////////////////\n// GRAPH EDGES\n///////////////////////////////////////////\n\n/** Straight line */\nexport function RADIAL_EDGE(node: StateVisNode, renderer: Renderer) {\n  let strokeWidth = renderer.baseStrokeWidth * renderer.zoom;\n\n  const makeLinkPath = (node: StateVisNode) => {\n    let s = { x: node.animX, y: node.animY }; // statevisnode\n    let p = { x: node._parent.animX, y: node._parent.animY }; // parent\n\n    return (\n      'M' +\n      [s.x, s.y] +\n      // + \"C\"  + [s.x, (s.y + p.y) / 2.5]\n      // + \" \"  + [p.x, (s.y + p.y) / 2.5]\n      ' ' +\n      [p.x, p.y]\n    );\n  };\n\n  return <path d={makeLinkPath(node)} stroke-width={strokeWidth} className=\"link\" />;\n}\n\n/** Bezier curve */\nexport function TREE_EDGE(node: StateVisNode, renderer: Renderer) {\n  let strokeWidth = renderer.baseStrokeWidth * renderer.zoom;\n\n  const makeLinkPath = (node: StateVisNode) => {\n    let s = { x: node.animX, y: node.animY }; // statevisnode\n    let p = { x: node._parent.animX, y: node._parent.animY }; // parent\n    let yAvg = (s.y + p.y) / 2;\n    return `M ${s.x} ${s.y} C ${s.x} ${yAvg}, ${p.x} ${yAvg}, ${p.x} ${p.y}`;\n  };\n\n  return <path d={makeLinkPath(node)} stroke-width={strokeWidth} className=\"link\" />;\n}\n","import { StateObject } from '@uirouter/core';\n\nexport interface StateVisNode extends StateObject {\n  name: string;\n\n  label: string;\n  highlight: boolean;\n  active: boolean;\n  retained: boolean;\n  exited: boolean;\n  entered: boolean;\n  inactive: boolean;\n  _collapsed: boolean;\n  readonly collapsed: boolean;\n  readonly visible: boolean;\n  parent: StateObject;\n  _parent: StateVisNode;\n  _children: StateVisNode[];\n  readonly children: StateVisNode[];\n  future: boolean;\n  lazyLoad: any;\n  readonly totalDescendents: number;\n\n  _classes: string;\n\n  /** Original x coordinate from d3 layout: tree() or cluster() */\n  layoutX: number;\n  /** Original y coordinate from d3 layout: tree() or cluster() */\n  layoutY: number;\n\n  /** Projected x coordinate (i.e., for radial projection) */\n  x: number;\n  /** Projected y coordinate (i.e., for radial projection) */\n  y: number;\n\n  /** Current animation frame's x coordinate */\n  animX: number;\n  /** Current animation frame's y coordinate */\n  animY: number;\n}\n\nexport function createStateVisNode(state: StateObject): StateVisNode {\n  let node: StateVisNode = Object.create(state);\n\n  Object.defineProperty(node, 'visible', {\n    get() {\n      if (this.entered) return true;\n      let ancestorCollapsed = this._parent && (this._parent.collapsed || !this._parent.visible);\n      return !ancestorCollapsed;\n    },\n  });\n\n  Object.defineProperty(node, 'children', {\n    get() {\n      return this._children.filter(child => child.visible);\n    },\n  });\n\n  Object.defineProperty(node, 'totalDescendents', {\n    get() {\n      return this._children.reduce((acc, child) => acc + child.totalDescendents, this._children.length);\n    },\n  });\n\n  Object.defineProperty(node, 'collapsed', {\n    get() {\n      return !this.entered && this._collapsed && this._children.length;\n    },\n  });\n\n  return node;\n}\n","import { h, render, Component } from 'preact';\nimport { StateNode } from './StateNode';\nimport { NodeDimensions, VisDimensions, Renderer } from '../interface';\nimport { animatePath } from '../../util/animatepath';\nimport { easing } from '../../util/easing';\nimport { DEFAULT_RENDERER } from '../renderers';\nimport { createStateVisNode, StateVisNode } from './stateVisNode';\n\nexport interface NodeOptions {\n  classes?(node: StateVisNode): string;\n  label?(node: StateVisNode, defaultLabel: string): string;\n}\n\nexport interface IProps extends NodeDimensions, VisDimensions {\n  router?: any;\n  nodeOptions?: NodeOptions;\n  renderer?: Renderer;\n}\n\nexport interface IState {\n  nodes?: StateVisNode[];\n}\n\nlet resetMetadata = {\n  label: '',\n  highlight: false,\n  active: false,\n  future: false,\n  retained: false,\n  entered: false,\n  exited: false,\n  inactive: true,\n};\n\nexport class StateTree extends Component<IProps, IState> {\n  static create(router, element?, props = {}) {\n    if (!element) {\n      element = document.createElement('div');\n      element.id = 'uirStateTree';\n    }\n\n    let initialProps = { ...props, router } as IProps;\n    const _render = () => {\n      document.body.appendChild(element);\n      render(h(StateTree, initialProps), element);\n    };\n\n    if (document.readyState === 'interactive' || document.readyState === 'complete') {\n      _render();\n    } else {\n      document.addEventListener('DOMContentLoaded', _render as any, false);\n    }\n\n    return element;\n  }\n\n  public static defaultProps = {\n    height: 350,\n    width: 250,\n    renderer: DEFAULT_RENDERER,\n  };\n\n  state = {\n    nodes: [],\n    layout: {} as any,\n  };\n\n  nodes: StateVisNode[] = [];\n  unmounted: boolean = false;\n  deregisterHookFn: Function;\n  deregisterStateListenerFn: Function;\n\n  componentDidMount() {\n    let registry = this.props.router.stateRegistry;\n    let $transitions = this.props.router.transitionService;\n\n    // Register states changed listener\n    if (registry.onStatesChanged) {\n      this.deregisterStateListenerFn = registry.onStatesChanged(() => this.updateStates());\n    }\n    this.updateStates();\n\n    // Register onSuccess transition hook to toggle the SVG classes\n    this.deregisterHookFn = $transitions.onSuccess({}, (trans) => this.updateNodes(trans));\n    this.updateNodes();\n\n    let lastSuccessful = this.props.router.globals.successfulTransitions.peekTail();\n    if (lastSuccessful) {\n      this.updateNodes(lastSuccessful);\n    }\n\n    let pending = this.props.router.globals.transition;\n    if (pending) {\n      pending.promise.then(() => this.updateNodes(pending));\n    }\n  }\n\n  componentWillReceiveProps() {\n    let nodes = this.state.nodes;\n    this.setState({ nodes }, this.updateStates);\n  }\n\n  dimensions() {\n    let newProps = {} as any;\n\n    let radius = 15;\n    let offsetX = 0;\n    let offsetY = radius * 2;\n    let height = this.props.height || 500;\n    let width = this.props.width || 500;\n\n    let scaleX = newProps.scaleX || width - offsetX * 2;\n    let scaleY = newProps.scaleY || height - offsetY * 2;\n\n    return { radius, offsetX, offsetY, scaleX, scaleY };\n  }\n\n  componentWillUnmount() {\n    this.unmounted = true;\n    this.deregisterHookFn && this.deregisterHookFn();\n  }\n\n  cancelCurrentAnimation = () => null;\n\n  doLayoutAnimation = () => {\n    this.cancelCurrentAnimation();\n\n    let nodes = this.getNodes();\n    if (!nodes.length) return;\n\n    let rootNode = nodes.filter((state) => state.name === '')[0];\n    this.props.renderer.layoutFn(rootNode);\n\n    // Move all non-visible nodes to same x/y coords as the nearest visible parent\n    nodes\n      .filter((node) => !node.visible)\n      .forEach((node) => {\n        let visibleAncestor = node._parent;\n        while (visibleAncestor && !visibleAncestor.visible) visibleAncestor = visibleAncestor._parent;\n        if (visibleAncestor) {\n          node.x = visibleAncestor.x;\n          node.y = visibleAncestor.y;\n        }\n      });\n\n    let dimensions = this.dimensions();\n\n    // Transforms x coord from the tree layout to fit the viewport using scale/offset values\n    const transformX = (xval) => xval * dimensions.scaleX + dimensions.offsetX;\n    // Transforms y coord from the tree layout to fit the viewport using scale/offset values\n    const transformY = (yval) => yval * dimensions.scaleY + dimensions.offsetY;\n\n    const getCurrentCoords = (node) => ({\n      x: node.animX || this.props.width / 2,\n      y: node.animY || this.props.height / 2,\n    });\n\n    // An array containing current x/y coords for all nodes\n    // [ x1, y1, x2, y2, x3, y3, x4, y4 ]\n    let currentCoords = nodes\n      .map(getCurrentCoords)\n      .map((obj) => [obj.x, obj.y])\n      .reduce((acc, arr) => acc.concat(arr), []);\n\n    // An array containing target x/y coords for all nodes\n    // [ x1', y1', x2', y2', x3', y3', x4', y4' ]\n    let targetCoords = nodes\n      .map((node) => [transformX(node.x), transformY(node.y)])\n      .reduce((acc, arr) => acc.concat(arr), []);\n\n    // xyValArray is an array containing x/y coords for all nodes,\n    // interpolated between currentCoords and targetCoords based on time\n    // [ x1'', y1'', x2'', y2'', x3'', y3'', x4'', y4'' ]\n    const animationFrame = (xyValArray) => {\n      let tupleCount = xyValArray.length / 2;\n      for (let i = 0; i < tupleCount && i < nodes.length; i++) {\n        let node = nodes[i];\n        node.animX = xyValArray[i * 2];\n        node.animY = xyValArray[i * 2 + 1];\n      }\n\n      this.setState({ nodes });\n    };\n\n    this.cancelCurrentAnimation = animatePath(\n      targetCoords,\n      currentCoords,\n      500,\n      animationFrame,\n      () => null,\n      easing.easeInOutExpo\n    );\n  };\n\n  nodeForState = (nodes, state) => nodes.filter((node) => node.name === state.name)[0];\n\n  updateStates = () => {\n    let router = this.props.router;\n\n    let states = router.stateService.get().map((s) => s.$$state());\n    let known = this.nodes.map(Object.getPrototypeOf);\n    let toAdd = states.filter((s) => known.indexOf(s) === -1);\n    let toDel = known.filter((s) => states.indexOf(s) === -1);\n\n    let nodes = (this.nodes = this.nodes.slice());\n\n    if (toAdd.length || toDel.length) {\n      toAdd.map((s) => createStateVisNode(s)).forEach((n) => nodes.push(n));\n      toDel\n        .map((del) => nodes.filter((node) => del.isPrototypeOf(node)))\n        .reduce((acc, x) => acc.concat(x), [])\n        .forEach((node) => nodes.splice(nodes.indexOf(node), 1));\n\n      // Rebuild each node's children array\n      nodes.forEach((n) => (n._children = []));\n      nodes.forEach((n) => {\n        if (!n || !n.parent) return;\n        let parentNode: any = this.nodeForState(nodes, n.parent);\n        if (!parentNode) return;\n        parentNode._children.push(n);\n        n._parent = parentNode;\n      });\n      nodes.forEach((n) => (n.future = !!n.lazyLoad));\n    }\n\n    if (!this.unmounted && !this.deregisterStateListenerFn) {\n      // poll if ui-router version is 1.0.0-beta.1 or earlier\n      setTimeout(this.updateStates, 1000);\n    }\n\n    this.setState({ nodes }, this.doLayoutAnimation);\n  };\n\n  updateNodes = ($transition$?) => {\n    let nodes = this.nodes.map((node) => Object.assign(node, resetMetadata));\n    nodes.forEach((n) => (n.future = !!n.lazyLoad));\n\n    if ($transition$) {\n      let tc = $transition$.treeChanges();\n      const getNode = (node) => this.nodeForState(this.nodes, node.state);\n\n      tc.retained\n        .concat(tc.entering)\n        .map(getNode)\n        .filter((x) => x)\n        .forEach((n: StateVisNode) => (n.entered = true));\n      tc.retained\n        .map(getNode)\n        .filter((x) => x)\n        .forEach((n: StateVisNode) => (n.retained = true));\n      tc.exiting\n        .map(getNode)\n        .filter((x) => x)\n        .forEach((n: StateVisNode) => (n.exited = true));\n      tc.to\n        .slice(-1)\n        .map(getNode)\n        .filter((x) => x)\n        .forEach((n: StateVisNode) => {\n          n.active = true;\n          n.label = 'active';\n        });\n    }\n\n    this.setState({ nodes: this.nodes }, this.doLayoutAnimation);\n  };\n\n  getNodes() {\n    return this.nodes.slice().sort(this.props.renderer.sortNodesFn);\n  }\n\n  render() {\n    let renderer = this.props.renderer;\n    let renderNodes = this.getNodes().filter((node) => node.visible && node.animX && node.animY);\n\n    return (\n      <div className=\"statevis\">\n        <svg width={this.props.width} height={this.props.height}>\n          {renderNodes.filter((node) => !!node.parent).map((node) => renderer.edgeRenderFn(node, renderer))}\n\n          {renderNodes.map((node: StateVisNode) => (\n            <StateNode\n              key={node.name}\n              node={node}\n              router={this.props.router}\n              nodeOptions={this.props.nodeOptions}\n              renderer={this.props.renderer}\n              doLayout={this.doLayoutAnimation.bind(this)}\n              x={node.animX}\n              y={node.animY}\n            />\n          ))}\n        </svg>\n      </div>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport { StateSelector } from '../selector/StateSelector';\nimport { RENDERER_PRESETS, DEFAULT_RENDERER } from './renderers';\nimport { Renderer } from './interface';\nimport { UIRouter } from '@uirouter/core';\n\nexport interface ILayoutPrefsProps {\n  onRendererChange: (renderer: Renderer) => void;\n}\n\nexport interface ILayoutPrefsState {\n  renderer: Renderer;\n  presetName: string;\n}\n\nexport class LayoutPrefs extends Component<ILayoutPrefsProps, ILayoutPrefsState> {\n  state = {\n    renderer: DEFAULT_RENDERER,\n    presetName: 'Tree',\n  };\n\n  componentDidMount() {\n    this.props.onRendererChange(this.state.renderer);\n  }\n\n  handleZoom(event: Event) {\n    let el = event.target;\n    let value = parseFloat(el['value']);\n    let renderer = { ...this.state.renderer, zoom: value };\n    this.setState({ renderer });\n    this.props.onRendererChange(renderer);\n  }\n\n  handleLayout(event: Event) {\n    let presetName = event.target['value'];\n    let settings = RENDERER_PRESETS[presetName];\n    let renderer = { ...this.state.renderer, ...settings };\n    this.setState({ renderer, presetName });\n    this.props.onRendererChange(renderer);\n  }\n\n  render() {\n    return (\n      <div\n        className=\"uirStateVisLayoutPrefs\"\n        style={{ display: 'flex', flexFlow: 'column nowrap' }}\n        onMouseDown={evt => evt.stopPropagation()}\n      >\n        <div style={{ flex: '1 1 auto', display: 'flex', flexFlow: 'row nowrap', alignItems: 'center' }}>\n          <div>Layout:</div>\n          <select\n            style={{ marginLeft: 'auto', maxWidth: '100px' }}\n            onChange={this.handleLayout.bind(this)}\n            value={this.state.presetName}\n          >\n            {Object.keys(RENDERER_PRESETS).map(preset => <option value={preset}>{preset}</option>)}\n          </select>\n        </div>\n\n        <div style={{ flex: '1 1 auto', display: 'flex', flexFlow: 'row nowrap', alignItems: 'center' }}>\n          <span>Node size:</span>\n          <input\n            style={{ marginLeft: 'auto' }}\n            value={'' + this.state.renderer.zoom}\n            type=\"range\"\n            min=\"0.3\"\n            max=\"3.0\"\n            step=\"0.1\"\n            onInput={this.handleZoom.bind(this)}\n          />\n          <span>{this.state.renderer.zoom}x</span>\n        </div>\n      </div>\n    );\n  }\n}\n","import { h } from 'preact';\nexport const ChevronDown = ({ size }) => (\n  <svg width={size} height={size} viewBox=\"0 0 1792 1792\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1683 808l-742 741q-19 19-45 19t-45-19l-742-741q-19-19-19-45.5t19-45.5l166-165q19-19 45-19t45 19l531 531 531-531q19-19 45-19t45 19l166 165q19 19 19 45.5t-19 45.5z\" />\n  </svg>\n);\n","import { h } from 'preact';\nexport const Close = ({ size }) => (\n  <svg width={size} height={size} viewBox=\"0 0 1792 1792\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z\" />\n  </svg>\n);\n","import { h } from 'preact';\nexport const Gear = ({ size }) => (\n  <svg width={size} height={size} viewBox=\"0 0 1792 1792\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1152 896q0-106-75-181t-181-75-181 75-75 181 75 181 181 75 181-75 75-181zm512-109v222q0 12-8 23t-20 13l-185 28q-19 54-39 91 35 50 107 138 10 12 10 25t-9 23q-27 37-99 108t-94 71q-12 0-26-9l-138-108q-44 23-91 38-16 136-29 186-7 28-36 28h-222q-14 0-24.5-8.5t-11.5-21.5l-28-184q-49-16-90-37l-141 107q-10 9-25 9-14 0-25-11-126-114-165-168-7-10-7-23 0-12 8-23 15-21 51-66.5t54-70.5q-27-50-41-99l-183-27q-13-2-21-12.5t-8-23.5v-222q0-12 8-23t19-13l186-28q14-46 39-92-40-57-107-138-10-12-10-24 0-10 9-23 26-36 98.5-107.5t94.5-71.5q13 0 26 10l138 107q44-23 91-38 16-136 29-186 7-28 36-28h222q14 0 24.5 8.5t11.5 21.5l28 184q49 16 90 37l142-107q9-9 24-9 13 0 25 10 129 119 165 170 7 8 7 22 0 12-8 23-15 21-51 66.5t-54 70.5q26 50 41 98l183 28q13 2 21 12.5t8 23.5z\" />\n  </svg>\n);\n","import { h } from 'preact';\nexport const Help = ({ size }) => (\n  <svg width={size} height={size} viewBox=\"0 0 1792 1792\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1008 1200v160q0 14-9 23t-23 9h-160q-14 0-23-9t-9-23v-160q0-14 9-23t23-9h160q14 0 23 9t9 23zm256-496q0 50-15 90t-45.5 69-52 44-59.5 36q-32 18-46.5 28t-26 24-11.5 29v32q0 14-9 23t-23 9h-160q-14 0-23-9t-9-23v-68q0-35 10.5-64.5t24-47.5 39-35.5 41-25.5 44.5-21q53-25 75-43t22-49q0-42-43.5-71.5t-95.5-29.5q-56 0-95 27-29 20-80 83-9 12-25 12-11 0-19-6l-108-82q-10-7-12-20t5-23q122-192 349-192 129 0 238.5 89.5t109.5 214.5zm-368-448q-130 0-248.5 51t-204 136.5-136.5 204-51 248.5 51 248.5 136.5 204 204 136.5 248.5 51 248.5-51 204-136.5 136.5-204 51-248.5-51-248.5-136.5-204-204-136.5-248.5-51zm768 640q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z\" />\n  </svg>\n);\n","import { h, Component } from 'preact';\nimport { StateSelector } from '../selector/StateSelector';\nimport { LayoutPrefs } from './LayoutPrefs';\nimport { Renderer } from './interface';\nimport { UIRouter } from '@uirouter/core';\n\nimport { ChevronDown } from './icons/ChevronDown';\nimport { Close } from './icons/Close';\nimport { Gear } from './icons/Gear';\nimport { Help } from './icons/Help';\n\nexport interface IControlsProps {\n  router: UIRouter;\n  onRendererChange: (renderer: Renderer) => void;\n  onMinimize: () => void;\n  onClose: () => void;\n}\n\nexport interface IControlsState {\n  showRendererPrefs: boolean;\n}\n\nexport class Controls extends Component<IControlsProps, IControlsState> {\n  state = {\n    showRendererPrefs: false,\n  };\n\n  render() {\n    return (\n      <div style={{ width: '100%' }}>\n        <div className=\"uirStateVisControls\">\n          <StateSelector router={this.props.router} />\n          <div style={{ marginLeft: 'auto', cursor: 'pointer' }} className=\"uirStateVisIcons\">\n            <span className=\"uirStateVisHover\">\n              <Help size=\"16px\" />\n              <div className=\"hoverBlock\">\n                <ul>\n                  <li>Click a node to activate that state.</li>\n                  <li>Select a state from the dropdown to activate that state.</li>\n                  <li>\n                    Double click a node to auto-collapse that section of the tree when inactive. Collapsed nodes are\n                    displayed with a dotted outline and the count of collapsed children.\n                  </li>\n                  <li>Lazy loaded states (including future states) are displayed with a dashed outline.</li>\n                </ul>\n              </div>\n            </span>\n\n            <span className=\"uirStateVisHover\">\n              <Gear size=\"16px\" />\n              <div className=\"hoverBlock\">\n                <LayoutPrefs onRendererChange={this.props.onRendererChange} />\n              </div>\n            </span>\n\n            <span className=\"uirStateVisHover\" onClick={this.props.onMinimize}>\n              <ChevronDown size=\"16px\" />\n              <div>\n                <span style={{ float: 'right' }}>Minimize</span>\n              </div>\n              <div>Minimize</div>\n            </span>\n\n            <span className=\"uirStateVisHover\" onClick={this.props.onClose}>\n              <Close size=\"16px\" />\n              <div>\n                <span style={{ float: 'right' }}>Close</span>\n              </div>\n            </span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport { toggleClass, addClass } from '../util/toggleClass';\n\nexport interface IProps {\n  minimized?: boolean; // ms\n  onResize?: (dimensions: { width: number; height: number }) => void;\n}\n\nexport interface IState {\n  unminimize: Function;\n}\n\n/** A floating window that supports minimization and resizing  */\nexport class StateVisWindow extends Component<IProps, IState> {\n  private deregisterFns: Function[] = [];\n\n  el: HTMLElement;\n  top: string;\n  left: string;\n  right: string;\n  bottom: string;\n\n  constructor(props: IProps) {\n    super(props);\n\n    this.state = {\n      unminimize: null,\n    };\n  }\n\n  componentWillReceiveProps(nextProps: IProps) {\n    if (this.props.minimized !== nextProps.minimized) {\n      const { unminimize } = this.state;\n      if (unminimize) {\n        this.setState({ unminimize: null }, () => unminimize());\n      } else {\n        this.setState({ unminimize: this.minimize() });\n      }\n    }\n  }\n\n  minimize = () => {\n    // evt && evt.preventDefault();\n    // evt && evt.stopPropagation();\n\n    let el = this.el;\n    let bounds = el.getBoundingClientRect();\n\n    this.top = bounds.top + 'px';\n    this.left = bounds.left + 'px';\n    this.right = window.innerWidth - bounds.right + 'px';\n    this.bottom = window.innerHeight - bounds.bottom + 'px';\n\n    el.style.top = 'auto';\n    el.style.left = 'auto';\n    el.style.right = this.right;\n    el.style.bottom = this.bottom;\n\n    let unminimize = () => {\n      el.style.top = 'auto';\n      el.style.left = 'auto';\n      el.style.right = this.right;\n      el.style.bottom = this.bottom;\n\n      toggleClass('minimized')(el);\n      el.removeEventListener('click', unminimize);\n      const animationEndListener = (evt) => {\n        let bounds = el.getBoundingClientRect();\n        el.style.top = bounds.top + 'px';\n        el.style.left = bounds.left + 'px';\n        el.style.right = 'auto';\n        el.style.bottom = 'auto';\n        el.removeEventListener('transitionend', animationEndListener);\n      };\n      el.addEventListener('transitionend', animationEndListener);\n    };\n\n    addClass('minimized')(el);\n\n    // wait 50ms to avoid coordinates jumping directly to 0/0 and avoid animation\n    setTimeout(() => (el.style.right = el.style.bottom = '0'), 50);\n    return unminimize;\n  };\n\n  componentWillUnmount() {\n    this.deregisterFns.forEach((fn) => fn());\n  }\n\n  componentDidMount() {\n    if (typeof MutationObserver === 'function') {\n      this.monitorResizeEvents();\n    }\n  }\n\n  /** The uirStateVisContainer class enables resize: both. This function listens for resize events */\n  monitorResizeEvents() {\n    let _width = this.el.style.width;\n    let _height = this.el.style.height;\n\n    let observer = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        if (mutation.attributeName == 'style') {\n          let el = mutation.target,\n            newwidth = el['style'].width,\n            newheight = el['style'].height;\n\n          if (newwidth !== _width || newheight !== _height) {\n            _width = newwidth;\n            _height = newheight;\n            let width = parseInt(newwidth.replace(/px$/, ''));\n            let height = parseInt(newheight.replace(/px$/, ''));\n            this.props.onResize({ width, height });\n          }\n        }\n      });\n    });\n\n    let config = {\n      attributes: true,\n      childList: false,\n      characterData: false,\n      subtree: false,\n      attributeFilter: ['style'],\n    };\n\n    observer.observe(this.el, config);\n    this.deregisterFns.push(() => observer.disconnect());\n  }\n\n  render() {\n    return (\n      <div className=\"uirStateVisContainer\" ref={(el) => (this.el = el as HTMLElement)}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { UIRouter } from '@uirouter/core';\nimport { h, render, Component } from 'preact';\nimport { draggable, dragActions } from '../util/draggable';\nimport { StateVisualizerOptions } from '../visualizer';\nimport { StateTree } from './tree/StateTree';\nimport { Controls } from './Controls';\nimport { StateVisWindow } from './StateVisWindow';\nimport { DEFAULT_RENDERER } from './renderers';\nimport { Renderer } from './interface';\nimport './statevis.css';\n\nexport interface IProps {\n  router;\n  visualizationOptions: StateVisualizerOptions;\n  minimizeAfter?: number; // ms\n  width?: number; // px\n  height?: number; // px\n}\n\nexport interface IState {\n  height?: number;\n  width?: number;\n  renderer?: Renderer;\n  minimized: boolean;\n}\n\nexport class StateVisualizer extends Component<IProps, IState> {\n  state = { height: null, width: null, renderer: DEFAULT_RENDERER, minimized: false };\n\n  private minimizeTimeout: any;\n  private deregisterFns: Function[] = [];\n  private window: StateVisWindow;\n\n  /**\n   * Creates a new StateVisualizer and adds it to the document.\n   *\n   * @param router the UIRouter object\n   * @param element (optional) the element where the StateVisualizer should be placed.\n   *                If no element is passed, an element will be created in the body.\n   * @param props height/width properties default: { height: 350, width: 250 }\n   * @param options StateVisualizerOptions used to customise the styling of the visualizer\n   *\n   * # Angular 1 + UI-Router (1.0.0-beta.2 and higher):\n   *\n   * Inject the router (`$uiRouter`) in a run block, then call StateVisualizer.create();\n   *\n   * ```\n   * app.run(function($uiRouter) {\n   *   StateVisualizer.create($uiRouter);\n   * });\n   * ```\n   *\n   * # Angular 1 + UI-Router 1.0.0-alpha.1 through 1.0.0-beta.1:\n   *\n   * Inject the router (`ng1UIRouter`) in a run block, then call StateVisualizer.create();\n   *\n   * ```\n   * app.run(function(ng1UIRouter) {\n   *   StateVisualizer.create(ng1UIRouter);\n   * });\n   * ```\n   *\n   * Angular 2:\n   *\n   * Call StateVisualizer.create() from your UIRouterConfig\n   *\n   * ```\n   * export class MyUIRouterConfig extends UIRouterConfig {\n   *   configure(router: UIRouter) {\n   *     StateVisualizer.create(router);\n   *   }\n   * }\n   * ```\n   *\n   * React:\n   *\n   * Call StateVisualizer.create() from your bootstrap\n   *\n   * ```\n   * let router = new UIRouterReact();\n   * StateVisualizer.create(router);\n   * router.start();\n   * ```\n   *\n   * @return the element that was bootstrapped.\n   *         You can destroy the component using:\n   *         [ReactDOM.unmountComponentAtNode](https://facebook.github.io/react/docs/top-level-api.html#reactdom.unmountcomponentatnode)\n   */\n  static create(router: UIRouter, element?: HTMLElement, props = {}, options?: StateVisualizerOptions) {\n    if (!element) {\n      element = document.createElement('div');\n      element.id = 'uirStateVisualizer';\n    }\n\n    let initialProps: IProps = Object.assign({}, props, { router, minimizeAfter: 2500, visualizationOptions: options });\n    const _render = () => {\n      document.body.appendChild(element);\n      render(h(StateVisualizer, initialProps), element);\n    };\n\n    if (document.readyState === 'interactive' || document.readyState === 'complete') {\n      _render();\n    } else {\n      document.addEventListener('DOMContentLoaded', _render as any, false);\n    }\n\n    return element;\n  }\n\n  rootEl: HTMLElement;\n  windowEl: HTMLElement;\n\n  dispose() {\n    render(null, document.getElementById('uirStateVisualizer'), this.rootEl);\n  }\n\n  handleRendererChange(renderer: Renderer) {\n    this.setState({ renderer });\n  }\n\n  cancelAutoMinimize() {\n    if (this.minimizeTimeout) {\n      clearTimeout(this.minimizeTimeout);\n      this.minimizeTimeout = null;\n    }\n  }\n\n  componentWillUnmount() {\n    this.deregisterFns.forEach((fn) => fn());\n  }\n\n  draggable() {\n    let controlsEl = this.windowEl.querySelector('.uirStateVisControls');\n    let visEl = this.windowEl.querySelector('.statevis');\n    this.deregisterFns.push(draggable(controlsEl, dragActions.move(this.windowEl)));\n    this.deregisterFns.push(draggable(visEl, dragActions.move(this.windowEl)));\n  }\n\n  componentDidMount() {\n    this.draggable();\n\n    if (this.props.minimizeAfter) {\n      const doMinimize = () => this.setState({ minimized: true });\n      this.minimizeTimeout = setTimeout(doMinimize, this.props.minimizeAfter);\n    }\n  }\n\n  svgWidth = () => this.props.width || this.state.width || 350;\n  svgHeight = () => (this.props.height || this.state.height || 250) - 25;\n\n  render() {\n    const { minimized } = this.state;\n    return (\n      <div\n        ref={(el) => (this.rootEl = el as HTMLElement)}\n        onMouseDown={this.cancelAutoMinimize.bind(this)}\n        onMouseEnter={this.cancelAutoMinimize.bind(this)}\n      >\n        <StateVisWindow\n          minimized={this.state.minimized}\n          ref={(windowRef) => (this.windowEl = (windowRef && windowRef.el) || this.windowEl)}\n          onResize={({ width, height }) => this.setState({ width, height })}\n        >\n          <div\n            onClick={() => this.setState({ minimized: false })}\n            className={`uirStateVisWindowOverlay ${minimized ? 'minimized' : ''}`}\n          />\n\n          <Controls\n            router={this.props.router}\n            onRendererChange={this.handleRendererChange.bind(this)}\n            onMinimize={() => this.setState({ minimized: true })}\n            onClose={() => this.dispose()}\n          />\n\n          <StateTree\n            router={this.props.router}\n            nodeOptions={this.props.visualizationOptions.node}\n            width={this.svgWidth()}\n            height={this.svgHeight()}\n            renderer={this.state.renderer}\n          />\n        </StateVisWindow>\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from 'preact';\n\nexport interface IProps {\n  transition: any;\n\n  pinned: boolean;\n  expanded: boolean;\n  togglePinned: any;\n  toggleExpand: any;\n}\n\nexport interface IState {}\n\nexport class PopoverHeading extends Component<IProps, IState> {\n  render() {\n    const tackClass = () => 'uir-icon uir-icon-thumb-tack ' + (this.props.pinned ? '' : 'uir-rotate-35');\n    const expandClass = () =>\n      'uir-icon uirTranVis_tooltipRight ' + (this.props.expanded ? 'uir-icon-toggle-on' : 'uir-icon-toggle-off');\n\n    return (\n      <div className=\"uirTranVis_panelHeading uirTranVis_heading\">\n        <div style={{ cursor: 'pointer' }} onClick={this.props.togglePinned}>\n          <i className={tackClass()} />\n        </div>\n\n        <h3 className=\"uirTranVis_panelTitle\">Transition #{this.props.transition.$id}</h3>\n\n        <div style={{ cursor: 'pointer' }} onClick={this.props.toggleExpand}>\n          <i className={expandClass()} />\n        </div>\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from 'preact';\n\nexport interface IProps {}\nexport interface IState {}\nexport class Modal extends Component<IProps, IState> {\n  _ref: any;\n\n  static show = (modalTitle: string, id: string, value: any, component) => {\n    let modal = document.body.querySelector('#uirTranVis_modal');\n    if (!modal) {\n      modal = document.createElement('div');\n      modal.id = 'uirTranVis_modal';\n      document.body.appendChild(modal);\n    }\n\n    const Nothing = () => null;\n    const close = () => render(<Nothing />, document.body, modal);\n    render(h(component, { close, modalTitle, id, value }), modal);\n  };\n\n  componentDidMount() {\n    let el = this._ref;\n    setTimeout(() => {\n      let fades = el.getElementsByClassName('uir-fade');\n      [].slice.apply(fades).forEach(node => (node.className += ' in'));\n    }, 35);\n  }\n\n  render() {\n    return (\n      <div ref={ref => (this._ref = ref)}>\n        <div className=\"uirTranVis_modal-backdrop uir-fade\" style={{ zIndex: 1040 }} />\n\n        <div tabIndex={-1} className=\"uirTranVis_modal uir-fade\" style={{ zIndex: 1050, display: 'block' }}>\n          <div className=\"uirTranVis_modal-dialog modal-lg\">\n            <div className=\"uirTranVis_modal-content\">{this.props.children}</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from 'preact';\n\nexport interface IProps {\n  data: any;\n}\nexport interface IState {\n  show: boolean;\n}\n\nexport class Pretty extends Component<IProps, IState> {\n  preStyle = {\n    display: 'block',\n    padding: '10px 30px',\n    margin: '0',\n  };\n\n  state = { show: true };\n\n  toggle() {\n    this.setState({\n      show: !this.state.show,\n    });\n  }\n\n  render() {\n    return (\n      <div>{this.state.show ? <pre style={this.preStyle}>{JSON.stringify(this.props.data, null, 2)}</pre> : false}</div>\n    );\n  }\n}\n","import { h, render, Component } from 'preact';\nimport { Modal } from '../util/modal';\nimport { Pretty } from '../util/pretty';\n\nexport interface IProps {\n  toggles?: any;\n  open?: boolean;\n  close?: Function;\n  modalTitle?: string;\n  id?: string;\n  value?: any;\n}\n\nexport class ResolveData extends Component<IProps, any> {\n  close = () => this.props.close();\n\n  render() {\n    return (\n      <div>\n        <Modal>\n          <div className=\"uirTranVis_modal-header uir-resolve-header\">\n            <div style={{ fontSize: '20px' }}>\n              {this.props.modalTitle}: {this.props.id}\n            </div>\n            <button className=\"uirTranVis_btn uirTranVis_btnXs uirTranVis_btnPrimary\" onClick={this.close}>\n              <i className=\"uir-icon uir-iconw-close\" />\n            </button>\n          </div>\n\n          <div className=\"uirTranVis_modalBody\">\n            <Pretty data={this.props.value} />\n          </div>\n\n          <div className=\"uirTranVis_modalFooter\">\n            <button className=\"uirTranVis_btn uirTranVis_btnPrimary\" onClick={this.close}>\n              Close\n            </button>\n          </div>\n        </Modal>\n      </div>\n    );\n  }\n}\n","/**\n * Returns a string shortened to a maximum length\n *\n * If the string is already less than the `max` length, return the string.\n * Else return the string, shortened to `max - 3` and append three dots (\"...\").\n *\n * @param max the maximum length of the string to return\n * @param str the input string\n */\nexport function maxLength(max: number, str: string) {\n  if (str.length <= max) return str;\n  return str.substr(0, max - 3) + '...';\n}\n\nfunction stringifyPattern(value) {\n  if (value === undefined) return 'undefined';\n  if (value === null) return 'null';\n  if (typeof value === 'object' && typeof value.then === 'function') return '[Promise]';\n  return value;\n}\n\nexport function stringify(o: Object) {\n  var seen: any[] = [];\n\n  function format(val: any) {\n    if (typeof val === 'object') {\n      if (seen.indexOf(val) !== -1) return '[circular ref]';\n      seen.push(val);\n    }\n    return stringifyPattern(val);\n  }\n\n  return JSON.stringify(o, (key, val) => format(val)).replace(/\\\\\"/g, '\"');\n}\n","import { h, Component } from 'preact';\nimport { Modal } from '../util/modal';\nimport { ResolveData } from './ResolveData';\nimport { maxLength } from '../util/strings';\n\nexport interface KeyValueClasses {\n  div?: string;\n  key?: string;\n  val?: string;\n}\n\nexport interface IKeyValueRowProps {\n  classes: KeyValueClasses;\n  modalTitle: string;\n  tuple: { key: string; val: any };\n}\n\nexport class KeyValueRow extends Component<IKeyValueRowProps, {}> {\n  render() {\n    const { tuple: { key, val }, classes, modalTitle } = this.props;\n    const showModal = () => Modal.show(modalTitle, key, val, ResolveData);\n\n    // prettier-ignore\n    const renderValue = () => {\n      if (val === undefined)                  return <span className=\"uirTranVis_code\">undefined</span>;\n      if (val === null)                       return <span className=\"uirTranVis_code\">null</span>;\n      if (typeof val === 'string')            return <span className=\"uirTranVis_code\">\"{maxLength(100, val)}\"</span>;\n      if (typeof val === 'number')            return <span className=\"uirTranVis_code\">{val.toString()}</span>;\n      if (typeof val === 'boolean')           return <span className=\"uirTranVis_code\">{val.toString()}</span>;\n      if (Array.isArray(val))                 return <span className=\"link\" onClick={showModal}>[Array]</span>;\n      if (typeof val === 'object')            return <span className=\"link\" onClick={showModal}>[Object]</span>;\n      if (typeof val.toString === 'function') return <span>{maxLength(100, val.toString())}</span>;\n    };\n\n    return (\n      <div className={classes.div}>\n        <div className={classes.key}>{key}:</div>\n        <div className={classes.val}>{renderValue()}</div>\n      </div>\n    );\n  }\n}\n\ninterface Bucket {\n  label: string;\n  is: (val) => boolean;\n  value?: any;\n  count: number;\n  data: { [key: string]: any };\n}\n\nexport interface IGroupDefinition {\n  value: any;\n  label: string;\n}\n\nexport interface IKeysAndValuesProps {\n  data: any;\n  classes: KeyValueClasses;\n  modalTitle?: string;\n  groupedValues?: IGroupDefinition[];\n  enableGroupToggle?: boolean;\n}\n\nexport interface IKeysAndValuesState {\n  collapseFalsy: boolean;\n}\n\nexport class KeysAndValues extends Component<IKeysAndValuesProps, IKeysAndValuesState> {\n  public static falsyGroupDefinitions: IGroupDefinition[] = [\n    { value: undefined, label: 'undefined' },\n    { value: null, label: 'null' },\n    { value: '', label: 'empty string' },\n  ];\n  state = { collapseFalsy: true };\n\n  private makeBuckets(definitions: IGroupDefinition[], data: { [key: string]: any }): Bucket[] {\n    const makeBucket = (def: IGroupDefinition): Bucket => ({\n      label: def.label,\n      is: val => val === def.value,\n      value: def.value,\n      count: 0,\n      data: {},\n    });\n\n    let defaultBucket = {\n      label: 'default',\n      is: () => true,\n      count: 0,\n      data: {},\n    };\n\n    const buckets = definitions.map(makeBucket).concat(defaultBucket);\n\n    Object.keys(data).forEach(key => {\n      const bucket = buckets.find(bucket => bucket.is(data[key]));\n      bucket.data[key] = data[key];\n      bucket.value = data[key];\n      bucket.count++;\n    });\n\n    return buckets;\n  }\n\n  render() {\n    const { data, classes, modalTitle } = this.props;\n\n    const groupedValues = this.props.groupedValues || KeysAndValues.falsyGroupDefinitions;\n    const enableGroupToggle = this.props.enableGroupToggle || false;\n\n    const isCollapsed = this.state.collapseFalsy;\n\n    const buckets: Bucket[] = this.makeBuckets(groupedValues, data);\n    const defaultBucket = buckets.find(bucket => bucket.label === 'default');\n    const groupedBuckets = buckets.filter(bucket => !!bucket.count && bucket !== defaultBucket);\n    const groupedCount = groupedBuckets.reduce((total, bucket) => (total += bucket.count), 0);\n\n    const tuples = Object.keys(defaultBucket.data).map(key => ({ key, val: defaultBucket.data[key] }));\n    const groupedTuples = groupedBuckets.map(bucket => {\n      const key = Object.keys(bucket.data)\n        .sort()\n        .join(', ');\n      const val = bucket.value;\n      return { key, val };\n    });\n\n    const showGroupToggle = enableGroupToggle && groupedCount > 1;\n\n    return (\n      <div className=\"uirTranVis_keysAndValues\">\n        {tuples.map(tuple => <KeyValueRow key={tuple.key} tuple={tuple} classes={classes} modalTitle={modalTitle} />)}\n\n        {showGroupToggle &&\n          !!groupedTuples.length && (\n            <a\n              href=\"javascript:void(0)\"\n              onClick={() => this.setState({ collapseFalsy: !isCollapsed })}\n              className=\"uirTranVis_keyValue\"\n            >\n              {isCollapsed ? 'show' : 'hide'} {groupedCount} {groupedBuckets.map(bucket => bucket.label).join(' or ')}{' '}\n              parameter values\n            </a>\n          )}\n\n        {(!showGroupToggle || !this.state.collapseFalsy) &&\n          groupedTuples.map(tuple => (\n            <KeyValueRow key={tuple.key} tuple={tuple} classes={classes} modalTitle={modalTitle} />\n          ))}\n      </div>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport { KeysAndValues } from './KeysAndValues';\n\nexport interface IProps {\n  trans: any;\n  status: string;\n  rejection: string;\n}\n\nexport class TransSummary extends Component<IProps, {}> {\n  render() {\n    return (\n      <div className=\"uirTranVis_transSummary\">\n        <div className=\"uirTranVis_summaryData\">\n          <span>From:</span>\n          <strong>{this.props.trans.from().name || '(root)'}</strong>\n        </div>\n\n        <div className=\"uirTranVis_summaryData\">\n          <span>To:</span>\n          <strong>{this.props.trans.to().name || '(root)'}</strong>\n        </div>\n\n        <div className=\"uirTranVis_summaryData\">\n          <span>Result:</span>\n          <div>\n            <strong>{this.props.status}</strong>\n            {this.props.rejection ? <span>: {this.props.rejection}</span> : null}\n          </div>\n        </div>\n\n        <div className=\"uirTranVis_summaryHeading\">Parameter Values:</div>\n\n        <div>\n          <KeysAndValues\n            groupedValues={KeysAndValues.falsyGroupDefinitions}\n            enableGroupToggle={true}\n            data={this.props.trans.params()}\n            modalTitle=\"Parameter value\"\n            classes={{ div: 'uirTranVis_keyValue', key: '', val: '' }}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from 'preact';\nimport { stringify, maxLength } from '../util/strings';\nimport { KeysAndValues } from './KeysAndValues';\nimport { Transition } from '@uirouter/core';\n\nexport interface IProps {\n  trans: Transition;\n  node: any;\n  type: string;\n}\n\nexport class NodeDetail extends Component<IProps, {}> {\n  stateName() {\n    let node = this.props.node;\n    let name = node && node.state && node.state.name;\n    if (name === '') name = '(root)';\n    return name && name.split('.').reverse()[0];\n  }\n\n  params() {\n    let node = this.props.node;\n    return (\n      node &&\n      node.paramSchema.reduce((params, param) => {\n        params[param.id] = node.paramValues[param.id];\n        return params;\n      }, {})\n    );\n  }\n\n  resolves() {\n    const asString = val => (typeof val === 'string' ? val : maxLength(30, stringify(val)));\n\n    let node = this.props.node;\n    let ignoredTokens = ['$stateParams', '$transition$', '$state$', this.props.trans.constructor];\n\n    return (\n      node &&\n      node.resolvables.filter(r => ignoredTokens.indexOf(r.token) === -1).reduce((acc, r) => {\n        acc[asString(r.token)] = r.data;\n        return acc;\n      }, {})\n    );\n  }\n\n  render() {\n    if (!this.props.node) return null;\n    const params = this.params();\n    const resolves = this.resolves();\n\n    return !this.props.node ? null : (\n      <div className=\"uirTranVis_nodeDetail\">\n        <div className=\"uirTranVis_heading\">\n          <div className=\"uirTranVis_nowrap uirTranVis_deemphasize\">({this.props.type} state)</div>\n          <div className=\"uirTranVis_stateName\">{this.stateName()}</div>\n        </div>\n\n        {!!Object.keys(params).length && (\n          <div className=\"params\">\n            <div className=\"uirTranVis_paramsLabel uirTranVis_deemphasize\">Parameter values</div>\n\n            <KeysAndValues data={this.params()} classes={{ div: 'uirTranVis_keyValue' }} modalTitle=\"Parameter value\" />\n          </div>\n        )}\n\n        {!!Object.keys(resolves).length && (\n          <div className=\"params resolve\">\n            <div className=\"uirTranVis_resolveLabel uirTranVis_deemphasize\">Resolved data</div>\n\n            <KeysAndValues\n              data={this.resolves()}\n              classes={{ div: 'uirTranVis_keyValue' }}\n              modalTitle=\"Resolved value\"\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from 'preact';\n\nexport interface IProps {\n  top: string;\n  bottom: string;\n}\nexport class FlowArrow extends Component<IProps, any> {\n  height = 1000;\n\n  renderCurve = () => (\n    <path\n      stroke=\"white\"\n      stroke-width=\"20\"\n      fill=\"none\"\n      d={`M50 ${this.height} V 70 Q50 20, 100 20 Q150 20, 150 70 V ${this.height}`}\n    />\n  );\n\n  renderVerticalLine = () => (\n    <svg viewBox={`0 70 100 ${this.height - 70}`} className=\"flowArrowSvg\">\n      {this.renderCurve()}\n    </svg>\n  );\n\n  renderCurveRU = () => (\n    <svg viewBox={`0 0 100 ${this.height}`} className=\"flowArrowSvg top\">\n      {this.renderCurve()}\n    </svg>\n  );\n\n  renderCurveRD = () => (\n    <svg viewBox={`100 0 100 ${this.height}`} className=\"flowArrowSvg top\">\n      {this.renderCurve()}\n    </svg>\n  );\n\n  renderArrowU = () => (\n    <svg viewBox={`0 0 100 ${this.height}`} className=\"flowArrowSvg top\">\n      <path stroke=\"white\" stroke-width=\"20\" fill=\"none\" d={`M50 ${this.height} V 20 `} />\n      <polygon fill=\"white\" stroke=\"white\" stroke-width=\"20\" points=\"50,20 35,40 65,40\" />\n    </svg>\n  );\n\n  renderArrowD = () => (\n    <svg viewBox={`0 0 100 ${this.height}`} className=\"flowArrowSvg bottom\">\n      <path stroke=\"white\" stroke-width=\"20\" fill=\"none\" d={`M50 0 V ${this.height - 20}`} />\n      <polygon\n        fill=\"white\"\n        stroke=\"white\"\n        stroke-width=\"20\"\n        points={`50,${this.height - 20} 35,${this.height - 40} 65,${this.height - 40}`}\n      />\n    </svg>\n  );\n\n  render() {\n    const renderSvg = type => {\n      switch (type) {\n        case 'V':\n          return this.renderVerticalLine();\n        case 'RU':\n          return this.renderCurveRU();\n        case 'RD':\n          return this.renderCurveRD();\n        case 'AU':\n          return this.renderArrowU();\n        case 'AD':\n          return this.renderArrowD();\n        default:\n          return null;\n      }\n    };\n\n    return (\n      <div className=\"flowArrowCell\">\n        <div style={{ overflow: 'hidden', position: 'relative', flex: '1' }}>{renderSvg(this.props.top)}</div>\n\n        <div style={{ overflow: 'hidden', position: 'relative', flex: '1' }}>{renderSvg(this.props.bottom)}</div>\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from 'preact';\nimport { NodeDetail } from './NodeDetail';\nimport { FlowArrow } from './FlowArrow';\n\nexport interface TransStruct {\n  key: string;\n  to: any;\n  toType: string;\n  from: any;\n  fromType: string;\n}\n\nexport interface IProps {\n  transition: any;\n}\n\nexport interface IState {\n  retained: TransStruct[];\n  enterExit: TransStruct[];\n}\n\nexport class NodePaths extends Component<IProps, IState> {\n  state = {\n    retained: [],\n    enterExit: [],\n  };\n\n  componentDidMount() {\n    let trans = this.props.transition;\n    let tcPaths = Object.assign({}, trans.treeChanges());\n\n    // Ignore the root state when drawing paths.\n    ['entering', 'exiting', 'retained'].forEach(key => (tcPaths[key] = tcPaths[key].filter(node => !!node.state.name)));\n\n    const partialKey = (pathname, idx) => {\n      let node = tcPaths[pathname][idx];\n      return node ? node.state.name : '';\n    };\n\n    const key = (pathname1, pathname2, idx) =>\n      `${trans.$id}.${partialKey(pathname1, idx)}-${partialKey(pathname2, idx)}`;\n\n    let retained: TransStruct[] = tcPaths.retained.map((node, idx) => ({\n      key: key('retained', 'retained', idx),\n      to: node,\n      toType: 'retain',\n      from: node,\n      fromType: 'retain',\n    }));\n    let enterExit: TransStruct[] = [];\n\n    let maxPathLength = Math.max(tcPaths.exiting.length, tcPaths.entering.length);\n    for (let i = 0; i < maxPathLength; i++) {\n      enterExit.push({\n        key: key('exiting', 'entering', i),\n        to: tcPaths.entering[i],\n        toType: tcPaths.entering[i] && 'enter',\n        from: tcPaths.exiting[i],\n        fromType: tcPaths.exiting[i] && 'exit',\n      });\n    }\n\n    this.setState({ retained, enterExit });\n  }\n\n  render() {\n    var height = 2000;\n    var retained = this.state.retained || [];\n    var enterExit = this.state.enterExit || [];\n    var lastEnterIdx = enterExit.filter(x => !!x.toType).length - 1;\n\n    return (\n      <table className=\"uirTranVis_paths\">\n        <thead>\n          <tr>\n            <th>From Path</th>\n            <th>To Path</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          {// Render the retained states\n          retained.map(elem => (\n            <tr key={elem.key}>\n              <td className={elem.fromType} colSpan={2}>\n                <NodeDetail trans={this.props.transition} node={elem.from} type={elem.fromType} />\n              </td>\n            </tr>\n          ))}\n\n          {// Render the entered/exited states\n          enterExit.map((elem, idx) => (\n            <tr key={elem.key}>\n              <td colSpan={2}>\n                <div className=\"uirTranVis_Row\">\n                  <div className={`${elem.fromType}`}>\n                    {!elem.fromType ? null : (\n                      <div className=\"uirTranVis_nodeContent\">\n                        <NodeDetail trans={this.props.transition} node={elem.from} type={elem.fromType} />\n                        <FlowArrow bottom=\"V\" top={idx ? 'V' : elem.toType ? 'RU' : 'AU'} />\n                      </div>\n                    )}\n                  </div>\n\n                  <div className={`${elem.toType}`}>\n                    {!elem.toType ? null : (\n                      <div className=\"uirTranVis_nodeContent\">\n                        <FlowArrow\n                          top={idx ? 'V' : elem.fromType ? 'RD' : 'V'}\n                          bottom={idx == lastEnterIdx ? 'AD' : 'V'}\n                        />\n                        <NodeDetail trans={this.props.transition} node={elem.to} type={elem.toType} />\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    );\n  }\n}\n","import { h, render, Component } from 'preact';\nimport { PopoverHeading } from './PopoverHeading';\nimport { TransSummary } from './TransSummary';\nimport { NodePaths } from './NodePaths';\n\nexport interface IProps {\n  transition: any;\n  status: string;\n  rejection: string;\n\n  pinned: boolean;\n  expanded: boolean;\n  open: boolean;\n  togglePinned: Function;\n  toggleExpand: Function;\n}\n\nexport interface IState {}\n\nexport class TransitionPopover extends Component<IProps, IState> {\n  render() {\n    if (!this.props.open && !this.props.pinned) return null;\n\n    const classes = () =>\n      'uirTranVis_transitionDetail uirTranVis_panel panel-default ' +\n      (this.props.pinned ? 'pin ' : '') +\n      (this.props.expanded ? 'expand ' : '') +\n      (this.props.open ? 'showDetail ' : '');\n\n    return (\n      <div className={classes()}>\n        <PopoverHeading\n          transition={this.props.transition}\n          pinned={this.props.pinned}\n          expanded={this.props.expanded}\n          togglePinned={this.props.togglePinned}\n          toggleExpand={this.props.toggleExpand}\n        />\n\n        <div className=\"uirTranVis_panelBody\">\n          <TransSummary trans={this.props.transition} status={this.props.status} rejection={this.props.rejection} />\n          <hr />\n          <NodePaths transition={this.props.transition} />\n        </div>\n\n        <div className=\"uirTranVis_downArrow\" />\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from 'preact';\n\nexport interface IProps {\n  transition: any;\n  toggleExpand: Function;\n  status: string;\n  message: string;\n}\n\nexport interface IState {}\n\nexport class BreadcrumbArrow extends Component<IProps, IState> {\n  handleClick = () => this.props.toggleExpand();\n\n  iconClass() {\n    let iconClasses = {\n      running: 'uir-icon uir-spin uir-iconw-spinner',\n      success: 'uir-icon uir-iconw-check',\n      redirected: 'uir-icon uir-iconw-share',\n      ignored: 'uir-icon uir-iconw-circle-o',\n      error: 'uir-icon uir-iconw-close',\n    };\n\n    return iconClasses[this.props.status];\n  }\n\n  render() {\n    return !this.props.transition ? null : (\n      <div className={this.props.status + ' uirTranVis_historyEntry'} onClick={this.handleClick}>\n        <div className=\"uirTranVis_historyEntrySummary\">\n          <div className=\"uirTranVis_transId\">{this.props.transition.$id}</div>\n          <div className=\"uirTranVis_status\">\n            {this.props.status}\n            {!this.props.message ? null : <span>: {this.props.message}</span>}\n          </div>\n          <div className=\"uirTranVis_transName\">\n            <i className={this.iconClass()} />\n            <span>{this.props.transition.to().name}</span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","export const makeCancelable = promise => {\n  let hasCanceled_ = false;\n\n  const wrappedPromise = new Promise((resolve, reject) => {\n    promise.then(\n      val => (hasCanceled_ ? reject({ isCanceled: true }) : resolve(val)),\n      error => (hasCanceled_ ? reject({ isCanceled: true }) : reject(error)),\n    );\n  });\n\n  var cancelablePromise = {\n    promise: wrappedPromise,\n    isCanceled: false,\n    cancel() {\n      cancelablePromise.isCanceled = hasCanceled_ = true;\n    },\n  };\n\n  return cancelablePromise;\n};\n","import { h, render, Component } from 'preact';\nimport { TransitionPopover } from './TransitionPopover';\nimport { BreadcrumbArrow } from './BreadcrumbArrow';\nimport { maxLength } from '../util/strings';\nimport { makeCancelable } from '../util/cancelablePromise';\n\nexport interface IProps {\n  transition: any;\n}\n\nexport interface IState {\n  status?: string;\n  message?: string;\n  rejection?: string;\n  pinned?: boolean;\n  expanded?: boolean;\n  open?: boolean;\n  deregisterFunctions?: Function[];\n}\n\nexport class TransitionView extends Component<IProps, IState> {\n  transitionPromise = null;\n\n  state = {\n    status: 'running',\n    message: null,\n    rejection: null,\n    pinned: false,\n    expanded: false,\n    open: false,\n    deregisterFunctions: [],\n  };\n\n  componentDidMount() {\n    let trans = this.props.transition;\n\n    const setMessage = message => {\n      // Transition hooks are computed when the trans starts; they can't be removed while the trans is running.\n      if (!this.transitionPromise.isCanceled) {\n        this.setState({ message });\n      }\n    };\n    const statename = state => state.name || '(root)';\n\n    let fns = [];\n    fns.push(trans.onStart({}, () => setMessage('Starting...'), { priority: 10000 }));\n    fns.push(trans.onExit({}, (t, state) => setMessage(`Exiting ${statename(state)}`), { priority: 10000 }));\n    fns.push(trans.onRetain({}, (t, state) => setMessage(`Retained ${statename(state)}`), { priority: 10000 }));\n    fns.push(trans.onEnter({}, (t, state) => setMessage(`Entering ${statename(state)}`), { priority: 10000 }));\n    fns.push(trans.onFinish({}, () => setMessage(`Finishing...`)));\n\n    this.setState({ deregisterFunctions: fns });\n\n    const success = () => this.setState({ status: 'success', message: null });\n    const error = err => {\n      if (err && err.isCanceled) return;\n\n      let status = 'error',\n        rejection = null;\n\n      if (err) {\n        rejection = err && err.message;\n\n        let type = err && err.type;\n        if (type == 2 && err.redirected === true) {\n          status = 'redirected';\n          let targetState = err['detail'];\n          let toState = targetState.name();\n          let toParams = JSON.stringify(targetState.params());\n          rejection = maxLength(100, `${toState}(${toParams}`) + ')';\n        }\n\n        if (type == 5) {\n          status = 'ignored';\n          rejection = 'All states and parameters in the To and From paths are identical.';\n        }\n      }\n\n      this.setState({ status, rejection, message: null });\n    };\n\n    this.transitionPromise = makeCancelable(trans.promise);\n    this.transitionPromise.promise.then(success, error);\n  }\n\n  componentWillUnmount() {\n    this.transitionPromise.cancel();\n    if (this.state.deregisterFunctions) {\n      this.state.deregisterFunctions.forEach(fn => fn());\n    }\n  }\n\n  togglePin = () => this.setState({ pinned: !this.state.pinned });\n  toggleExpand = () => this.setState({ expanded: !this.state.expanded });\n  open = () => this.setState({ open: true });\n  close = () => this.setState({ open: false });\n\n  render() {\n    return (\n      <div onMouseEnter={this.open} onMouseLeave={this.close}>\n        <TransitionPopover\n          transition={this.props.transition}\n          status={this.state.status}\n          rejection={this.state.rejection}\n          pinned={this.state.pinned}\n          expanded={this.state.expanded}\n          open={this.state.open}\n          togglePinned={this.togglePin}\n          toggleExpand={this.toggleExpand}\n        />\n\n        <BreadcrumbArrow\n          transition={this.props.transition}\n          status={this.state.status}\n          message={this.state.message}\n          toggleExpand={this.toggleExpand}\n        />\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from 'preact';\n\nimport { TransitionView } from './TransitionView';\nimport { easing } from '../util/easing';\nimport { animatePath } from '../util/animatepath';\nimport './transitionVisualizer.css';\n\nexport interface IProps {\n  router: any;\n  maximumTransitions?: number;\n}\n\nexport interface IState {\n  transitions?: any[];\n  pointerEvents?: string;\n}\n\n/**\n * This outer component manages the list of all transitions (history), and provides a fixed, scrolling viewport.\n * It attaches hooks for lifecycle events and decorates the transition with a descriptive message.\n */\nexport class TransitionVisualizer extends Component<IProps, IState> {\n  /**\n   * Creates a new TransitionVisualizer and adds it to the document.\n   *\n   * @param router the UIRouter object\n   * @param element (optional) the element where the TransitionVisualizer should be placed.\n   *                If no element is passed, an element will be created in the body.\n   * @param props maximum transitions default: { maximumTransitions: 15 }\n   *\n   *\n   * # Angular 1 + UI-Router (1.0.0-beta.2 and higher):\n   *\n   * Inject the router (`$uiRouter`) in a run block, then call TransitionVisualizer.create();\n   *\n   * ```\n   * app.run(function($uiRouter) {\n   *   TransitionVisualizer.create($uiRouter);\n   * });\n   * ```\n   *\n   * # Angular 1 + UI-Router 1.0.0-alpha.1 through 1.0.0-beta.1:\n   *\n   * Inject the router (`ng1UIRouter`) in a run block, then call TransitionVisualizer.create();\n   *\n   * ```\n   * app.run(function(ng1UIRouter) {\n   *   TransitionVisualizer.create(ng1UIRouter);\n   * });\n   * ```\n   *\n   * Angular 2:\n   *\n   * Call TransitionVisualizer.create() from your UIRouterConfig\n   *\n   * ```\n   * export class MyUIRouterConfig extends UIRouterConfig {\n   *   configure(router: UIRouter) {\n   *     TransitionVisualizer.create(router);\n   *   }\n   * }\n   * ```\n   *\n   * React:\n   *\n   * Call TransitionVisualizer.create() from your bootstrap\n   *\n   * ```\n   * let router = new UIRouterReact();\n   * TransitionVisualizer.create(router);\n   * router.start();\n   * ```\n   *\n   * @return the element that was bootstrapped.\n   *         You can destroy the component using:\n   *         [ReactDOM.unmountComponentAtNode](https://facebook.github.io/react/docs/top-level-api.html#reactdom.unmountcomponentatnode)\n   */\n  static create(router, element?, props = {}) {\n    if (!element) {\n      element = document.createElement('div');\n      element.id = 'uirTransitionVisualizer';\n    }\n\n    let initialProps = Object.assign({}, props, { router });\n    const _render = () => {\n      document.body.appendChild(element);\n      render(h(TransitionVisualizer, initialProps), element);\n    };\n\n    if (document.readyState === 'interactive' || document.readyState === 'complete') {\n      _render();\n    } else {\n      document.addEventListener('DOMContentLoaded', _render as any, false);\n    }\n\n    return element;\n  }\n\n  deregisterFns = [];\n\n  state = {\n    transitions: [],\n    pointerEvents: 'auto',\n  };\n\n  static defaultProps = {\n    router: null,\n    maximumTransitions: 15,\n  };\n\n  _div;\n  cancelPreviousAnim = null;\n\n  componentDidMount() {\n    let dereg = this.props.router.transitionService.onBefore({}, (trans) => {\n      this.setState({ transitions: this.state.transitions.concat(trans) });\n\n      let duration = 750,\n        el = this._div.children[0];\n\n      let scrollToRight = () => {\n        let targetScrollX = el.scrollWidth - el.clientWidth + 200;\n        this.cancelPreviousAnim && this.cancelPreviousAnim();\n        let newVal = [targetScrollX],\n          oldVal = [el.scrollLeft];\n        let max = this.props.maximumTransitions;\n\n        let enforceMax = () => {\n          let list = this.state.transitions;\n          if (list.length <= max) return;\n          this.setState({ transitions: list.slice(list.length - max) });\n        };\n\n        let callback = (vals) => (el.scrollLeft = vals[0]);\n        this.cancelPreviousAnim = animatePath(newVal, oldVal, duration, callback, enforceMax, easing.easeInOutCubic);\n      };\n\n      setTimeout(scrollToRight, 25);\n    });\n    this.deregisterFns.push(dereg);\n\n    document.body.addEventListener('mousemove', this.onMouseMove);\n    this.deregisterFns.push(() => document.body.removeEventListener('mousemove', this.onMouseMove));\n  }\n\n  /**\n   * Disable pointer events when the mouse is above the timeline\n   *\n   * This allows clicks to pass through the outer div to the user's app components\n   * even when a transitionview details box is open and pinned.\n   *\n   * Enable pointer events when mouse is inside the timeline to allow horizontal scroll & scroll wheel\n   */\n  onMouseMove = (evt) => {\n    let windowHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    var pointerEvents = windowHeight - evt.clientY < 65 ? 'auto' : 'none';\n    if (this.state.pointerEvents != pointerEvents) {\n      this.setState({ pointerEvents });\n    }\n  };\n\n  componentWillUnmount() {\n    while (this.deregisterFns.length) this.deregisterFns.pop()();\n  }\n\n  render() {\n    let pointerEvents = this.state.pointerEvents;\n\n    return (\n      <div ref={(el) => (this._div = el)}>\n        <div className=\"uirTranVis_history\" style={{ pointerEvents }}>\n          {this.state.transitions.map((trans) => (\n            <div key={trans.$id} className=\"uirTranVis_transition\">\n              <TransitionView transition={trans} />\n              <div style={{ minWidth: '18em', border: '1px solid transparent' }} />\n            </div>\n          ))}\n          <div style={{ width: '200px', height: '1px' }} />\n        </div>\n      </div>\n    );\n  }\n}\n","import { render, h } from 'preact';\nimport { UIRouter, UIRouterPlugin } from '@uirouter/core';\nimport { StateSelector } from './selector/StateSelector';\nimport { StateVisualizer } from './statevis/StateVisualizer';\nimport { NodeOptions, StateTree } from './statevis/tree/StateTree';\nimport { TransitionVisualizer } from './transition/TransitionVisualizer';\n\nconst visualizer = (router: UIRouter) => new Visualizer(router, {});\n\nexport interface StateVisualizerOptions {\n  node?: NodeOptions;\n}\n\nexport interface Options {\n  state?: boolean;\n  stateVisualizer?: StateVisualizerOptions;\n  transition?: boolean;\n}\n\nfunction unmountComponent(node) {\n  let Nothing = () => null;\n  render(h(Nothing as any, null), document.body, node);\n}\n\nconst DEFAULTS = {\n  state: true,\n  stateVisualizer: {},\n  transition: true,\n};\n\nclass Visualizer implements UIRouterPlugin {\n  name: string = 'visualizer';\n  private stateVisualizerEl: Element;\n  private transitionVisualizerEl: Element;\n\n  dispose(router?: UIRouter): any {\n    this.stateVisualizerEl && unmountComponent(this.stateVisualizerEl);\n    this.transitionVisualizerEl && unmountComponent(this.transitionVisualizerEl);\n    this.stateVisualizerEl = null;\n    this.transitionVisualizerEl = null;\n  }\n\n  constructor(public router: UIRouter, options: Options) {\n    options = Object.assign({}, DEFAULTS, options);\n    if (options.state) {\n      this.stateVisualizerEl = StateVisualizer.create(router, undefined, undefined, options.stateVisualizer);\n    }\n    if (options.transition) {\n      this.transitionVisualizerEl = TransitionVisualizer.create(router);\n    }\n  }\n}\n\n// Visualizer: router.plugin(Visualizer);\n// visualizer: visualizer(router);\n// StateVisualizer: StateVisualizer.create(router, el?, props?)\n// StateTree: StateTree.create(router, el?, props?)\n// TransitionVisualizer: TransitionVisualizer.create(router, el?, props?)\n// StateSelector: React State Selector component\nexport { Visualizer, visualizer, StateVisualizer, StateTree, TransitionVisualizer, StateSelector };\n"]},"metadata":{},"sourceType":"module"}